{"version":3,"sources":["../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/classApplyDescriptorGet.js","../node_modules/@babel/runtime/helpers/classExtractFieldDescriptor.js","../node_modules/@babel/runtime/helpers/classPrivateFieldGet.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/three/build/three.module.js","../node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/three/examples/jsm/shaders/CopyShader.js","../node_modules/three/examples/jsm/postprocessing/Pass.js","../node_modules/three/examples/jsm/postprocessing/ShaderPass.js","../node_modules/three/examples/jsm/postprocessing/MaskPass.js","../node_modules/three/examples/jsm/postprocessing/EffectComposer.js","../node_modules/three/examples/jsm/postprocessing/RenderPass.js","../node_modules/three/examples/jsm/shaders/FXAAShader.js","../node_modules/three/examples/jsm/shaders/LuminosityHighPassShader.js","../node_modules/three/examples/jsm/postprocessing/UnrealBloomPass.js","../node_modules/gsap/gsap-core.js","../node_modules/gsap/CSSPlugin.js","../node_modules/gsap/index.js","materials/MetalMaterial/index.js","materials/PipesMaterial/index.js","materials/LightsMaterial/index.js","materials/HoloMaterial/vertex.glsl","materials/HoloMaterial/fragment.glsl","materials/HoloMaterial/index.js","materials/NeonMaterial/index.js","materials/ScreenMaterial/vertex.glsl","materials/ScreenMaterial/fragment.glsl","materials/ScreenMaterial/index.js","materials/FloorMaterial/vertex.glsl","materials/FloorMaterial/fragment.glsl","materials/FloorMaterial/index.js","../node_modules/tweakpane/dist/tweakpane.js","Debugger.js","index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","module","exports","__esModule","arrayLikeToArray","require","_arrayWithoutHoles","isArray","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_nonIterableSpread","TypeError","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_classApplyDescriptorGet","receiver","get","_classExtractFieldDescriptor","privateMap","action","has","classApplyDescriptorGet","classExtractFieldDescriptor","_classPrivateFieldGet","_typeof","obj","_regeneratorRuntime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","keys","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","NoColorSpace","SRGBColorSpace","LinearSRGBColorSpace","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","GLSL1","GLSL3","_SRGBAFormat","EventDispatcher","listener","_listeners","listeners","indexOf","listenerArray","index","splice","event","array","l","_lut","_seed","DEG2RAD","Math","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","uuid","toLowerCase","clamp","min","max","euclideanModulo","m","mapLinear","x","a1","a2","b1","b2","inverseLerp","y","lerp","t","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","s","imul","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","console","warn","denormalize$1","Float32Array","Uint16Array","Uint8Array","Int16Array","Int8Array","normalize","round","MathUtils","freeze","denormalize","Vector2","isVector2","scalar","v","multiplyScalar","e","elements","minVal","maxVal","divideScalar","sqrt","angle","atan2","distanceToSquared","dx","dy","alpha","v1","v2","offset","attribute","getX","getY","center","Matrix3","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","f","g","h","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","r","tx","ty","sx","sy","rotation","cx","cy","theta","matrix","fromArray","arrayNeedsUint32","TYPED_ARRAYS","Uint8ClampedArray","Int32Array","Uint32Array","Float64Array","getTypedArray","buffer","createElementNS","document","SRGBToLinear","LinearToSRGB","FN","ColorManagement","legacyMode","workingColorSpace","colorSpace","convert","color","sourceColorSpace","targetColorSpace","fromWorkingColorSpace","toWorkingColorSpace","_colorKeywords","_rgb","_hslA","_hslB","hue2rgb","p","toComponents","source","Color","isColor","setRGB","copy","setHex","setStyle","hex","style","handleAlpha","string","parseFloat","exec","components","parseInt","setHSL","size","setColorName","copySRGBToLinear","copyLinearToSRGB","getHex","hue","saturation","lightness","delta","getHSL","color1","color2","getZ","normalized","NAMES","_canvas","ImageUtils","image","src","HTMLCanvasElement","canvas","width","height","getContext","ImageData","putImageData","drawImage","toDataURL","HTMLImageElement","ImageBitmap","imageData","getImageData","data","Source","isSource","version","meta","isRootObject","images","output","url","isDataTexture","serializeImage","getDataURL","textureId","Texture","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","isTexture","mipmaps","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","userData","onUpdate","isRenderTargetTexture","needsPMREMUpdate","setUvTransform","JSON","parse","stringify","needsUpdate","textures","metadata","toJSON","dispatchEvent","uv","applyMatrix3","Vector4","z","w","isVector4","acos","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getW","WebGLRenderTarget","options","isWebGLRenderTarget","depth","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","samples","dispose","clone","assign","DataArrayTexture","isDataArrayTexture","wrapR","WebGLArrayRenderTarget","isWebGLArrayRenderTarget","Data3DTexture","isData3DTexture","WebGL3DRenderTarget","isWebGL3DRenderTarget","WebGLMultipleRenderTargets","count","isWebGLMultipleRenderTargets","il","Quaternion","isQuaternion","_x","_y","_z","_w","_onChangeCallback","quaternion","euler","update","isEuler","_order","c1","c3","s1","s3","axis","halfAngle","trace","vFrom","vTo","dot","Number","EPSILON","step","angleTo","slerp","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","qa","u1","sqrt1u1","sqrtu1","u2","u3","callback","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","tDir","Vector3","isVector3","applyQuaternion","_quaternion$4","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector$c","projectOnVector","sub","normal","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","u","Box3","Infinity","isBox3","minX","minY","minZ","maxX","maxY","maxZ","points","makeEmpty","expandByPoint","halfSize","_vector$b","add","precise","expandByObject","box","isEmpty","addVectors","subVectors","point","vector","addScalar","updateWorldMatrix","geometry","attributes","position","fromBufferAttribute","boundingBox","computeBoundingBox","_box$3","union","children","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0$2","_v1$7","_v2$3","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","clampedPoint","getSize","_points","setFromPoints","equals","_testAxis","v0","extents","j","p0","p1","p2","_box$2","_v1$6","_toFarthestPoint","_toPoint","Sphere","optionalCenter","maxRadiusSq","distanceTo","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","missingRadiusHalf","_vector$a","_segCenter","_segDir","_diff","_edge1","_edge2","_normal$1","Ray","origin","direction","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","DdN","sign","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","isMatrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$5","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","scale","x2","y2","z2","wx","wy","wz","determinant","_m1$2","invSX","invSY","invSZ","setFromRotationMatrix","left","right","top","bottom","near","far","_matrix$1","_quaternion$3","Euler","DefaultOrder","asin","makeRotationFromQuaternion","newOrder","setFromQuaternion","RotationOrders","Layers","mask","channel","layers","_object3DId","_v1$4","_q1","_m1$1","_target","_position$3","_scale$2","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","isObject3D","parent","DefaultUp","onRotationChange","onQuaternionChange","_onChange","defineProperties","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","updateMatrix","premultiply","decompose","multiply","rotateOnAxis","distance","translateOnAxis","setFromMatrixPosition","isCamera","isLight","lookAt","extractRotation","remove","id","getObjectByProperty","child","traverse","traverseVisible","traverseAncestors","force","updateMatrixWorld","updateParents","updateChildren","geometries","materials","shapes","skeletons","nodes","toArray","isInstancedMesh","instanceMatrix","instanceColor","serialize","library","element","isScene","background","environment","isMesh","isLine","isPoints","parameters","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","animation","extractFromCache","cache","recursive","_v0$1","_v1$3","_v2$2","_v3$1","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","i0","i1","i2","getNormal","setFromCoplanarPoints","getBarycoord","uv1","uv2","uv3","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","addScaledVector","d5","d6","vb","va","denom","targetLengthSq","dot00","dot01","dot02","dot11","dot12","invDenom","p3","materialId","Material","isMaterial","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaToCoverage","premultipliedAlpha","toneMapped","_alphaTest","onBeforeCompile","newValue","flatShading","currentValue","roughness","metalness","sheen","sheenColor","sheenRoughness","emissive","emissiveIntensity","specular","specularIntensity","specularColor","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","iridescence","iridescenceIOR","iridescenceThicknessRange","iridescenceMap","iridescenceThicknessMap","map","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularColorMap","envMap","combine","envMapIntensity","reflectivity","refractionRatio","gradientMap","transmission","transmissionMap","thickness","thicknessMap","attenuationDistance","attenuationColor","sizeAttenuation","linewidth","dashSize","gapSize","alphaTest","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fog","srcPlanes","dstPlanes","MeshBasicMaterial","isMeshBasicMaterial","setValues","_vector$9","_vector2$1","BufferAttribute","itemSize","isBufferAttribute","usage","updateRange","index1","index2","colors","vectors","setXY","setXYZ","applyNormalMatrix","onUploadCallback","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float16BufferAttribute","isFloat16BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","_id$1","_m1","_obj","_offset","_box$1","_boxMorphTargets","_vector$8","BufferGeometry","isBufferGeometry","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","start","materialIndex","getNormalMatrix","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","negate","translate","setAttribute","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","jl","indices","positions","normals","uvs","nVertices","hasAttribute","tangents","getAttribute","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","convertBufferAttribute","array2","isInterleavedBufferAttribute","stride","geometry2","newAttribute","morphArray","addGroup","hasMorphAttributes","attributeArray","setIndex","_inverseMatrix$2","_ray$2","_sphere$3","_vA$1","_vB$1","_vC$1","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA$1","_uvB$1","_uvC$1","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","String","raycaster","intersects","intersectsBox","intersection","morphPosition","groupMaterial","end","checkBufferGeometryIntersection","faceIndex","face","checkIntersection","intersect","intersectTriangle","morphInfluences","influence","boneTransform","BoxGeometry","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","mergeUniforms","uniforms","merged","cloneUniformsGroups","UniformsUtils","merge","default_vertex","default_fragment","ShaderMaterial","isShaderMaterial","defines","uniformsGroups","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","uniform","Camera","PerspectiveCamera","fov","aspect","isPerspectiveCamera","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","focalLength","vExtentSlope","getFilmHeight","atan","tan","fullWidth","fullHeight","enabled","offsetX","offsetY","skew","getFilmWidth","makePerspective","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentRenderTarget","getRenderTarget","currentToneMapping","toneMapping","currentXrEnabled","xr","setRenderTarget","render","CubeTexture","isCubeTexture","WebGLCubeRenderTarget","shader","tEquirect","mesh","currentMinFilter","stencil","clear","_vector1","_vector2","_normalMatrix","Plane","isPlane","setFromNormalAndCoplanarPoint","inverseNormalLength","line","startSign","endSign","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","_sphere$2","_vector$7","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","deleteBuffer","delete","cached","elementSize","PlaneGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","output_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","vertex$g","fragment$g","vertex$f","fragment$f","vertex$e","fragment$e","vertex$d","fragment$d","vertex$c","fragment$c","vertex$b","fragment$b","vertex$a","fragment$a","vertex$9","fragment$9","vertex$8","fragment$8","vertex$7","fragment$7","vertex$6","fragment$6","vertex$5","fragment$5","vertex$4","fragment$4","vertex$3","fragment$3","vertex$2","fragment$2","vertex$1","fragment$1","ShaderChunk","background_vert","background_frag","cube_vert","cube_frag","depth_vert","depth_frag","distanceRGBA_vert","distanceRGBA_frag","equirect_vert","equirect_frag","linedashed_vert","linedashed_frag","meshbasic_vert","meshbasic_frag","meshlambert_vert","meshlambert_frag","meshmatcap_vert","meshmatcap_frag","meshnormal_vert","meshnormal_frag","meshphong_vert","meshphong_frag","meshphysical_vert","meshphysical_frag","meshtoon_vert","meshtoon_frag","points_vert","points_frag","shadow_vert","shadow_frag","sprite_vert","sprite_frag","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","ior","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","iridescenceThicknessMinimum","iridescenceThicknessMaximum","sheenColorMap","sheenRoughnessMap","transmissionSamplerSize","transmissionSamplerMap","WebGLBackground","cubemaps","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","deleteAttribute","onBeforeRender","copyPosition","enableAll","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","getParameter","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","forceUpdate","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","attributesNum","programAttributes","getAttributes","programAttribute","location","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","vertexAttribIPointer","isInstancedBufferGeometry","materialDefaultAttributeValues","isInstancedInterleavedBuffer","locationSize","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","useCache","materialProperties","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLCubeMaps","mapTextureMapping","cubemap","fromEquirectangularTexture","addEventListener","onTextureDispose","removeEventListener","OrthographicCamera","isOrthographicCamera","scaleW","scaleH","makeOrthographic","LOD_MIN","EXTRA_LOD_SIGMA","MAX_SAMPLES","_flatCamera","_clearColor","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_renderer","_pingPongRenderTarget","_lodMax","_cubeSize","_lodPlanes","_sizeLods","_sigmas","_blurMaterial","_cubemapMaterial","_equirectMaterial","_compileMaterial","sigma","_setSize","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapMaterial","_getEquirectMaterial","_dispose","cubeSize","log2","outputTarget","_setViewport","_textureToCubeUV","params","_createRenderTarget","_createPlanes","sizeLods","lodPlanes","sigmas","_getBlurShader","tmpMesh","compile","cubeCamera","upSign","forwardSign","originalAutoClear","backgroundMaterial","backgroundBox","useSolidColor","col","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","sum","weight","outputSize","lodMax","lod","totalLods","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","shaderMaterial","_getCommonVertexShader","WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","isEquirectMap","isCubeMap","fromEquirectangular","fromCubemap","isCubeTextureComplete","cubemapUV","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","morph","WebGLMorphtargets","influencesList","morphTextures","workInfluences","objectInfluences","morphTargetsCount","disposeTexture","hasMorphPosition","hasMorphNormals","hasMorphColors","morphTargets","morphNormals","morphColors","vertexDataCount","vertexDataStride","morphTarget","morphNormal","morphColor","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","influences","sort","MAX_SAFE_INTEGER","WebGLObjects","updateMap","buffergeometry","hasEventListener","onInstancedMeshDispose","instancedMesh","emptyTexture","emptyArrayTexture","empty3dTexture","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","copyArray","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueV1i","uniform1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV2ui","uniform2uiv","setValueV3ui","uniform3uiv","setValueV4ui","uniform4uiv","setValueT1","unit","setTexture2D","setValueT3D1","setTexture3D","setValueT6","setTextureCube","setValueT2DArray1","setTexture2DArray","getSingularSetter","setValueV1fArray","uniform1fv","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV1uiArray","uniform1uiv","setValueV2uiArray","setValueV3uiArray","setValueV4uiArray","setValueT1Array","units","setValueT3DArray","setValueT6Array","setValueT2DArrayArray","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","seq","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","programIdCount","handleSource","errorLine","split","lines2","to","join","getEncodingComponents","getShaderErrors","status","getShaderParameter","errors","getShaderInfoLog","trim","errorMatches","toUpperCase","getShaderSource","getTexelEncodingFunction","functionName","getToneMappingFunction","toneMappingName","generateExtensions","chunks","extensionDerivatives","envMapCubeUVHeight","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","generateCubeUVSize","imageHeight","maxMip","texelHeight","texelWidth","WebGLProgram","cacheKey","envMapCubeUVSize","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexAlphas","vertexUvs","uvsVertexOnly","skinning","morphTextureStride","doubleSided","flipSided","shadowMapEnabled","decodeVideoTexture","physicallyCorrectLights","opaque","outputEncoding","useDepthPacking","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","cachedUniforms","destroy","deleteProgram","usedTimes","_id","WebGLShaderCache","shaderCache","Map","materialCache","vertexShaderStage","_getShaderStage","fragmentShaderStage","materialShaders","_getShaderCacheForMaterial","shaderStage","code","Set","stage","WebGLShaderStage","WebGLPrograms","cubeuvmaps","_programLayers","_customShaders","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","getParameters","shadows","isMeshStandardMaterial","customVertexShaderID","customFragmentShaderID","getVertexShaderID","getFragmentShaderID","useAlphaTest","useClearcoat","useIridescence","isXRRenderTarget","isVideoTexture","isFogExp2","directional","spot","rectArea","hemi","shadowMap","customProgramCacheKey","getProgramCacheKey","getProgramCacheKeyParameters","getProgramCacheKeyBooleans","morphAttributeCount","disableAll","enable","acquireProgram","pl","preexistingProgram","releaseProgram","releaseShaderCache","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","transmissive","getNextRenderItem","renderItem","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","renderCallDepth","list","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","scaleFactor","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","identity","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","setupLightsView","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","vertex","fragment","WebGLShadowMap","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowMaterialVertical","VSM_SAMPLES","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","renderObject","isPointLightShadow","VSMPass","blurSamples","mapPass","renderBufferDirect","getDepthMaterial","customMaterial","customDistanceMaterial","customDepthMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","intersectsObject","k","kl","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","disable","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","uboBindings","uboProgamMap","enabledCapabilities","currentBoundFramebuffers","currentDrawbuffers","defaultDrawbuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","scissorParam","viewportParam","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","bindFramebuffer","framebuffer","drawBuffersWEBGL","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","factor","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","texStorage2D","texStorage3D","texImage3D","updateUBOMapping","uniformsGroup","blockIndex","getUniformBlockIndex","uniformBlockBinding","__bindingPointIndex","WebGLTextures","_gl","utils","multisampledRTTExt","supportsInvalidateFramebuffer","navigator","userAgent","_videoTextures","_sources","useOffscreenCanvas","OffscreenCanvas","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","isPowerOfTwo$1","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","getInternalFormat","internalFormatName","glFormat","glType","getMipLevels","isFramebufferTexture","isCompressedTexture","filterFallback","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","textureProperties","__webglInit","webglTextures","__cacheKey","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","attachmentProperties","textureUnits","resetTextureUnits","textureUnit","getTextureCacheKey","slot","updateVideoTexture","__version","uploadTexture","uploadCubeTexture","wrappingToGL","filterToGL","setTextureParameters","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","forceUpload","textureCacheKey","__currentVersion","pixelStorei","verifyColorSpace","glInternalFormat","mipmap","useTexStorage","allocateMemory","levels","isDepthTexture","isCompressed","cubeImage","mipmapImage","setupFrameBufferTexture","attachment","textureTarget","__hasExternalTextures","useMultisampledRTT","framebufferTexture2DMultisampleEXT","getRenderTargetSamples","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","renderbufferStorageMultisampleEXT","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","__autoAllocateDepthBuffer","createRenderbuffer","rebindTextures","colorTexture","setupRenderTarget","isMultipleRenderTargets","createFramebuffer","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","invalidationArray","depthStyle","ignoreDepthValues","__ignoreDepthValues","invalidateFramebuffer","blitFramebuffer","__useRenderToTexture","sRGBToLinear","WebGLUtils","HALF_FLOAT_OES","SRGB_ALPHA_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","cameras","Group","isGroup","_moveEvent","WebXRController","_targetRay","_grip","_hand","joints","inputState","pinching","hasLinearVelocity","linearVelocity","hasAngularVelocity","angularVelocity","inputSource","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","inputjoint","jointPose","getJointPose","jointName","joint","transform","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","gripSpace","getPose","targetRaySpace","DepthTexture","WebXRManager","framebufferScaleFactor","referenceSpaceType","customReferenceSpace","pose","glBinding","glProjLayer","glBaseLayer","xrFrame","getContextAttributes","initialRenderTarget","newRenderTarget","controllers","controllerInputSources","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","cameraAutoUpdate","isPresenting","getController","controller","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","onSessionEvent","controllerIndex","onSessionEnd","onInputSourcesChange","disconnect","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setReferenceSpace","space","getBaseLayer","getBinding","getFrame","setSession","xrCompatible","makeXRCompatible","layerInit","antialias","XRWebGLLayer","updateRenderState","baseLayer","framebufferWidth","framebufferHeight","depthFormat","depthType","glDepthFormat","projectionlayerInit","colorFormat","XRWebGLBinding","createProjectionLayer","textureWidth","textureHeight","setFoveation","requestReferenceSpace","removed","added","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","translateX","translateZ","near2","far2","left2","right2","top2","bottom2","updateCamera","depthNear","depthFar","getCamera","getFoveation","fixedFoveation","foveation","onAnimationFrameCallback","getViewerPose","views","setRenderTargetFramebuffer","cameraVRNeedsUpdate","glSubImage","getViewSubImage","setRenderTargetTextures","depthStencilTexture","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","refreshUniformsCommon","isMeshLambertMaterial","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","refreshUniformsStandard","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDistance","isMeshNormalMaterial","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLUniformsGroups","updateList","allocatedBindingPoints","maxBindingPoints","bind","webglProgram","prepareUniformsGroup","onUniformsGroupsDispose","updateBufferData","bindingPointIndex","allocateBindingPointIndex","__size","bindBufferBase","__cache","hasUniformChanged","__offset","__data","cachedObject","chunkSize","chunkOffset","getUniformSize","storage","remainingSizeInChunk","boundary","createCanvasElement","display","WebGLRenderer","isWebGLRenderer","_context","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","_alpha","currentRenderList","currentRenderState","renderListStack","renderStateStack","domElement","sortObjects","toneMappingExposure","gammaFactor","_this","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","onContextCreationError","isWebGL1Renderer","shift","message","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","setSize","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","bits","onXRSessionStart","onXRSessionEnd","preventDefault","infoAutoReset","shadowMapAutoUpdate","shadowMapNeedsUpdate","statusMessage","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReferences","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","material2","getProgram","setFromProjectionMatrix","projectObject","camera2","renderScene","onAfterRender","isLOD","intersectsSprite","opaqueObjects","transmissiveObjects","transparentObjects","renderTransmissionPass","renderObjects","lightsStateVersion","programCacheKey","updateCommonMaterialProperties","onBuild","needsLights","materialNeedsLights","progUniforms","uniformsList","seqWithValue","needsProgramChange","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","setOptional","boneTexture","computeBoneTexture","boneTextureSize","markUniformsLightsNeedsUpdate","upload","defaultFramebuffer","__useDefaultFramebuffer","useDefaultFramebuffer","isRenderTarget3D","framebufferBound","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","textureFormat","halfFloatSupportedByExt","readPixels","copyFramebufferToTexture","level","levelScale","copyTexSubImage2D","copyTextureToTexture","srcTexture","dstTexture","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","compressedTexSubImage3D","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","WebGL1Renderer","FogExp2","Fog","Scene","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","setUsage","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA","_vB","_vC","_uvA","_uvB","_uvC","Sprite","float32Array","setFromMatrixScale","transformVertex","vertexPosition","mvPosition","_v1$2","_v2$1","LOD","_currentLevel","addLevel","getObjectForDistance","raycast","_basePosition","_skinIndex","_skinWeight","_vector$5","_matrix","SkinnedMesh","bindMatrixInverse","calculateInverses","skinWeight","manhattanLength","setXYZW","skinIndex","getComponent","boneIndex","bones","boneInverses","Bone","isBone","DataTexture","_offsetMatrix","_identityMatrix","Skeleton","boneMatrices","inverse","bone","json","boneInverse","InstancedBufferAttribute","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","raycastTimes","instanceId","getMatrixAt","linecap","linejoin","_start$1","_end$1","_inverseMatrix$1","_ray$1","_sphere$1","Line","lineDistances","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","distanceSqToSegment","_start","_end","LineSegments","LineLoop","_inverseMatrix","_ray","_sphere","_position$2","Points","testPoint","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","hasVideoFrameCallback","readyState","HAVE_CURRENT_DATA","FramebufferTexture","CompressedTexture","CanvasTexture","isCanvasTexture","Curve","arcLengthDivisions","optionalTarget","getUtoTmapping","getPoint","divisions","getPointAt","lengths","getLengths","cacheArcLengths","current","last","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","t2","pt1","pt2","getTangent","segments","closed","binormals","vec","mat","getTangentAt","MAX_VALUE","tz","makeRotationAxis","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","px","py","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","startPoint","endPoint","getLength","curveLengths","getCurveLengths","diff","lens","cacheLengths","sums","pts","getPoints","fromJSON","Path","currentPoint","moveTo","lineTo","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","npts","concat","absarc","absellipse","firstPoint","lastPoint","LatheGeometry","phiStart","phiLength","initNormals","inverseSegments","curNormal","prevNormal","base","CapsuleGeometry","capSegments","radialSegments","CircleGeometry","thetaStart","thetaLength","segment","CylinderGeometry","radiusTop","radiusBottom","openEnded","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","PolyhedronGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","computeVertexNormals","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","azi","correctUV","details","DodecahedronGeometry","_v0","_v1$1","_normal","_triangle","EdgesGeometry","thresholdAngle","precisionPoints","thresholdDot","indexAttr","getIndex","positionAttr","indexCount","indexArr","vertKeys","hashes","edgeData","jNext","vecHash0","vecHash1","reverseHash","index0","Shape","holes","holesPts","getPointsHoles","hole","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","an","bp","ShapeUtils","contour","faces","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","verticesArray","uvArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","isClockWise","hl","ahole","triangulateShape","scalePt2","pt","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","toJSON$1","geometryShapes","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","IcosahedronGeometry","OctahedronGeometry","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegmentLevel","ShapeGeometry","indexOffset","shapeVertices","shapeHoles","shapeHole","SphereGeometry","thetaEnd","grid","verticesRow","uOffset","TetrahedronGeometry","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","P1","P2","B","T","N","calculatePositionOnCurve","cu","su","quOverP","cs","TubeGeometry","frames","P","generateBufferData","generateSegment","generateIndices","WireframeGeometry","edges","ol","isUniqueEdge","hash1","hash2","Geometries","BoxBufferGeometry","CapsuleBufferGeometry","CircleBufferGeometry","ConeBufferGeometry","CylinderBufferGeometry","DodecahedronBufferGeometry","ExtrudeBufferGeometry","IcosahedronBufferGeometry","LatheBufferGeometry","OctahedronBufferGeometry","PlaneBufferGeometry","PolyhedronBufferGeometry","RingBufferGeometry","ShapeBufferGeometry","SphereBufferGeometry","TetrahedronBufferGeometry","TorusBufferGeometry","TorusKnotBufferGeometry","TubeBufferGeometry","RawShaderMaterial","_sheen","_clearcoat","_iridescence","_transmission","arraySlice","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","AnimationUtils","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","settings","DefaultSettings_","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","copySampleValue_","t1global","mid","intervalChanged_","interpolate_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","getSettings_","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","factoryMethod","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","timeOffset","timeScale","startTime","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","getInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","trackType","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","slerpFlat","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","validate","optimize","jsonTracks","frameTime","parseKeyframeTrack","clipTracks","morphTargetSequence","noLoop","numMorphTargets","objectOrClipArray","clipArray","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","getTrackTypeForValueTypeName","typeName","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","DefaultLoadingManager","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loading","HttpError","response","FileLoader","setTimeout","req","Request","headers","Headers","credentials","mimeType","responseType","fetch","ReadableStream","body","getReader","callbacks","reader","contentLength","total","lengthComputable","loaded","stream","readData","read","close","byteLength","ProgressEvent","enqueue","Response","statusText","arrayBuffer","blob","text","parser","DOMParser","parseFromString","re","label","decoder","TextDecoder","decode","catch","finally","AnimationLoader","setPath","setRequestHeader","setWithCredentials","CompressedTextureLoader","setResponseType","loadTexture","texDatas","mipmapCount","isCubemap","ImageLoader","onImageLoad","removeEventListeners","onImageError","CubeTextureLoader","urls","setCrossOrigin","DataTextureLoader","texData","TextureLoader","Light","HemisphereLight","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","_lightPositionWorld","_lookTarget","PointLightShadow","_cubeDirections","_cubeUps","PointLight","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","coeff","shBasis","LightProbe","MaterialLoader","getTexture","createMaterialFromType","shading","materialLib","LoaderUtils","fromCharCode","decodeURIComponent","escape","lastIndexOf","InstancedBufferGeometry","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","extractUrlBase","loadAsync","parseAsync","parseAnimations","parseShapes","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseSkeletons","bindSkeletons","hasImages","parseImagesAsync","bufferGeometryLoader","setTextures","loadImage","deserializeImage","imageArray","currentUrl","deserializedImage","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","isInteger","objectAnimations","ImageBitmapLoader","isImageBitmapLoader","createImageBitmap","fetchOptions","res","colorSpaceConversion","imageBitmap","AudioContext","window","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","isHemisphereLightProbe","sky","ground","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","_projectionMatrix","StereoCamera","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","oldTime","elapsedTime","running","now","getElapsedTime","getDelta","newTime","performance","Date","_position$1","_quaternion$1","_scale$1","_orientation$1","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation","Audio","getInput","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","delay","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","getFilters","setFilters","_position","_quaternion","_scale","_orientation","PositionalAudio","panner","createPanner","panningModel","refDistance","rolloffFactor","distanceModel","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getByteFrequencyData","getFrequencyData","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","weightAdditive","originalValueOffset","getValue","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","node","findNode","nodeName","_getValue_unbound","_setValue_unbound","targetObject","resolvedProperty","propertyIndex","dest","targetArray","sourceArray","objectName","_getValue_unavailable","_setValue_unavailable","objectIndex","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","root","isAnimationObjectGroup","matches","results","lastDot","substring","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_direct","_getValue_array","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","paths","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","lastObject","indicesByPath","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","accumulateAdditive","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","_controlInterpolantsResultBuffer","AnimationMixer","_initMemoryManager","_accuIndex","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","_bindAction","knownActions","_addInactiveAction","_lendBinding","saveOriginalState","_lendAction","restoreOriginalState","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","__cacheIndex","lastActiveInterpolant","optionalRoot","clipObject","findByName","existingAction","newAction","nActions","_update","timeInSeconds","actionsToRemove","_removeInactiveAction","Uniform","UniformsGroup","isUniformsGroup","uniformsSource","InstancedInterleavedBuffer","GLBufferAttribute","Raycaster","coords","unproject","intersectObject","ascSort","Spherical","other","EPS","setFromCartesianCoords","Cylindrical","_vector$4","Box2","isBox2","_startP","_startEnd","Line3","clampToLine","startEnd2","startEnd_startP","closestPointToPointParameter","_vector$3","SpotLightHelper","cone","coneLength","coneWidth","_vector$2","_boneMatrix","_matrixWorldInv","SkeletonHelper","getBoneList","isSkeletonHelper","boneList","PointLightHelper","sphereSize","_vector$1","_color1","_color2","HemisphereLightHelper","rotateY","GridHelper","PolarGridHelper","radials","circles","_v1","_v2","_v3","DirectionalLightHelper","lightPlane","targetLine","_vector","_camera","CameraHelper","pointMap","addLine","addPoint","colorFrustum","colorCone","colorUp","colorTarget","colorCross","setColors","colorAttribute","setPoint","_box","BoxHelper","setFromObject","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setLength","AxesHelper","xAxisColor","yAxisColor","zAxisColor","ShapePath","subPaths","currentPath","quadraticCurveTo","bezierCurveTo","splineThru","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","tmpHoles","_tables","_generateTables","floatView","uint32View","baseTable","shiftTable","mantissaTable","exponentTable","offsetTable","toHalfFloat","val","fromHalfFloat","DataUtils","ParametricGeometry","TextGeometry","FontLoader","Font","ImmediateRenderObject","WebGLMultisampleRenderTarget","DataTexture2DArray","DataTexture3D","revision","__THREE__","_changeEvent","_startEvent","_endEvent","OrbitControls","touchAction","minDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","UP","BOTTOM","mouseButtons","touches","ONE","TWO","target0","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","getAzimuthalAngle","getDistance","listenToKeyEvents","onKeyDown","saveState","STATE","NONE","quat","setFromUnitVectors","quatInverse","lastPosition","lastQuaternion","twoPI","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","panOffset","setFromSpherical","zoomChanged","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","clientHeight","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","getSecondPointerPosition","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","setPointerCapture","pointerId","addPointer","pointerType","onTouchStart","onMouseDown","onTouchMove","onMouseMove","removePointer","releasePointerCapture","mouseAction","button","ctrlKey","metaKey","shiftKey","trackPointer","pointer","passive","MapControls","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFLightsExtension","GLTFMeshoptCompression","_onError","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","unregister","content","plugins","magic","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","GLTFRegistry","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","refs","uses","_markDefs","nodeDefs","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","dependency","lightDefs","lightDef","lightNode","innerConeAngle","outerConeAngle","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","all","extendMaterialParams","emissiveStrength","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","iridescenceFactor","iridescenceTexture","iridescenceIor","iridescenceThicknessTexture","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmissionTexture","thicknessFactor","thicknessTexture","colorArray","specularFactor","specularTexture","specularColorFactor","specularColorTexture","textureIndex","textureDef","loadTextureImage","isSupported","textureLoader","uri","handler","detectSupport","Image","onload","onerror","loadBufferView","bufferView","bufferViews","extensionDef","getDependency","supported","ready","byteOffset","byteStride","decodeGltfBuffer","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","header","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","decodePrimitive","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","decodeDracoFile","extendTexture","texCoord","GLTFMeshStandardSGMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","glossiness","glossinessMap","_extraUniforms","uniformName","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","GLTFCubicSplineInterpolant","stride2","stride3","td","m0","m1","_q","GLTFCubicSplineQuaternionInterpolant","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","WEBGL_FILTERS","WEBGL_WRAPPINGS","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","createDefaultMaterial","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","addMorphTargets","targets","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","meshDef","targetNames","createPrimitiveKey","primitiveDef","dracoExtension","geometryKey","createAttributesKey","attributesKey","getNormalizedComponentScale","getImageURIMimeType","search","associations","primitiveCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","isFirefox","firefoxVersion","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scenes","afterRoot","skinDefs","skins","meshDefs","meshes","skinLength","skin","ref","updateMappings","original","mappings","entries","_invokeOne","func","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","pendingBufferViews","TypedArray","elementBytes","itemBytes","ibSlice","ibCacheKey","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sourceIndex","sourceDef","sampler","promise","loadImageSource","samplers","URL","webkitURL","sourceURI","isObjectURL","Blob","createObjectURL","revokeObjectURL","mapName","mapDef","gltfReference","assignFinalMaterial","useDerivativeTangents","useVertexColors","useFlatShading","pointsMaterial","lineMaterial","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","originalName","sanitizedName","sanitizeNodeName","loadGeometries","primitives","createDracoPrimitive","addPrimitiveAttributes","geometryPromise","meshIndex","normalizeSkinWeights","toTrianglesDrawMode","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","inputAccessors","outputAccessors","inputAccessor","outputAccessor","targetName","outputArray","scaled","InterpolantFactoryMethodGLTFCubicSpline","interpolantType","createNodeMesh","meshPromise","sceneIndex","sceneDef","nodeIds","buildNodeHierarchy","reduceAssociations","reducedAssociations","nodeId","parentObject","pendingJoints","jointNodes","jointNode","computeBounds","boxScale","maxDisplacement","expandByVector","assignAttributeAccessor","gltfAttributeName","drawMode","numberOfTriangles","newIndices","newGeometry","CopyShader","Pass","needsSwap","renderToScreen","FullScreenQuad","ShaderPass","textureID","fsQuad","writeBuffer","readBuffer","MaskPass","writeValue","clearValue","REPLACE","ALWAYS","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget1","renderTarget2","passes","copyPass","clock","swapBuffers","addPass","insertPass","removePass","isLastEnabledPass","passIndex","maskActive","NOTEQUAL","effectiveWidth","effectiveHeight","RenderPass","_oldClearColor","oldAutoClear","oldClearAlpha","oldOverrideMaterial","FXAAShader","LuminosityHighPassShader","UnrealBloomPass","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","renderTargetHorizonal","renderTargetVertical","highPassShader","highPassUniforms","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomFactors","bloomTintColors","copyShader","copyUniforms","materialCopy","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","_assertThisInitialized","ReferenceError","_inheritsLoose","subClass","superClass","_config","autoSleep","force3D","nullTargetWarn","lineHeight","_defaults","overwrite","_suppressOverwrites","_reverting","_bigNum","_tinyNum","_2PI","_HALF_PI","_gsID","_sqrt","_cos","_sin","_isString","_isFunction","_isNumber","_isUndefined","_isObject","_isNotFalse","_windowExists","_isFuncOrString","_isTypedArray","_isArray","_strictNumExp","_numExp","_numWithUnitExp","_complexStringNumExp","_relExp","_delimitedValueExp","_unitExp","_globalTimeline","_win","_coreInitted","_doc","_globals","_installScope","_coreReady","_install","_merge","gsap","_missingPlugin","_warn","suppress","_addGlobal","_emptyFunc","_startAtRevertConfig","suppressEvents","isStart","_revertConfig","_reservedProps","_lazyTweens","_lazyLookup","_lastRenderedFrame","_plugins","_effects","_nextGCFrame","_harnessPlugins","_callbackNames","_harness","harnessPlugin","_gsap","harness","targetTest","GSCache","_getCache","_getProperty","_forEachName","names","_round","_roundPrecise","_parseRelative","operator","substr","_arrayContainsAny","toSearch","toFind","_lazyRender","tween","_lazy","_lazySafeRender","_numericIfPossible","_passThrough","_setDefaults","defaults","_setKeyframeDefaults","excludeDuration","toMerge","_mergeDeep","_copyExcluding","excluding","_inheritDefaults","vars","keyframes","inherit","_dp","_arraysMatch","_addLinkedListItem","firstProp","lastProp","sortBy","_prev","_removeLinkedListItem","_removeFromParent","onlyIfParentHasAutoRemove","autoRemoveChildren","_act","_uncache","_dur","_dirty","_recacheAncestors","totalDuration","_rewindStartAt","totalTime","_startAt","revert","immediateRender","autoRevert","_hasNoPausedAncestors","_ts","_elapsedCycleDuration","_repeat","_animationCycle","_tTime","_rDelay","tTime","cycleDuration","whole","_parentToChildTotalTime","parentTime","_tDur","_setEnd","_rts","_alignPlayhead","smoothChildTiming","_time","_postAddChecks","timeline","_initted","rawTime","_clamp","_zTime","_addToTimeline","skipChecks","_parsePosition","_delay","_sort","_isFromOrFromStart","_recent","_scrollTrigger","trigger","ScrollTrigger","_attemptInitTween","_initTween","_pt","lazy","_ticker","_parentPlayheadIsBeforeStart","_ref","_lock","_ref2","_renderZeroDurationTween","prevRatio","ratio","repeatDelay","iteration","prevIteration","_yoyo","repeatRefresh","invalidate","_from","_onUpdate","_callback","_prom","_findNextPauseTween","_first","_last","_setDuration","skipUncache","leavePlayhead","dur","totalProgress","_onUpdateTotalDuration","Timeline","_zeroPosition","percentAnimation","labels","recent","clippedDuration","isPercent","_createTweenType","isLegacy","varsIndex","irVars","runBackwards","startAt","Tween","_conditionalReturn","getUnit","_slice","_isArrayLike","nonEmpty","nodeType","_flatten","ar","leaveStrings","accumulator","_accumulator","selector","_wake","querySelectorAll","el","nativeElement","createElement","shuffle","distribute","each","ease","_parseEase","isDecimal","ratios","ratioX","ratioY","distances","originX","originY","wrapAt","getBoundingClientRect","amount","_invertEase","_roundModifier","raw","snap","snapTo","is2D","increment","closest","roundingIncrement","returnFunction","pipe","_len","functions","_key","reduce","unitize","mapRange","_wrapArray","wrapper","wrapYoyo","_replaceRandom","nums","inMin","inMax","outMin","outMax","inRange","outRange","interpolate","progress","mutate","isString","master","interpolators","_addPropTween","_renderPropTweens","_getLabelInDirection","fromTime","backward","executeLazyFirst","prevContext","_ctx","callbackScope","_interrupt","scrollTrigger","kill","_quickTween","_createPlugin","config","isFunc","Plugin","_props","instanceDefaults","_killPropTweensOf","modifier","_addPluginModifier","rawVars","statics","getSetter","_getSetter","aliases","prop","PropTween","_255","_colorLookup","aqua","lime","silver","black","maroon","teal","blue","navy","white","olive","yellow","orange","gray","purple","green","red","pink","cyan","_hue","m2","splitColor","toHSL","forceAlpha","wasHSL","_colorOrderData","_colorExp","_formatColors","orderMatchData","shell","_hslExp","_colorStringFilter","combined","_tickerActive","_getTime","_lagThreshold","_adjustedLag","_lastUpdate","_gap","_nextTime","_req","_raf","_self","_delta","_i","_tick","elapsed","manual","overlap","dispatch","tick","deltaRatio","wake","gsapVersions","GreenSockGlobals","sleep","clearTimeout","lagSmoothing","adjustedLag","_fps","once","prioritize","_easeMap","_customEaseExp","_quotesExp","_parseObjectInString","parsedVal","_valueInParentheses","open","nested","_configEaseFromString","_CE","_propagateYoyoEase","isYoyo","yoyoEase","_ease","_yEase","defaultEase","_insertEase","easeIn","easeOut","easeInOut","lowercaseName","_easeInOutFromOut","_configElastic","amplitude","period","_configBack","overshoot","Linear","easeNone","none","n1","n3","SteppedEase","immediateStart","Animation","yoyo","_proto","_totalTime","_ptLookup","_pTime","_ps","includeRepeats","wrapRepeats","prevIsReverting","globalTime","restart","includeDelay","reversed","pause","atTime","resume","isActive","eventCallback","onFulfilled","_resolve","_then","_Animation","sortChildren","_proto2","fromTo","fromVars","toVars","delayedCall","staggerTo","stagger","onCompleteAll","onCompleteAllParams","onComplete","onCompleteParams","staggerFrom","staggerFromTo","tDur","crossingStart","prevPaused","pauseTween","prevStart","rewinding","doesWrap","onRepeat","_hasPause","_forcing","adjustedTime","_this2","addLabel","getChildren","tweens","timelines","ignoreBeforeTime","getById","removeLabel","killTweensOf","_totalTime2","addPause","removePause","onlyActive","getTweensOf","_overwritingTween","parsedTargets","isGlobalTime","_targets","tweenTo","tl","_vars","_onStart","onStartParams","initted","tweenFromTo","fromPosition","toPosition","nextLabel","afterTime","previousLabel","beforeTime","currentLabel","shiftChildren","adjustLabels","includeLabels","updateRoot","_addComplexStringPropTween","setter","stringFilter","funcParam","_renderComplexString","matchIndex","startNums","endNum","chunk","startNum","hasRandom","fp","optional","parsedStart","_setterPlain","_setterFuncWithParam","_setterFunc","_forceAllPropTweens","_renderBoolean","_renderPlain","_processVars","_parseFuncOrString","_checkPlugin","ptLookup","priority","onUpdateParams","prevStartAt","fullTargets","autoOverwrite","_overwrite","cleanVars","hasPriority","gsData","harnessVars","overwritten","_ptCache","_op","_sortPropTweensByPriority","_onInit","_updatePropTweens","startIsRelative","ptCache","rootPT","lookup","_addAliasesToVars","propertyAliases","_parseKeyframe","allProps","easeEach","_staggerTweenProps","_staggerPropsToSkip","_Animation2","skipInherit","_this3","_this3$vars","curTarget","staggerFunc","staggerVarsToMerge","kf","_proto3","isNegative","resetTo","killingTargets","propTweenLookup","firstPT","overwrittenProps","curLookup","curOverwriteProps","onReverseComplete","onReverseCompleteParams","_setterAttribute","hasNonDependentRemaining","op","dep","_setterWithModifier","mSet","mt","first","pr","change","_proto4","TweenMax","TweenLite","TimelineLite","TimelineMax","_media","_emptyArray","_lastMediaTime","_dispatch","_onMediaChange","queries","conditions","anyMatch","toggled","matchMedia","onMatch","_r","isReverted","_proto5","prevSelector","ignore","getTweens","_this4","MatchMedia","contexts","_proto6","cond","mq","active","addListener","registerPlugin","_len2","_key2","getProperty","uncache","getter","quickSetter","setters","quickTo","_merge2","isTweening","registerEffect","_ref3","effect","extendTimeline","pluginName","registerEase","parseEase","exportRoot","includeDelayedCalls","matchMediaRefresh","found","install","effects","ticker","globalTimeline","core","globals","getCache","reverting","toAdd","suppressOverwrites","_getPluginPropTween","_addModifiers","modifiers","_buildModifierPlugin","temp","Power0","Power1","Power2","Power3","Power4","Quad","Cubic","Quart","Quint","Strong","Elastic","Back","Bounce","Sine","Expo","Circ","_docElement","_pluginInitted","_tempDiv","_tempDivStyler","_recentSetterPlugin","_transformProps","_RAD2DEG","_DEG2RAD","_atan2","_capsExp","_horizontalExp","_complexExp","_propertyAliases","autoAlpha","_renderCSSProp","_renderPropWithEnd","_renderCSSPropWithBeginning","_renderRoundedCSSProp","_renderNonTweeningValue","_renderNonTweeningValueOnlyAtEnd","_setterCSSStyle","_setterCSSProp","setProperty","_setterTransform","_setterScale","_setterScaleWithRender","renderTransform","_setterTransformWithRender","_transformProp","_transformOriginProp","_saveStyle","tfm","_get","svg","svgo","_removeIndependentTransforms","removeProperty","_revertStyle","_getStyleSaver","saver","save","_supports3D","_createElement","ns","_getComputedProperty","skipPrefixFallback","getComputedStyle","getPropertyValue","_checkPropPrefix","_prefixes","preferPrefix","_initCore","documentElement","cssText","_getBBoxHack","swapIfPossible","ownerSVGElement","oldParent","parentNode","oldSibling","nextSibling","oldCSS","bbox","appendChild","getBBox","_gsapBBox","insertBefore","removeChild","_getAttributeFallbacks","attributesArray","_getBBox","bounds","_isSVG","getCTM","_removeProperty","removeAttribute","_addNonTweeningPT","beginning","onlySetAtEnd","_nonConvertibleUnits","deg","rad","turn","_nonStandardLayouts","flex","_convertToUnit","curValue","curUnit","horizontal","isRootSVG","tagName","measureProperty","toPixels","toPercent","isSVG","_parseTransform","_firstTwoOnly","zOrigin","_specialProps","_tweenComplexCSSString","startValues","startValue","endValue","endUnit","startUnit","endValues","_keywordToPercent","_convertKeywordsToPercentages","_renderClearProps","clearTransforms","clearProps","_identity2DMatrix","_rotationalProperties","_isNullTransform","_getComputedTransformMatrixAsArray","matrixString","_getMatrix","force2D","addedToDOM","baseVal","consolidate","offsetParent","nextElementSibling","_applySVGOrigin","originIsAbsolute","smooth","matrixArray","pluginToAddPropTweensTo","xOriginOld","xOrigin","yOriginOld","yOrigin","xOffsetOld","yOffsetOld","yOffset","originSplit","invertedScaleX","rotationX","rotationY","skewX","skewY","perspective","rotate","forceCSS","xPercent","offsetWidth","yPercent","offsetHeight","transformPerspective","_renderSVGTransforms","_renderCSSTransforms","_renderNon3DTransforms","_addPxTranslate","_zeroDeg","_zeroPx","_endParenthesis","transforms","use3D","_addRotationalPropTween","cap","finalValue","_assign","_addRawTransformPTs","startCache","exclude","endCache","CSSPlugin","specialProp","relative","isTransformRelated","transformPropTween","inlineProps","styles","visibility","parseTransform","smoothOrigin","autoRound","checkPrefix","getStyleSaver","positionAndScale","others","gsapWithCSS","TweenMaxWithCSS","MetalMaterial","PipesMaterial","LightsMaterial","HoloMaterial","u_Progress1","u_Progress2","u_Progress3","u_TransitionSmoothness","u_Color","u_Time","u_FresnelFalloff","t_AlphaMap","NeonMaterial","ScreenMaterial","u_Opacity","FloorMaterial","u_SpotlightRadius","u_SpotlightBlur","t_aoMap","u_aoMapIntensity","Debugger","app","pane","refresh","Pane","querySelector","folder","addFolder","title","holoAnimation","addInput","on","addButton","expanded","bloomPass","fxaaPass","getObjectByName","border","screen","screenColor","baseColor255","App","Holo_Alpha","Floor_AO","debugger","controls","holo","composer","devicePixelRatio","renderPass","loadingManager","gltfLoader","promises","loadHolegram","translateY","Base_AO","defaultPosY","signScreen","loadFish","fishMaterials","fish","light2","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","deps","some"],"mappings":"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T,YAAY;MAAE74C,KAAK,EAAE;IAAT,CAFH;IAGT,cAAc;MAAEA,KAAK,EAAE,IAAI6a,cAAJ,CAAa,IAAI,IAAjB,EAAuB,IAAI,GAA3B;IAAT;EAHL,CAFQ;EASlB2+B,YAAY;EAAE;EAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAlBmB;EAoBlBC,cAAc,EAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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AtB;;;;;ACFP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}\n\nmodule.exports = _classApplyDescriptorGet, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}\n\nmodule.exports = _classExtractFieldDescriptor, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var classApplyDescriptorGet = require(\"./classApplyDescriptorGet.js\");\n\nvar classExtractFieldDescriptor = require(\"./classExtractFieldDescriptor.js\");\n\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n\nmodule.exports = _classPrivateFieldGet, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/**\n * @license\n * Copyright 2010-2022 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\nconst REVISION = '143';\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst FlatShading = 1;\nconst SmoothShading = 2;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nconst NoColorSpace = '';\nconst SRGBColorSpace = 'srgb';\nconst LinearSRGBColorSpace = 'srgb-linear';\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\nconst GLSL1 = '100';\nconst GLSL3 = '300 es';\n\nconst _SRGBAFormat = 1035; // fallback for WebGL 1\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nclass EventDispatcher {\n\n\taddEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\thasEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\tremoveEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}\n\nconst _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize$1( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nvar MathUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize$1\n});\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nfunction arrayNeedsUint32( array ) {\n\n\t// assumes larger values usually on last\n\n\tfor ( let i = array.length - 1; i >= 0; -- i ) {\n\n\t\tif ( array[ i ] > 65535 ) return true;\n\n\t}\n\n\treturn false;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nfunction createElementNS( name ) {\n\n\treturn document.createElementNS( 'http://www.w3.org/1999/xhtml', name );\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\n// JavaScript RGB-to-RGB transforms, defined as\n// FN[InputColorSpace][OutputColorSpace] callback functions.\nconst FN = {\n\t[ SRGBColorSpace ]: { [ LinearSRGBColorSpace ]: SRGBToLinear },\n\t[ LinearSRGBColorSpace ]: { [ SRGBColorSpace ]: LinearToSRGB },\n};\n\nconst ColorManagement = {\n\n\tlegacyMode: true,\n\n\tget workingColorSpace() {\n\n\t\treturn LinearSRGBColorSpace;\n\n\t},\n\n\tset workingColorSpace( colorSpace ) {\n\n\t\tconsole.warn( 'THREE.ColorManagement: .workingColorSpace is readonly.' );\n\n\t},\n\n\tconvert: function ( color, sourceColorSpace, targetColorSpace ) {\n\n\t\tif ( this.legacyMode || sourceColorSpace === targetColorSpace || ! sourceColorSpace || ! targetColorSpace ) {\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tif ( FN[ sourceColorSpace ] && FN[ sourceColorSpace ][ targetColorSpace ] !== undefined ) {\n\n\t\t\tconst fn = FN[ sourceColorSpace ][ targetColorSpace ];\n\n\t\t\tcolor.r = fn( color.r );\n\t\t\tcolor.g = fn( color.g );\n\t\t\tcolor.b = fn( color.b );\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tthrow new Error( 'Unsupported color space conversion.' );\n\n\t},\n\n\tfromWorkingColorSpace: function ( color, targetColorSpace ) {\n\n\t\treturn this.convert( color, this.workingColorSpace, targetColorSpace );\n\n\t},\n\n\ttoWorkingColorSpace: function ( color, sourceColorSpace ) {\n\n\t\treturn this.convert( color, sourceColorSpace, this.workingColorSpace );\n\n\t},\n\n};\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _rgb = { r: 0, g: 0, b: 0 };\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction toComponents( source, target ) {\n\n\ttarget.r = source.r;\n\ttarget.g = source.g;\n\ttarget.b = source.b;\n\n\treturn target;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tthis.isColor = true;\n\n\t\tthis.r = 1;\n\t\tthis.g = 1;\n\t\tthis.b = 1;\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex, colorSpace = SRGBColorSpace ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b, colorSpace = LinearSRGBColorSpace ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l, colorSpace = LinearSRGBColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = euclideanModulo( h, 1 );\n\t\ts = clamp( s, 0, 1 );\n\t\tl = clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style, colorSpace = SRGBColorSpace ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l, colorSpace );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style, colorSpace );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style, colorSpace = SRGBColorSpace ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex, colorSpace );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\treturn clamp( _rgb.r * 255, 0, 255 ) << 16 ^ clamp( _rgb.g * 255, 0, 255 ) << 8 ^ clamp( _rgb.b * 255, 0, 255 ) << 0;\n\n\t}\n\n\tgetHexString( colorSpace = SRGBColorSpace ) {\n\n\t\treturn ( '000000' + this.getHex( colorSpace ).toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target, colorSpace = LinearSRGBColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\tconst r = _rgb.r, g = _rgb.g, b = _rgb.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetRGB( target, colorSpace = LinearSRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\ttarget.r = _rgb.r;\n\t\ttarget.g = _rgb.g;\n\t\ttarget.b = _rgb.b;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( toComponents( this, _rgb ), colorSpace );\n\n\t\tif ( colorSpace !== SRGBColorSpace ) {\n\n\t\t\t// Requires CSS Color Module Level 4 (https://www.w3.org/TR/css-color-4/).\n\t\t\treturn `color(${ colorSpace } ${ _rgb.r } ${ _rgb.g } ${ _rgb.b })`;\n\n\t\t}\n\n\t\treturn `rgb(${( _rgb.r * 255 ) | 0},${( _rgb.g * 255 ) | 0},${( _rgb.b * 255 ) | 0})`;\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.r;\n\t\tyield this.g;\n\t\tyield this.b;\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nlet textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding ) {\n\n\t\tsuper();\n\n\t\tthis.isTexture = true;\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.source = new Source( image );\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t\tthis.isRenderTargetTexture = false; // indicates whether a texture belongs to a render target or not\n\t\tthis.needsPMREMUpdate = false; // indicates whether this texture should be processed by PMREMGenerator or not (only relevant for render target textures)\n\n\t}\n\n\tget image() {\n\n\t\treturn this.source.data;\n\n\t}\n\n\tset image( value ) {\n\n\t\tthis.source.data = value;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.source = source.source;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\timage: this.source.toJSON( meta ).uuid,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) output.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.version ++;\n\t\t\tthis.source.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = null;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width, height, options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isWebGLRenderTarget = true;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\tconst image = { width: width, height: height, depth: 1 };\n\n\t\tthis.texture = new Texture( image, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.flipY = false;\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.internalFormat = options.internalFormat !== undefined ? options.internalFormat : null;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t\tthis.samples = options.samples !== undefined ? options.samples : 0;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\t// ensure image object is not shared, see #20328\n\n\t\tconst image = Object.assign( {}, source.texture.image );\n\t\tthis.texture.source = new Source( image );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass DataArrayTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.isDataArrayTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGLArrayRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, depth ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGLArrayRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new DataArrayTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass Data3DTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.isData3DTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGL3DRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, depth ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGL3DRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new Data3DTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass WebGLMultipleRenderTargets extends WebGLRenderTarget {\n\n\tconstructor( width, height, count, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLMultipleRenderTargets = true;\n\n\t\tconst texture = this.texture;\n\n\t\tthis.texture = [];\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.texture[ i ] = texture.clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tfor ( let i = 0, il = this.texture.length; i < il; i ++ ) {\n\n\t\t\t\tthis.texture[ i ].image.width = width;\n\t\t\t\tthis.texture[ i ].image.height = height;\n\t\t\t\tthis.texture[ i ].image.depth = depth;\n\n\t\t\t}\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.dispose();\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.set( 0, 0, this.width, this.height );\n\t\tthis.scissor.set( 0, 0, this.width, this.height );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.texture.length = 0;\n\n\t\tfor ( let i = 0, il = source.texture.length; i < il; i ++ ) {\n\n\t\t\tthis.texture[ i ] = source.texture[ i ].clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector$c.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector$c );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector$c.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector$c = /*@__PURE__*/ new Vector3();\nconst _quaternion$4 = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox3 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$b.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object, precise = false ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object, precise );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object, precise = false ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( precise && geometry.attributes != undefined && geometry.attributes.position !== undefined ) {\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tfor ( let i = 0, l = position.count; i < l; i ++ ) {\n\n\t\t\t\t\t_vector$b.fromBufferAttribute( position, i ).applyMatrix4( object.matrixWorld );\n\t\t\t\t\tthis.expandByPoint( _vector$b );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t\t}\n\n\t\t\t\t_box$3.copy( geometry.boundingBox );\n\t\t\t\t_box$3.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tthis.union( _box$3 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ], precise );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$b );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$b.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0$2.subVectors( triangle.a, _center );\n\t\t_v1$7.subVectors( triangle.b, _center );\n\t\t_v2$3.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$7, _v0$2 );\n\t\t_f1.subVectors( _v2$3, _v1$7 );\n\t\t_f2.subVectors( _v0$2, _v2$3 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0$2, _v1$7, _v2$3, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$b.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$b ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$b = /*@__PURE__*/ new Vector3();\n\nconst _box$3 = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0$2 = /*@__PURE__*/ new Vector3();\nconst _v1$7 = /*@__PURE__*/ new Vector3();\nconst _v2$3 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the separating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the separating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is separating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$2 = /*@__PURE__*/ new Box3();\nconst _v1$6 = /*@__PURE__*/ new Vector3();\nconst _toFarthestPoint = /*@__PURE__*/ new Vector3();\nconst _toPoint = /*@__PURE__*/ new Vector3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$2.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\t// from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L649-L671\n\n\t\t_toPoint.subVectors( point, this.center );\n\n\t\tconst lengthSq = _toPoint.lengthSq();\n\n\t\tif ( lengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tconst length = Math.sqrt( lengthSq );\n\t\t\tconst missingRadiusHalf = ( length - this.radius ) * 0.5;\n\n\t\t\t// Nudge this sphere towards the target point. Add half the missing distance to radius,\n\t\t\t// and the other half to position. This gives a tighter enclosure, instead of if\n\t\t\t// the whole missing distance were just added to radius.\n\n\t\t\tthis.center.add( _toPoint.multiplyScalar( missingRadiusHalf / length ) );\n\t\t\tthis.radius += missingRadiusHalf;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunion( sphere ) {\n\n\t\t// from https://github.com/juj/MathGeoLib/blob/2940b99b99cfe575dd45103ef20f4019dee15b54/src/Geometry/Sphere.cpp#L759-L769\n\n\t\t// To enclose another sphere into this sphere, we only need to enclose two points:\n\t\t// 1) Enclose the farthest point on the other sphere into this sphere.\n\t\t// 2) Enclose the opposite point of the farthest point into this sphere.\n\n\t\t if ( this.center.equals( sphere.center ) === true ) {\n\n\t\t\t _toFarthestPoint.set( 0, 0, 1 ).multiplyScalar( sphere.radius );\n\n\n\t\t} else {\n\n\t\t\t_toFarthestPoint.subVectors( sphere.center, this.center ).normalize().multiplyScalar( sphere.radius );\n\n\t\t}\n\n\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).add( _toFarthestPoint ) );\n\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).sub( _toFarthestPoint ) );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal$1 = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$a ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$a.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$a.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$a.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$a.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$a.dot( this.direction );\n\t\tconst d2 = _vector$a.dot( _vector$a ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$a ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal$1.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal$1 );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal$1 );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$5.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$5.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$5.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$5.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$5.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$5.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1$2.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1$2.elements[ 0 ] *= invSX;\n\t\t_m1$2.elements[ 1 ] *= invSX;\n\t\t_m1$2.elements[ 2 ] *= invSX;\n\n\t\t_m1$2.elements[ 4 ] *= invSY;\n\t\t_m1$2.elements[ 5 ] *= invSY;\n\t\t_m1$2.elements[ 6 ] *= invSY;\n\n\t\t_m1$2.elements[ 8 ] *= invSZ;\n\t\t_m1$2.elements[ 9 ] *= invSZ;\n\t\t_m1$2.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1$2 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$5 = /*@__PURE__*/ new Vector3();\nconst _m1$2 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix$1 = /*@__PURE__*/ new Matrix4();\nconst _quaternion$3 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis.isEuler = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix$1.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix$1, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$3.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$3, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._order;\n\n\t}\n\n\t// @deprecated since r138, 02cf0df1cb4575d5842fef9c85bb5a89fe020d53\n\n\ttoVector3() {\n\n\t\tconsole.error( 'THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead' );\n\n\t}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = ( 1 << channel | 0 ) >>> 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n\tisEnabled( channel ) {\n\n\t\treturn ( this.mask & ( 1 << channel | 0 ) ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _q1 = /*@__PURE__*/ new Quaternion();\nconst _m1$1 = /*@__PURE__*/ new Matrix4();\nconst _target = /*@__PURE__*/ new Vector3();\n\nconst _position$3 = /*@__PURE__*/ new Vector3();\nconst _scale$2 = /*@__PURE__*/ new Vector3();\nconst _quaternion$2 = /*@__PURE__*/ new Quaternion();\n\nconst _xAxis = /*@__PURE__*/ new Vector3( 1, 0, 0 );\nconst _yAxis = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nconst _zAxis = /*@__PURE__*/ new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Object3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DefaultUp.clone();\n\n\t\tconst position = new Vector3();\n\t\tconst rotation = new Euler();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation._onChange( onRotationChange );\n\t\tquaternion._onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.animations = [];\n\n\t\tthis.userData = {};\n\n\t}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$4.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$4.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position$3.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position$3, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position$3, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, target, _scale$2 );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$2, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\traycast( /* raycaster, intersects */ ) {}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\t\t\tif ( this.instanceColor !== null ) object.instanceColor = this.instanceColor.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isScene ) {\n\n\t\t\tif ( this.background ) {\n\n\t\t\t\tif ( this.background.isColor ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON();\n\n\t\t\t\t} else if ( this.background.isTexture ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON( meta ).uuid;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true ) {\n\n\t\t\t\tobject.environment = this.environment.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t} else if ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\t\t\tif ( nodes.length > 0 ) output.nodes = nodes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t}\n\n\tclone( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t}\n\n\tcopy( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nObject3D.DefaultUp = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\nconst _v3$1 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$2.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$2 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3$1 );\n\n\t\treturn ( _v3$1.x >= 0 ) && ( _v3$1.y >= 0 ) && ( ( _v3$1.x + _v3$1.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3$1 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3$1.x );\n\t\ttarget.addScaledVector( uv2, _v3$1.y );\n\t\ttarget.addScaledVector( uv3, _v3$1.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAttributeAndIndices( attribute, i0, i1, i2 ) {\n\n\t\tthis.a.fromBufferAttribute( attribute, i0 );\n\t\tthis.b.fromBufferAttribute( attribute, i1 );\n\t\tthis.c.fromBufferAttribute( attribute, i2 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nlet materialId = 0;\n\nclass Material extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isMaterial = true;\n\n\t\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.vertexColors = false;\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.stencilWriteMask = 0xff;\n\t\tthis.stencilFunc = AlwaysStencilFunc;\n\t\tthis.stencilRef = 0;\n\t\tthis.stencilFuncMask = 0xff;\n\t\tthis.stencilFail = KeepStencilOp;\n\t\tthis.stencilZFail = KeepStencilOp;\n\t\tthis.stencilZPass = KeepStencilOp;\n\t\tthis.stencilWrite = false;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.shadowSide = null;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaToCoverage = false;\n\t\tthis.premultipliedAlpha = false;\n\n\t\tthis.visible = true;\n\n\t\tthis.toneMapped = true;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\n\t\tthis._alphaTest = 0;\n\n\t}\n\n\tget alphaTest() {\n\n\t\treturn this._alphaTest;\n\n\t}\n\n\tset alphaTest( value ) {\n\n\t\tif ( this._alphaTest > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._alphaTest = value;\n\n\t}\n\n\tonBuild( /* shaderobject, renderer */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, object, group */ ) {}\n\n\tonBeforeCompile( /* shaderobject, renderer */ ) {}\n\n\tcustomProgramCacheKey() {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t}\n\n\tsetValues( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatibility if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen !== undefined ) data.sheen = this.sheen;\n\t\tif ( this.sheenColor && this.sheenColor.isColor ) data.sheenColor = this.sheenColor.getHex();\n\t\tif ( this.sheenRoughness !== undefined ) data.sheenRoughness = this.sheenRoughness;\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.specularIntensity !== undefined ) data.specularIntensity = this.specularIntensity;\n\t\tif ( this.specularColor && this.specularColor.isColor ) data.specularColor = this.specularColor.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.iridescence !== undefined ) data.iridescence = this.iridescence;\n\t\tif ( this.iridescenceIOR !== undefined ) data.iridescenceIOR = this.iridescenceIOR;\n\t\tif ( this.iridescenceThicknessRange !== undefined ) data.iridescenceThicknessRange = this.iridescenceThicknessRange;\n\n\t\tif ( this.iridescenceMap && this.iridescenceMap.isTexture ) {\n\n\t\t\tdata.iridescenceMap = this.iridescenceMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture ) {\n\n\t\t\tdata.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\t\tif ( this.specularIntensityMap && this.specularIntensityMap.isTexture ) data.specularIntensityMap = this.specularIntensityMap.toJSON( meta ).uuid;\n\t\tif ( this.specularColorMap && this.specularColorMap.isTexture ) data.specularColorMap = this.specularColorMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\n\t\t}\n\n\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\t\tif ( this.reflectivity !== undefined ) data.reflectivity = this.reflectivity;\n\t\tif ( this.refractionRatio !== undefined ) data.refractionRatio = this.refractionRatio;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.transmission !== undefined ) data.transmission = this.transmission;\n\t\tif ( this.transmissionMap && this.transmissionMap.isTexture ) data.transmissionMap = this.transmissionMap.toJSON( meta ).uuid;\n\t\tif ( this.thickness !== undefined ) data.thickness = this.thickness;\n\t\tif ( this.thicknessMap && this.thicknessMap.isTexture ) data.thicknessMap = this.thicknessMap.toJSON( meta ).uuid;\n\t\tif ( this.attenuationDistance !== undefined ) data.attenuationDistance = this.attenuationDistance;\n\t\tif ( this.attenuationColor !== undefined ) data.attenuationColor = this.attenuationColor.getHex();\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.shadowSide !== null ) data.shadowSide = this.shadowSide;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\t\tdata.colorWrite = this.colorWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== undefined && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth !== undefined && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.alphaToCoverage === true ) data.alphaToCoverage = this.alphaToCoverage;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( this.fog === false ) data.fog = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.alphaToCoverage = source.alphaToCoverage;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshBasicMaterial = true;\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _vector2$1 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.isBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized === true;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tcopyColorsArray( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector2sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector3sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector4sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$9.fromBufferAttribute( this, i );\n\t\t\t\t_vector$9.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$9.fromBufferAttribute( this, i );\n\n\t\t\t_vector$9.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.from( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\t\tif ( this.updateRange.offset !== 0 || this.updateRange.count !== - 1 ) data.updateRange = this.updateRange;\n\n\t\treturn data;\n\n\t}\n\n}\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t\tthis.isFloat16BufferAttribute = true;\n\n\t}\n\n}\n\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nlet _id$1 = 0;\n\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _obj = /*@__PURE__*/ new Object3D();\nconst _offset = /*@__PURE__*/ new Vector3();\nconst _box$1 = /*@__PURE__*/ new Box3();\nconst _boxMorphTargets = /*@__PURE__*/ new Box3();\nconst _vector$8 = /*@__PURE__*/ new Vector3();\n\nclass BufferGeometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBufferGeometry = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id$1 ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\t\tthis.morphTargetsRelative = false;\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t\tthis.userData = {};\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayNeedsUint32( index ) ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetAttribute( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t}\n\n\tsetAttribute( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t}\n\n\tdeleteAttribute( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t}\n\n\thasAttribute( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t}\n\n\taddGroup( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t}\n\n\tclearGroups() {\n\n\t\tthis.groups = [];\n\n\t}\n\n\tsetDrawRange( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t_m1.makeRotationFromQuaternion( q );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$1.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.min, _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( this.boundingBox.max, _box$1.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$1.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t\t_vector$8.addVectors( _box$1.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$8 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$1.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$8.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$8.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$8.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$8 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( this.hasAttribute( 'tangent' ) === false ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = this.getAttribute( 'tangent' ).array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals() {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tmerge( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tnormalizeNormals() {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$8.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t}\n\n\ttoNonIndexed() {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\tindex = indices[ i ] * attribute.data.stride + attribute.offset;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tdata.data.attributes[ key ] = attribute.toJSON( data.data );\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tarray.push( attribute.toJSON( data.data ) );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\t return new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\t// geometry generator parameters\n\n\t\tif ( source.parameters !== undefined ) this.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nconst _inverseMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _ray$2 = /*@__PURE__*/ new Ray();\nconst _sphere$3 = /*@__PURE__*/ new Sphere();\n\nconst _vA$1 = /*@__PURE__*/ new Vector3();\nconst _vB$1 = /*@__PURE__*/ new Vector3();\nconst _vC$1 = /*@__PURE__*/ new Vector3();\n\nconst _tempA = /*@__PURE__*/ new Vector3();\nconst _tempB = /*@__PURE__*/ new Vector3();\nconst _tempC = /*@__PURE__*/ new Vector3();\n\nconst _morphA = /*@__PURE__*/ new Vector3();\nconst _morphB = /*@__PURE__*/ new Vector3();\nconst _morphC = /*@__PURE__*/ new Vector3();\n\nconst _uvA$1 = /*@__PURE__*/ new Vector2();\nconst _uvB$1 = /*@__PURE__*/ new Vector2();\nconst _uvC$1 = /*@__PURE__*/ new Vector2();\n\nconst _intersectionPoint = /*@__PURE__*/ new Vector3();\nconst _intersectionPointWorld = /*@__PURE__*/ new Vector3();\n\nclass Mesh extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isMesh = true;\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray$2.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tconst index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\tconst uv = geometry.attributes.uv;\n\t\tconst uv2 = geometry.attributes.uv2;\n\t\tconst groups = geometry.groups;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\tif ( index !== null ) {\n\n\t\t\t// indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\t// non-indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = i;\n\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray$2, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA$1.fromBufferAttribute( position, a );\n\t_vB$1.fromBufferAttribute( position, b );\n\t_vC$1.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA$1 ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB$1 ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC$1 ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA$1.add( _morphA );\n\t\t_vB$1.add( _morphB );\n\t\t_vC$1.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA$1 );\n\t\tobject.boneTransform( b, _vB$1 );\n\t\tobject.boneTransform( c, _vC$1 );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv2, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv2, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA$1, _vB$1, _vC$1, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new BoxGeometry( data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments );\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\nfunction cloneUniformsGroups( src ) {\n\n\tconst dst = [];\n\n\tfor ( let u = 0; u < src.length; u ++ ) {\n\n\t\tdst.push( src[ u ].clone() );\n\n\t}\n\n\treturn dst;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\nclass ShaderMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShaderMaterial = true;\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\t\tthis.uniformsGroups = [];\n\n\t\tthis.vertexShader = default_vertex;\n\t\tthis.fragmentShader = default_fragment;\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv2': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\t\tthis.uniformsNeedUpdate = false;\n\n\t\tthis.glslVersion = null;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = cloneUniforms( source.uniforms );\n\t\tthis.uniformsGroups = cloneUniformsGroups( source.uniformsGroups );\n\n\t\tthis.defines = Object.assign( {}, source.defines );\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.extensions = Object.assign( {}, source.extensions );\n\n\t\tthis.glslVersion = source.glslVersion;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.glslVersion = this.glslVersion;\n\t\tdata.uniforms = {};\n\n\t\tfor ( const name in this.uniforms ) {\n\n\t\t\tconst uniform = this.uniforms[ name ];\n\t\t\tconst value = uniform.value;\n\n\t\t\tif ( value && value.isTexture ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 't',\n\t\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isColor ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'c',\n\t\t\t\t\tvalue: value.getHex()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v2',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\n\t\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\tconst extensions = {};\n\n\t\tfor ( const key in this.extensions ) {\n\n\t\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t\t}\n\n\t\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass Camera extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isCamera = true;\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\n\t\tthis.projectionMatrix = new Matrix4();\n\t\tthis.projectionMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tsuper.updateWorldMatrix( updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass PerspectiveCamera extends Camera {\n\n\tconstructor( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isPerspectiveCamera = true;\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength() {\n\n\t\tconst vExtentSlope = Math.tan( DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t}\n\n\tgetEffectiveFOV() {\n\n\t\treturn RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t}\n\n\tgetFilmWidth() {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t}\n\n\tgetFilmHeight() {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t}\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst fov = 90, aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tcameraPY.up.set( 0, 0, 1 );\n\t\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst renderTarget = this.renderTarget;\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst currentToneMapping = renderer.toneMapping;\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.toneMapping = currentToneMapping;\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t\trenderTarget.texture.needsPMREMUpdate = true;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size, options = {} ) {\n\n\t\tsuper( size, size, options );\n\n\t\tthis.isWebGLCubeRenderTarget = true;\n\n\t\tconst image = { width: size, height: size, depth: 1 };\n\t\tconst images = [ image, image, image, image, image, image ];\n\n\t\tthis.texture = new CubeTexture( images, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n\t\t// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\tthis.isPlane = true;\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _sphere$2 = /*@__PURE__*/ new Sphere();\nconst _vector$7 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$2.center.set( 0, 0, 0 );\n\t\t_sphere$2.radius = 0.7071067811865476;\n\t\t_sphere$2.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$2 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$7.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$7.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$7.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$7 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = 5131;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = 5123;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else if ( array instanceof Uint8ClampedArray ) {\n\n\t\t\ttype = 5121;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.WebGLAttributes: Unsupported buffer data format: ' + array );\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PlaneGeometry( data.width, data.height, data.widthSegments, data.heightSegments );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\";\n\nvar alphatest_pars_fragment = \"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( V * D );\\n}\\n#ifdef USE_IRIDESCENCE\\n\\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\";\n\nvar iridescence_fragment = \"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\t return vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat R21 = R12;\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos.xyz );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos.xyz );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat luminance( const in vec3 rgb ) {\\n\\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\\n\\treturn dot( weights, rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"vec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#else\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\t#ifdef SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\\n\\t#endif\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\\n\\t#else\\n\\t\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef USE_CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometry.normal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphcolor_vertex = \"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform ivec2 morphTargetsTextureSize;\\n\\t\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normal_pars_fragment = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_pars_vertex = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_vertex = \"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar iridescence_pars_fragment = \"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\";\n\nvar output_fragment = \"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= transmissionAlpha + 0.1;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tuniform int boneTextureSize;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tfloat j = i * 4.0;\\n\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\ty = dy * ( y + 0.5 );\\n\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\treturn bone;\\n\\t}\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tfloat transmissionAlpha = 1.0;\\n\\tfloat transmissionFactor = transmission;\\n\\tfloat thicknessFactor = thickness;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmission = getIBLVolumeRefraction(\\n\\t\\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\\n\\t\\tattenuationColor, attenuationDistance );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\\n\\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\\n#endif\";\n\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\t#ifdef texture2DLodEXT\\n\\t\\t\\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( attenuationDistance == 0.0 ) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\\n\\t}\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nconst vertex$g = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nconst fragment$g = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tgl_FragColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\\n\\t#endif\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$f = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$f = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$e = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nconst fragment$e = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nconst vertex$d = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nconst fragment$d = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nconst vertex$c = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nconst fragment$c = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nconst vertex$b = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$b = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$a = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$a = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$9 = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$9 = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$8 = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nconst fragment$8 = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$7 = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$7 = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\";\n\nconst vertex$6 = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$6 = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$5 = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$5 = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$4 = \"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$4 = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$3 = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$3 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$2 = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$2 = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst vertex$1 = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$1 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\talphatest_pars_fragment: alphatest_pars_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tiridescence_fragment: iridescence_fragment,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphcolor_vertex: morphcolor_vertex,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormal_pars_fragment: normal_pars_fragment,\n\tnormal_pars_vertex: normal_pars_vertex,\n\tnormal_vertex: normal_vertex,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tiridescence_pars_fragment: iridescence_pars_fragment,\n\toutput_fragment: output_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmission_fragment: transmission_fragment,\n\ttransmission_pars_fragment: transmission_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_vert: vertex$g,\n\tbackground_frag: fragment$g,\n\tcube_vert: vertex$f,\n\tcube_frag: fragment$f,\n\tdepth_vert: vertex$e,\n\tdepth_frag: fragment$e,\n\tdistanceRGBA_vert: vertex$d,\n\tdistanceRGBA_frag: fragment$d,\n\tequirect_vert: vertex$c,\n\tequirect_frag: fragment$c,\n\tlinedashed_vert: vertex$b,\n\tlinedashed_frag: fragment$b,\n\tmeshbasic_vert: vertex$a,\n\tmeshbasic_frag: fragment$a,\n\tmeshlambert_vert: vertex$9,\n\tmeshlambert_frag: fragment$9,\n\tmeshmatcap_vert: vertex$8,\n\tmeshmatcap_frag: fragment$8,\n\tmeshnormal_vert: vertex$7,\n\tmeshnormal_frag: fragment$7,\n\tmeshphong_vert: vertex$6,\n\tmeshphong_frag: fragment$6,\n\tmeshphysical_vert: vertex$5,\n\tmeshphysical_frag: fragment$5,\n\tmeshtoon_vert: vertex$4,\n\tmeshtoon_frag: fragment$4,\n\tpoints_vert: vertex$3,\n\tpoints_frag: fragment$3,\n\tshadow_vert: vertex$2,\n\tshadow_frag: fragment$2,\n\tsprite_vert: vertex$1,\n\tsprite_frag: fragment$1\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tuv2Transform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 }\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 }, // basic, lambert, phong\n\t\tior: { value: 1.5 }, // physical\n\t\trefractionRatio: { value: 0.98 } // basic, lambert, phong\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: /*@__PURE__*/ new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: /*@__PURE__*/ new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: /*@__PURE__*/ new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshnormal_vert,\n\t\tfragmentShader: ShaderChunk.meshnormal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\n\tcube: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: /*@__PURE__*/ new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: /*@__PURE__*/ new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tiridescence: { value: 0 },\n\t\t\tiridescenceMap: { value: null },\n\t\t\tiridescenceIOR: { value: 1.3 },\n\t\t\tiridescenceThicknessMinimum: { value: 100 },\n\t\t\tiridescenceThicknessMaximum: { value: 400 },\n\t\t\tiridescenceThicknessMap: { value: null },\n\t\t\tsheen: { value: 0 },\n\t\t\tsheenColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tsheenColorMap: { value: null },\n\t\t\tsheenRoughness: { value: 1 },\n\t\t\tsheenRoughnessMap: { value: null },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t\ttransmissionSamplerSize: { value: /*@__PURE__*/ new Vector2() },\n\t\t\ttransmissionSamplerMap: { value: null },\n\t\t\tthickness: { value: 0 },\n\t\t\tthicknessMap: { value: null },\n\t\t\tattenuationDistance: { value: 0 },\n\t\t\tattenuationColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tspecularIntensity: { value: 1 },\n\t\t\tspecularIntensityMap: { value: null },\n\t\t\tspecularColor: { value: /*@__PURE__*/ new Color( 1, 1, 1 ) },\n\t\t\tspecularColorMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, alpha, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = alpha === true ? 0 : 1;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene ) {\n\n\t\tlet forceClear = false;\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tboxMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tplaneMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst drawBuffers = isWebGL2 || extensions.has( 'WEBGL_draw_buffers' );\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tdrawBuffers: drawBuffers,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture && texture.isRenderTargetTexture === false ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isOrthographicCamera = true;\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst LOD_MIN = 4;\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._lodMax = 0;\n\t\tthis._cubeSize = 0;\n\t\tthis._lodPlanes = [];\n\t\tthis._sizeLods = [];\n\t\tthis._sigmas = [];\n\n\t\tthis._blurMaterial = null;\n\t\tthis._cubemapMaterial = null;\n\t\tthis._equirectMaterial = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tthis._setSize( 256 );\n\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\t\tcubeUVRenderTarget.depthBuffer = true;\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * or HDR. The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular, renderTarget = null ) {\n\n\t\treturn this._fromTexture( equirectangular, renderTarget );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * or HDR. The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap, renderTarget = null ) {\n\n\t\treturn this._fromTexture( cubemap, renderTarget );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\t\t\tthis._compileMaterial( this._cubemapMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\t\t\tthis._compileMaterial( this._equirectMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._dispose();\n\n\t\tif ( this._cubemapMaterial !== null ) this._cubemapMaterial.dispose();\n\t\tif ( this._equirectMaterial !== null ) this._equirectMaterial.dispose();\n\n\t}\n\n\t// private interface\n\n\t_setSize( cubeSize ) {\n\n\t\tthis._lodMax = Math.floor( Math.log2( cubeSize ) );\n\t\tthis._cubeSize = Math.pow( 2, this._lodMax );\n\n\t}\n\n\t_dispose() {\n\n\t\tif ( this._blurMaterial !== null ) this._blurMaterial.dispose();\n\n\t\tif ( this._pingPongRenderTarget !== null ) this._pingPongRenderTarget.dispose();\n\n\t\tfor ( let i = 0; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tthis._lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture, renderTarget ) {\n\n\t\tif ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping ) {\n\n\t\t\tthis._setSize( texture.image.length === 0 ? 16 : ( texture.image[ 0 ].width || texture.image[ 0 ].image.width ) );\n\n\t\t} else { // Equirectangular\n\n\t\t\tthis._setSize( texture.image.width / 4 );\n\n\t\t}\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tconst cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets() {\n\n\t\tconst width = 3 * Math.max( this._cubeSize, 16 * 7 );\n\t\tconst height = 4 * this._cubeSize;\n\n\t\tconst params = {\n\t\t\tmagFilter: LinearFilter,\n\t\t\tminFilter: LinearFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: HalfFloatType,\n\t\t\tformat: RGBAFormat,\n\t\t\tencoding: LinearEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( width, height, params );\n\n\t\tif ( this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== width ) {\n\n\t\t\tif ( this._pingPongRenderTarget !== null ) {\n\n\t\t\t\tthis._dispose();\n\n\t\t\t}\n\n\t\t\tthis._pingPongRenderTarget = _createRenderTarget( width, height, params );\n\n\t\t\tconst { _lodMax } = this;\n\t\t\t( { sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = _createPlanes( _lodMax ) );\n\n\t\t\tthis._blurMaterial = _getBlurShader( _lodMax, width, height );\n\n\t\t}\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( this._lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.autoClear = false;\n\n\t\tconst backgroundMaterial = new MeshBasicMaterial( {\n\t\t\tname: 'PMREM.Background',\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t} );\n\n\t\tconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background );\n\t\t\t\tscene.background = null;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor );\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\n\t\t\tif ( col === 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col === 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\tconst size = this._cubeSize;\n\n\t\t\t_setViewport( cubeUVRenderTarget, col * size, i > 2 ? size : 0, size, size );\n\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\tbackgroundBox.geometry.dispose();\n\t\tbackgroundBox.material.dispose();\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.autoClear = originalAutoClear;\n\t\tscene.background = background;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst isCubeTexture = ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping );\n\n\t\tif ( isCubeTexture ) {\n\n\t\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\n\t\t\t}\n\n\t\t\tthis._cubemapMaterial.uniforms.flipEnvMap.value = ( texture.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t} else {\n\n\t\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = isCubeTexture ? this._cubemapMaterial : this._equirectMaterial;\n\t\tconst mesh = new Mesh( this._lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tconst size = this._cubeSize;\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * size, 2 * size );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( this._sigmas[ i ] * this._sigmas[ i ] - this._sigmas[ i - 1 ] * this._sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( this._lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = this._sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tconst { _lodMax } = this;\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = _lodMax - lodIn;\n\n\t\tconst outputSize = this._sizeLods[ lodOut ];\n\t\tconst x = 3 * outputSize * ( lodOut > _lodMax - LOD_MIN ? lodOut - _lodMax + LOD_MIN : 0 );\n\t\tconst y = 4 * ( this._cubeSize - outputSize );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\n\n\nfunction _createPlanes( lodMax ) {\n\n\tconst lodPlanes = [];\n\tconst sizeLods = [];\n\tconst sigmas = [];\n\n\tlet lod = lodMax;\n\n\tconst totalLods = lodMax - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n\tfor ( let i = 0; i < totalLods; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\tsizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > lodMax - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - lodMax + LOD_MIN - 1 ];\n\n\t\t} else if ( i === 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\tsigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 2 );\n\t\tconst min = - texelSize;\n\t\tconst max = 1 + texelSize;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\tlodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { lodPlanes, sizeLods, sigmas };\n\n}\n\nfunction _createRenderTarget( width, height, params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( width, height, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( lodMax, width, height ) {\n\n\tconst weights = new Float32Array( MAX_SAMPLES );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new ShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: {\n\t\t\t'n': MAX_SAMPLES,\n\t\t\t'CUBEUV_TEXEL_WIDTH': 1.0 / width,\n\t\t\t'CUBEUV_TEXEL_HEIGHT': 1.0 / height,\n\t\t\t'CUBEUV_MAX_MIP': `${lodMax}.0`,\n\t\t},\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCubemapMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'flipEnvMap': { value: - 1 }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction WebGLCubeUVMaps( renderer ) {\n\n\tlet cubeUVmaps = new WeakMap();\n\n\tlet pmremGenerator = null;\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tconst isEquirectMap = ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping );\n\t\t\tconst isCubeMap = ( mapping === CubeReflectionMapping || mapping === CubeRefractionMapping );\n\n\t\t\t// equirect/cube map to cubeUV conversion\n\n\t\t\tif ( isEquirectMap || isCubeMap ) {\n\n\t\t\t\tif ( texture.isRenderTargetTexture && texture.needsPMREMUpdate === true ) {\n\n\t\t\t\t\ttexture.needsPMREMUpdate = false;\n\n\t\t\t\t\tlet renderTarget = cubeUVmaps.get( texture );\n\n\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\trenderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture, renderTarget ) : pmremGenerator.fromCubemap( texture, renderTarget );\n\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cubeUVmaps.has( texture ) ) {\n\n\t\t\t\t\t\treturn cubeUVmaps.get( texture ).texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\t\tif ( ( isEquirectMap && image && image.height > 0 ) || ( isCubeMap && image && isCubeTextureComplete( image ) ) ) {\n\n\t\t\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\t\t\tconst renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture ) : pmremGenerator.fromCubemap( texture );\n\t\t\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction isCubeTextureComplete( image ) {\n\n\t\tlet count = 0;\n\t\tconst length = 6;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tif ( image[ i ] !== undefined ) count ++;\n\n\t\t}\n\n\t\treturn count === length;\n\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemapUV = cubeUVmaps.get( texture );\n\n\t\tif ( cubemapUV !== undefined ) {\n\n\t\t\tcubeUVmaps.delete( texture );\n\t\t\tcubemapUV.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubeUVmaps = new WeakMap();\n\n\t\tif ( pmremGenerator !== null ) {\n\n\t\t\tpmremGenerator.dispose();\n\t\t\tpmremGenerator = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\t\t\tgetExtension( 'WEBGL_multisampled_render_to_texture' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayNeedsUint32( indices ) ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction denormalize( morph, attribute ) {\n\n\tlet denominator = 1;\n\tconst array = attribute.isInterleavedBufferAttribute ? attribute.data.array : attribute.array;\n\n\tif ( array instanceof Int8Array ) denominator = 127;\n\telse if ( array instanceof Uint8Array ) denominator = 255;\n\telse if ( array instanceof Uint16Array ) denominator = 65535;\n\telse if ( array instanceof Int16Array ) denominator = 32767;\n\telse if ( array instanceof Int32Array ) denominator = 2147483647;\n\telse console.error( 'THREE.WebGLMorphtargets: Unsupported morph attribute data type: ', array );\n\n\tmorph.divideScalar( denominator );\n\n}\n\nfunction WebGLMorphtargets( gl, capabilities, textures ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\tconst morphTextures = new WeakMap();\n\tconst morph = new Vector4();\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\tif ( capabilities.isWebGL2 === true ) {\n\n\t\t\t// instead of using attributes, the WebGL 2 code path encodes morph targets\n\t\t\t// into an array of data textures. Each layer represents a single morph target.\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tlet entry = morphTextures.get( geometry );\n\n\t\t\tif ( entry === undefined || entry.count !== morphTargetsCount ) {\n\n\t\t\t\tif ( entry !== undefined ) entry.texture.dispose();\n\n\t\t\t\tconst hasMorphPosition = geometry.morphAttributes.position !== undefined;\n\t\t\t\tconst hasMorphNormals = geometry.morphAttributes.normal !== undefined;\n\t\t\t\tconst hasMorphColors = geometry.morphAttributes.color !== undefined;\n\n\t\t\t\tconst morphTargets = geometry.morphAttributes.position || [];\n\t\t\t\tconst morphNormals = geometry.morphAttributes.normal || [];\n\t\t\t\tconst morphColors = geometry.morphAttributes.color || [];\n\n\t\t\t\tlet vertexDataCount = 0;\n\n\t\t\t\tif ( hasMorphPosition === true ) vertexDataCount = 1;\n\t\t\t\tif ( hasMorphNormals === true ) vertexDataCount = 2;\n\t\t\t\tif ( hasMorphColors === true ) vertexDataCount = 3;\n\n\t\t\t\tlet width = geometry.attributes.position.count * vertexDataCount;\n\t\t\t\tlet height = 1;\n\n\t\t\t\tif ( width > capabilities.maxTextureSize ) {\n\n\t\t\t\t\theight = Math.ceil( width / capabilities.maxTextureSize );\n\t\t\t\t\twidth = capabilities.maxTextureSize;\n\n\t\t\t\t}\n\n\t\t\t\tconst buffer = new Float32Array( width * height * 4 * morphTargetsCount );\n\n\t\t\t\tconst texture = new DataArrayTexture( buffer, width, height, morphTargetsCount );\n\t\t\t\ttexture.type = FloatType;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t// fill buffer\n\n\t\t\t\tconst vertexDataStride = vertexDataCount * 4;\n\n\t\t\t\tfor ( let i = 0; i < morphTargetsCount; i ++ ) {\n\n\t\t\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\t\t\tconst morphNormal = morphNormals[ i ];\n\t\t\t\t\tconst morphColor = morphColors[ i ];\n\n\t\t\t\t\tconst offset = width * height * 4 * i;\n\n\t\t\t\t\tfor ( let j = 0; j < morphTarget.count; j ++ ) {\n\n\t\t\t\t\t\tconst stride = j * vertexDataStride;\n\n\t\t\t\t\t\tif ( hasMorphPosition === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphTarget, j );\n\n\t\t\t\t\t\t\tif ( morphTarget.normalized === true ) denormalize( morph, morphTarget );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 0 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 1 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 2 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 3 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphNormals === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphNormal, j );\n\n\t\t\t\t\t\t\tif ( morphNormal.normalized === true ) denormalize( morph, morphNormal );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 4 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 5 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 6 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 7 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphColors === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphColor, j );\n\n\t\t\t\t\t\t\tif ( morphColor.normalized === true ) denormalize( morph, morphColor );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 8 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 9 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 10 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 11 ] = ( morphColor.itemSize === 4 ) ? morph.w : 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tentry = {\n\t\t\t\t\tcount: morphTargetsCount,\n\t\t\t\t\ttexture: texture,\n\t\t\t\t\tsize: new Vector2( width, height )\n\t\t\t\t};\n\n\t\t\t\tmorphTextures.set( geometry, entry );\n\n\t\t\t\tfunction disposeTexture() {\n\n\t\t\t\t\ttexture.dispose();\n\n\t\t\t\t\tmorphTextures.delete( geometry );\n\n\t\t\t\t\tgeometry.removeEventListener( 'dispose', disposeTexture );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addEventListener( 'dispose', disposeTexture );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < objectInfluences.length; i ++ ) {\n\n\t\t\t\tmorphInfluencesSum += objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', objectInfluences );\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTexture', entry.texture, textures );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTextureSize', entry.size );\n\n\n\t\t} else {\n\n\t\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\t\tlet influences = influencesList[ geometry.id ];\n\n\t\t\tif ( influences === undefined || influences.length !== length ) {\n\n\t\t\t\t// initialise list\n\n\t\t\t\tinfluences = [];\n\n\t\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t\t}\n\n\t\t\t// Collect influences\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tconst influence = influences[ i ];\n\n\t\t\t\tinfluence[ 0 ] = i;\n\t\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tinfluences.sort( absNumericalSort );\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tworkInfluences.sort( numericalSort );\n\n\t\t\tconst morphTargets = geometry.morphAttributes.position;\n\t\t\tconst morphNormals = geometry.morphAttributes.normal;\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tconst influence = workInfluences[ i ];\n\t\t\t\tconst index = influence[ 0 ];\n\t\t\t\tconst value = influence[ 1 ];\n\n\t\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = /*@__PURE__*/ new Texture();\nconst emptyArrayTexture = /*@__PURE__*/ new DataArrayTexture();\nconst empty3dTexture = /*@__PURE__*/ new Data3DTexture();\nconst emptyCubeTexture = /*@__PURE__*/ new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or THREE.MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single integer / boolean\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single integer / boolean vector (from flat array)\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// Single unsigned integer\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single unsigned integer vector (from flat array)\n\nfunction setValueV2ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4uiv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || empty3dTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyArrayTexture, unit );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\t\tcase 0x8dc6: return setValueV2ui; // _VEC2\n\t\tcase 0x8dc7: return setValueV3ui; // _VEC3\n\t\tcase 0x8dc8: return setValueV4ui; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n\n// Array of scalars\n\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Array of vectors (from flat array or array of THREE.VectorN)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (from flat array or array of THREE.MatrixN)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of integer / boolean\n\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of integer / boolean vectors (from flat array)\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Array of unsigned integer\n\nfunction setValueV1uiArray( gl, v ) {\n\n\tgl.uniform1uiv( this.addr, v );\n\n}\n\n// Array of unsigned integer vectors (from flat array)\n\nfunction setValueV2uiArray( gl, v ) {\n\n\tgl.uniform2uiv( this.addr, v );\n\n}\n\nfunction setValueV3uiArray( gl, v ) {\n\n\tgl.uniform3uiv( this.addr, v );\n\n}\n\nfunction setValueV4uiArray( gl, v ) {\n\n\tgl.uniform4uiv( this.addr, v );\n\n}\n\n\n// Array of textures (2D / 3D / Cube / 2DArray)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT3DArray( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture3D( v[ i ] || empty3dTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT2DArrayArray( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2DArray( v[ i ] || emptyArrayTexture, units[ i ] );\n\n\t}\n\n}\n\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x1405: return setValueV1uiArray; // UINT\n\t\tcase 0x8dc6: return setValueV2uiArray; // _VEC2\n\t\tcase 0x8dc7: return setValueV3uiArray; // _VEC3\n\t\tcase 0x8dc8: return setValueV4uiArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3DArray;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArrayArray;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass PureArrayUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass StructuredUniform {\n\n\tconstructor( id ) {\n\n\t\tthis.id = id;\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\tsetValue( gl, value, textures ) {\n\n\t\tconst seq = this.seq;\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t\t}\n\n\t}\n\n}\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nclass WebGLUniforms {\n\n\tconstructor( gl, program ) {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t\tconst n = gl.getProgramParameter( program, 35718 );\n\n\t\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tsetValue( gl, name, value, textures ) {\n\n\t\tconst u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n\t}\n\n\tsetOptional( gl, object, name ) {\n\n\t\tconst v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t}\n\n\tstatic upload( gl, seq, values, textures ) {\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstatic seqWithValue( seq, values ) {\n\n\t\tconst r = [];\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction handleSource( string, errorLine ) {\n\n\tconst lines = string.split( '\\n' );\n\tconst lines2 = [];\n\n\tconst from = Math.max( errorLine - 6, 0 );\n\tconst to = Math.min( errorLine + 6, lines.length );\n\n\tfor ( let i = from; i < to; i ++ ) {\n\n\t\tconst line = i + 1;\n\t\tlines2.push( `${line === errorLine ? '>' : ' '} ${line}: ${lines[ i ]}` );\n\n\t}\n\n\treturn lines2.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst errors = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && errors === '' ) return '';\n\n\tconst errorMatches = /ERROR: 0:(\\d+)/.exec( errors );\n\tif ( errorMatches ) {\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\tconst errorLine = parseInt( errorMatches[ 1 ] );\n\t\treturn type.toUpperCase() + '\\n\\n' + errors + '\\n\\n' + handleSource( gl.getShaderSource( shader ), errorLine );\n\n\t} else {\n\n\t\treturn errors;\n\n\t}\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || !! parameters.envMapCubeUVHeight || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\tlet locationSize = 1;\n\t\tif ( info.type === 35674 ) locationSize = 2;\n\t\tif ( info.type === 35675 ) locationSize = 3;\n\t\tif ( info.type === 35676 ) locationSize = 4;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = {\n\t\t\ttype: info.type,\n\t\t\tlocation: gl.getAttribLocation( program, name ),\n\t\t\tlocationSize: locationSize\n\t\t};\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction generateCubeUVSize( parameters ) {\n\n\tconst imageHeight = parameters.envMapCubeUVHeight;\n\n\tif ( imageHeight === null ) return null;\n\n\tconst maxMip = Math.log2( imageHeight ) - 2;\n\n\tconst texelHeight = 1.0 / imageHeight;\n\n\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\n\n\treturn { texelWidth, texelHeight, maxMip };\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\t// TODO Send this event to Three.js DevTools\n\t// console.log( 'WebGLProgram', cacheKey );\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\tconst envMapCubeUVSize = generateCubeUVSize( parameters );\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t( parameters.morphColors && parameters.isWebGL2 ) ? '#define USE_MORPHCOLORS' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + parameters.morphTextureStride : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_COUNT ' + parameters.morphTargetsCount : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if defined( USE_COLOR_ALPHA )',\n\n\t\t\t'\tattribute vec4 color;',\n\n\t\t\t'#elif defined( USE_COLOR )',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_WIDTH ' + envMapCubeUVSize.texelWidth : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_HEIGHT ' + envMapCubeUVSize.texelHeight : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_MAX_MIP ' + envMapCubeUVSize.maxMip + '.0' : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoat ? '#define USE_CLEARCOAT' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescence ? '#define USE_IRIDESCENCE' : '',\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULARINTENSITYMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULARCOLORMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaTest ? '#define USE_ALPHATEST' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEENCOLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEENROUGHNESSMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\t\t\tparameters.opaque ? '#define OPAQUE' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.useDepthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'layout(location = 0) out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error(\n\t\t\t\t'THREE.WebGLProgram: Shader Error ' + gl.getError() + ' - ' +\n\t\t\t\t'VALIDATE_STATUS ' + gl.getProgramParameter( program, 35715 ) + '\\n\\n' +\n\t\t\t\t'Program Info Log: ' + programLog + '\\n' +\n\t\t\t\tvertexErrors + '\\n' +\n\t\t\t\tfragmentErrors\n\t\t\t);\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Program Info Log:', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nlet _id = 0;\n\nclass WebGLShaderCache {\n\n\tconstructor() {\n\n\t\tthis.shaderCache = new Map();\n\t\tthis.materialCache = new Map();\n\n\t}\n\n\tupdate( material ) {\n\n\t\tconst vertexShader = material.vertexShader;\n\t\tconst fragmentShader = material.fragmentShader;\n\n\t\tconst vertexShaderStage = this._getShaderStage( vertexShader );\n\t\tconst fragmentShaderStage = this._getShaderStage( fragmentShader );\n\n\t\tconst materialShaders = this._getShaderCacheForMaterial( material );\n\n\t\tif ( materialShaders.has( vertexShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( vertexShaderStage );\n\t\t\tvertexShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\tif ( materialShaders.has( fragmentShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( fragmentShaderStage );\n\t\t\tfragmentShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( material ) {\n\n\t\tconst materialShaders = this.materialCache.get( material );\n\n\t\tfor ( const shaderStage of materialShaders ) {\n\n\t\t\tshaderStage.usedTimes --;\n\n\t\t\tif ( shaderStage.usedTimes === 0 ) this.shaderCache.delete( shaderStage.code );\n\n\t\t}\n\n\t\tthis.materialCache.delete( material );\n\n\t\treturn this;\n\n\t}\n\n\tgetVertexShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.vertexShader ).id;\n\n\t}\n\n\tgetFragmentShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.fragmentShader ).id;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shaderCache.clear();\n\t\tthis.materialCache.clear();\n\n\t}\n\n\t_getShaderCacheForMaterial( material ) {\n\n\t\tconst cache = this.materialCache;\n\n\t\tif ( cache.has( material ) === false ) {\n\n\t\t\tcache.set( material, new Set() );\n\n\t\t}\n\n\t\treturn cache.get( material );\n\n\t}\n\n\t_getShaderStage( code ) {\n\n\t\tconst cache = this.shaderCache;\n\n\t\tif ( cache.has( code ) === false ) {\n\n\t\t\tconst stage = new WebGLShaderStage( code );\n\t\t\tcache.set( code, stage );\n\n\t\t}\n\n\t\treturn cache.get( code );\n\n\t}\n\n}\n\nclass WebGLShaderStage {\n\n\tconstructor( code ) {\n\n\t\tthis.id = _id ++;\n\n\t\tthis.code = code;\n\t\tthis.usedTimes = 0;\n\n\t}\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst _programLayers = new Layers();\n\tconst _customShaders = new WebGLShaderCache();\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst vertexTextures = capabilities.vertexTextures;\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst geometry = object.geometry;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst envMapCubeUVHeight = ( !! envMap ) && ( envMap.mapping === CubeUVReflectionMapping ) ? envMap.image.height : null;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tlet morphTextureStride = 0;\n\n\t\tif ( geometry.morphAttributes.position !== undefined ) morphTextureStride = 1;\n\t\tif ( geometry.morphAttributes.normal !== undefined ) morphTextureStride = 2;\n\t\tif ( geometry.morphAttributes.color !== undefined ) morphTextureStride = 3;\n\n\t\t//\n\n\t\tlet vertexShader, fragmentShader;\n\t\tlet customVertexShaderID, customFragmentShaderID;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t\t_customShaders.update( material );\n\n\t\t\tcustomVertexShaderID = _customShaders.getVertexShaderID( material );\n\t\t\tcustomFragmentShaderID = _customShaders.getFragmentShaderID( material );\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst useAlphaTest = material.alphaTest > 0;\n\t\tconst useClearcoat = material.clearcoat > 0;\n\t\tconst useIridescence = material.iridescence > 0;\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tcustomVertexShaderID: customVertexShaderID,\n\t\t\tcustomFragmentShaderID: customFragmentShaderID,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget === null ) ? renderer.outputEncoding : ( currentRenderTarget.isXRRenderTarget === true ? currentRenderTarget.texture.encoding : LinearEncoding ),\n\t\t\tmap: !! material.map,\n\t\t\tmatcap: !! material.matcap,\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapCubeUVHeight: envMapCubeUVHeight,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\n\t\t\tdecodeVideoTexture: !! material.map && ( material.map.isVideoTexture === true ) && ( material.map.encoding === sRGBEncoding ),\n\n\t\t\tclearcoat: useClearcoat,\n\t\t\tclearcoatMap: useClearcoat && !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: useClearcoat && !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: useClearcoat && !! material.clearcoatNormalMap,\n\n\t\t\tiridescence: useIridescence,\n\t\t\tiridescenceMap: useIridescence && !! material.iridescenceMap,\n\t\t\tiridescenceThicknessMap: useIridescence && !! material.iridescenceThicknessMap,\n\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\tspecularIntensityMap: !! material.specularIntensityMap,\n\t\t\tspecularColorMap: !! material.specularColorMap,\n\n\t\t\topaque: material.transparent === false && material.blending === NormalBlending,\n\n\t\t\talphaMap: !! material.alphaMap,\n\t\t\talphaTest: useAlphaTest,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: material.sheen > 0,\n\t\t\tsheenColorMap: !! material.sheenColorMap,\n\t\t\tsheenRoughnessMap: !! material.sheenRoughnessMap,\n\n\t\t\ttransmission: material.transmission > 0,\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\t\t\tthicknessMap: !! material.thicknessMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( !! material.normalMap && !! geometry.attributes.tangent ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexAlphas: material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || !! material.displacementMap || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || !! material.sheenColorMap || !! material.sheenRoughnessMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.iridescenceMap || !! material.iridescenceThicknessMap || material.transmission > 0 || !! material.transmissionMap || !! material.thicknessMap || !! material.specularIntensityMap || !! material.specularColorMap || material.sheen > 0 || !! material.sheenColorMap || !! material.sheenRoughnessMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog === true,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: !! material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: object.isSkinnedMesh === true,\n\n\t\t\tmorphTargets: geometry.morphAttributes.position !== undefined,\n\t\t\tmorphNormals: geometry.morphAttributes.normal !== undefined,\n\t\t\tmorphColors: geometry.morphAttributes.color !== undefined,\n\t\t\tmorphTargetsCount: morphTargetsCount,\n\t\t\tmorphTextureStride: morphTextureStride,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tuseDepthPacking: !! material.depthPacking,\n\t\t\tdepthPacking: material.depthPacking || 0,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.customVertexShaderID );\n\t\t\tarray.push( parameters.customFragmentShaderID );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tgetProgramCacheKeyParameters( array, parameters );\n\t\t\tgetProgramCacheKeyBooleans( array, parameters );\n\t\t\tarray.push( renderer.outputEncoding );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getProgramCacheKeyParameters( array, parameters ) {\n\n\t\tarray.push( parameters.precision );\n\t\tarray.push( parameters.outputEncoding );\n\t\tarray.push( parameters.envMapMode );\n\t\tarray.push( parameters.envMapCubeUVHeight );\n\t\tarray.push( parameters.combine );\n\t\tarray.push( parameters.vertexUvs );\n\t\tarray.push( parameters.fogExp2 );\n\t\tarray.push( parameters.sizeAttenuation );\n\t\tarray.push( parameters.morphTargetsCount );\n\t\tarray.push( parameters.morphAttributeCount );\n\t\tarray.push( parameters.numDirLights );\n\t\tarray.push( parameters.numPointLights );\n\t\tarray.push( parameters.numSpotLights );\n\t\tarray.push( parameters.numHemiLights );\n\t\tarray.push( parameters.numRectAreaLights );\n\t\tarray.push( parameters.numDirLightShadows );\n\t\tarray.push( parameters.numPointLightShadows );\n\t\tarray.push( parameters.numSpotLightShadows );\n\t\tarray.push( parameters.shadowMapType );\n\t\tarray.push( parameters.toneMapping );\n\t\tarray.push( parameters.numClippingPlanes );\n\t\tarray.push( parameters.numClipIntersection );\n\t\tarray.push( parameters.depthPacking );\n\n\t}\n\n\tfunction getProgramCacheKeyBooleans( array, parameters ) {\n\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.isWebGL2 )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.supportsVertexTextures )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.instancing )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.instancingColor )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.map )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.matcap )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.envMap )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.lightMap )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.aoMap )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.emissiveMap )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.bumpMap )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.normalMap )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.objectSpaceNormalMap )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.tangentSpaceNormalMap )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.clearcoat )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.clearcoatMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.clearcoatRoughnessMap )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.clearcoatNormalMap )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.iridescence )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.iridescenceMap )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.iridescenceThicknessMap )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.displacementMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.specularMap )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.roughnessMap )\n\t\t\t_programLayers.enable( 23 );\n\t\tif ( parameters.metalnessMap )\n\t\t\t_programLayers.enable( 24 );\n\t\tif ( parameters.gradientMap )\n\t\t\t_programLayers.enable( 25 );\n\t\tif ( parameters.alphaMap )\n\t\t\t_programLayers.enable( 26 );\n\t\tif ( parameters.alphaTest )\n\t\t\t_programLayers.enable( 27 );\n\t\tif ( parameters.vertexColors )\n\t\t\t_programLayers.enable( 28 );\n\t\tif ( parameters.vertexAlphas )\n\t\t\t_programLayers.enable( 29 );\n\t\tif ( parameters.vertexUvs )\n\t\t\t_programLayers.enable( 30 );\n\t\tif ( parameters.vertexTangents )\n\t\t\t_programLayers.enable( 31 );\n\t\tif ( parameters.uvsVertexOnly )\n\t\t\t_programLayers.enable( 32 );\n\t\tif ( parameters.fog )\n\t\t\t_programLayers.enable( 33 );\n\n\t\tarray.push( _programLayers.mask );\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.useFog )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.flatShading )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.logarithmicDepthBuffer )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.skinning )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.morphTargets )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.morphNormals )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.morphColors )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.premultipliedAlpha )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.shadowMapEnabled )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.physicallyCorrectLights )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.doubleSided )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.flipSided )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.useDepthPacking )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.dithering )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.specularIntensityMap )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.specularColorMap )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.transmission )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.transmissionMap )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.thicknessMap )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.sheen )\n\t\t\t_programLayers.enable( 19 );\n\t\tif ( parameters.sheenColorMap )\n\t\t\t_programLayers.enable( 20 );\n\t\tif ( parameters.sheenRoughnessMap )\n\t\t\t_programLayers.enable( 21 );\n\t\tif ( parameters.decodeVideoTexture )\n\t\t\t_programLayers.enable( 22 );\n\t\tif ( parameters.opaque )\n\t\t\t_programLayers.enable( 23 );\n\n\t\tarray.push( _programLayers.mask );\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\tfunction releaseShaderCache( material ) {\n\n\t\t_customShaders.remove( material );\n\n\t}\n\n\tfunction dispose() {\n\n\t\t_customShaders.dispose();\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\treleaseShaderCache: releaseShaderCache,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tlet list;\n\n\t\tif ( lists.has( scene ) === false ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= lists.get( scene ).length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlists.get( scene ).push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = lists.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, physicallyCorrectLights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\t// artist-friendly light intensity scaling factor\n\t\tconst scaleFactor = ( physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity * scaleFactor;\n\t\t\t\tg += color.g * intensity * scaleFactor;\n\t\t\t\tb += color.b * intensity * scaleFactor;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity * scaleFactor );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( physicallyCorrectLights ) {\n\n\t\tlights.setup( lightsArray, physicallyCorrectLights );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStates.get( scene ).length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStates.get( scene ).push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDepthMaterial = true;\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDistanceMaterial = true;\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.referencePosition = new Vector3();\n\t\tthis.nearDistance = 1;\n\t\tthis.farDistance = 1000;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.referencePosition.copy( source.referencePosition );\n\t\tthis.nearDistance = source.nearDistance;\n\t\tthis.farDistance = source.farDistance;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst vertex = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nconst fragment = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, _capabilities ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterial = new MeshDepthMaterial( { depthPacking: RGBADepthPacking } ),\n\t\t_distanceMaterial = new MeshDistanceMaterial(),\n\n\t\t_materialCache = {},\n\n\t\t_maxTextureSize = _capabilities.maxTextureSize;\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\t\tdefines: {\n\t\t\tVSM_SAMPLES: 8\n\t\t},\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vertex,\n\t\tfragmentShader: fragment\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( _maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( _maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = ( this.type !== VSMShadowMap ) ? { minFilter: NearestFilter, magFilter: NearestFilter } : {};\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( shadow.isPointLightShadow !== true && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\tif ( shadowMaterialVertical.defines.VSM_SAMPLES !== shadow.blurSamples ) {\n\n\t\t\tshadowMaterialVertical.defines.VSM_SAMPLES = shadow.blurSamples;\n\t\t\tshadowMaterialHorizontal.defines.VSM_SAMPLES = shadow.blurSamples;\n\n\t\t\tshadowMaterialVertical.needsUpdate = true;\n\t\t\tshadowMaterialHorizontal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( shadow.mapPass === null ) {\n\n\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y );\n\n\t\t}\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tconst customMaterial = ( light.isPointLight === true ) ? object.customDistanceMaterial : object.customDepthMaterial;\n\n\t\tif ( customMaterial !== undefined ) {\n\n\t\t\tresult = customMaterial;\n\n\t\t} else {\n\n\t\t\tresult = ( light.isPointLight === true ) ? _distanceMaterial : _depthMaterial;\n\n\t\t}\n\n\t\tif ( ( _renderer.localClippingEnabled && material.clipShadows === true && Array.isArray( material.clippingPlanes ) && material.clippingPlanes.length !== 0 ) ||\n\t\t\t( material.displacementMap && material.displacementScale !== 0 ) ||\n\t\t\t( material.alphaMap && material.alphaTest > 0 ) ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.alphaMap = material.alphaMap;\n\t\tresult.alphaTest = material.alphaTest;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.displacementMap = material.displacementMap;\n\t\tresult.displacementScale = material.displacementScale;\n\t\tresult.displacementBias = material.displacementBias;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tconst uboBindings = new WeakMap();\n\tconst uboProgamMap = new WeakMap();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentBoundFramebuffers = {};\n\tlet currentDrawbuffers = new WeakMap();\n\tlet defaultDrawbuffers = [];\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst scissorParam = gl.getParameter( 3088 );\n\tconst viewportParam = gl.getParameter( 2978 );\n\n\tconst currentScissor = new Vector4().fromArray( scissorParam );\n\tconst currentViewport = new Vector4().fromArray( viewportParam );\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction bindFramebuffer( target, framebuffer ) {\n\n\t\tif ( currentBoundFramebuffers[ target ] !== framebuffer ) {\n\n\t\t\tgl.bindFramebuffer( target, framebuffer );\n\n\t\t\tcurrentBoundFramebuffers[ target ] = framebuffer;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t// 36009 is equivalent to 36160\n\n\t\t\t\tif ( target === 36009 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36160 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t\tif ( target === 36160 ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ 36009 ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction drawBuffers( renderTarget, framebuffer ) {\n\n\t\tlet drawBuffers = defaultDrawbuffers;\n\n\t\tlet needsUpdate = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tdrawBuffers = currentDrawbuffers.get( framebuffer );\n\n\t\t\tif ( drawBuffers === undefined ) {\n\n\t\t\t\tdrawBuffers = [];\n\t\t\t\tcurrentDrawbuffers.set( framebuffer, drawBuffers );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\tif ( drawBuffers.length !== textures.length || drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tdrawBuffers[ i ] = 36064 + i;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawBuffers.length = textures.length;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( drawBuffers[ 0 ] !== 36064 ) {\n\n\t\t\t\t\tdrawBuffers[ 0 ] = 36064;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( drawBuffers[ 0 ] !== 1029 ) {\n\n\t\t\t\tdrawBuffers[ 0 ] = 1029;\n\n\t\t\t\tneedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgl.drawBuffers( drawBuffers );\n\n\t\t\t} else {\n\n\t\t\t\textensions.get( 'WEBGL_draw_buffers' ).drawBuffersWEBGL( drawBuffers );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 769, 0, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\tmaterial.alphaToCoverage === true\n\t\t\t? enable( 32926 )\n\t\t\t: disable( 32926 );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\tfunction updateUBOMapping( uniformsGroup, program ) {\n\n\t\tlet mapping = uboProgamMap.get( program );\n\n\t\tif ( mapping === undefined ) {\n\n\t\t\tmapping = new WeakMap();\n\n\t\t\tuboProgamMap.set( program, mapping );\n\n\t\t}\n\n\t\tlet blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( blockIndex === undefined ) {\n\n\t\t\tblockIndex = gl.getUniformBlockIndex( program, uniformsGroup.name );\n\n\t\t\tmapping.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\tfunction uniformBlockBinding( uniformsGroup, program ) {\n\n\t\tconst mapping = uboProgamMap.get( program );\n\t\tconst blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( uboBindings.get( uniformsGroup ) !== blockIndex ) {\n\n\t\t\t// bind shader specific block index to global block point\n\n\t\t\tgl.uniformBlockBinding( program, blockIndex, uniformsGroup.__bindingPointIndex );\n\n\t\t\tuboBindings.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( 3042 );\n\t\tgl.disable( 2884 );\n\t\tgl.disable( 2929 );\n\t\tgl.disable( 32823 );\n\t\tgl.disable( 3089 );\n\t\tgl.disable( 2960 );\n\t\tgl.disable( 32926 );\n\n\t\tgl.blendEquation( 32774 );\n\t\tgl.blendFunc( 1, 0 );\n\t\tgl.blendFuncSeparate( 1, 0, 1, 0 );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( 513 );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( 519, 0, 0xffffffff );\n\t\tgl.stencilOp( 7680, 7680, 7680 );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( 1029 );\n\t\tgl.frontFace( 2305 );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( 33984 );\n\n\t\tgl.bindFramebuffer( 36160, null );\n\n\t\tif ( isWebGL2 === true ) {\n\n\t\t\tgl.bindFramebuffer( 36009, null );\n\t\t\tgl.bindFramebuffer( 36008, null );\n\n\t\t}\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBoundFramebuffers = {};\n\t\tcurrentDrawbuffers = new WeakMap();\n\t\tdefaultDrawbuffers = [];\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcurrentScissor.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tcurrentViewport.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tbindFramebuffer: bindFramebuffer,\n\t\tdrawBuffers: drawBuffers,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tupdateUBOMapping: updateUBOMapping,\n\t\tuniformBlockBinding: uniformBlockBinding,\n\n\t\ttexStorage2D: texStorage2D,\n\t\ttexStorage3D: texStorage3D,\n\t\ttexSubImage2D: texSubImage2D,\n\t\ttexSubImage3D: texSubImage3D,\n\t\tcompressedTexSubImage2D: compressedTexSubImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\tconst multisampledRTTExt = extensions.has( 'WEBGL_multisampled_render_to_texture' ) ? extensions.get( 'WEBGL_multisampled_render_to_texture' ) : null;\n\tconst supportsInvalidateFramebuffer = /OculusBrowser/g.test( navigator.userAgent );\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\tconst _sources = new WeakMap(); // maps WebglTexture objects to instances of Source\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\tnew OffscreenCanvas( width, height ) : createElementNS( 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo$1( image ) {\n\n\t\treturn isPowerOfTwo( image.width ) && isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType, encoding, isVideoTexture = false ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 33319 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33328;\n\t\t\tif ( glType === 5131 ) internalFormat = 33327;\n\t\t\tif ( glType === 5121 ) internalFormat = 33323;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = ( encoding === sRGBEncoding && isVideoTexture === false ) ? 35907 : 32856;\n\t\t\tif ( glType === 32819 ) internalFormat = 32854;\n\t\t\tif ( glType === 32820 ) internalFormat = 32855;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 33327 || internalFormat === 33328 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\tfunction getMipLevels( texture, image, supportsMips ) {\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) === true || ( texture.isFramebufferTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) ) {\n\n\t\t\treturn Math.log2( Math.max( image.width, image.height ) ) + 1;\n\n\t\t} else if ( texture.mipmaps !== undefined && texture.mipmaps.length > 0 ) {\n\n\t\t\t// user-defined mipmaps\n\n\t\t\treturn texture.mipmaps.length;\n\n\t\t} else if ( texture.isCompressedTexture && Array.isArray( texture.image ) ) {\n\n\t\t\treturn image.mipmaps.length;\n\n\t\t} else {\n\n\t\t\t// texture without mipmaps (only base level)\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t// check if it's necessary to remove the WebGLTexture object\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures ) {\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\t\t\twebglTexture.usedTimes --;\n\n\t\t\t// the WebGLTexture object is not used anymore, remove it\n\n\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\tdeleteTexture( texture );\n\n\t\t\t}\n\n\t\t\t// remove the weak map entry if no WebGLTexture uses the source anymore\n\n\t\t\tif ( Object.keys( webglTextures ).length === 0 ) {\n\n\t\t\t\t_sources.delete( source );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deleteTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\t\tdelete webglTextures[ textureProperties.__cacheKey ];\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\tinfo.memory.textures --;\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) {\n\n\t\t\t\tfor ( let i = 0; i < renderTargetProperties.__webglColorRenderbuffer.length; i ++ ) {\n\n\t\t\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer[ i ] ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\tfor ( let i = 0, il = texture.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachmentProperties = properties.get( texture[ i ] );\n\n\t\t\t\tif ( attachmentProperties.__webglTexture ) {\n\n\t\t\t\t\t_gl.deleteTexture( attachmentProperties.__webglTexture );\n\n\t\t\t\t\tinfo.memory.textures --;\n\n\t\t\t\t}\n\n\t\t\t\tproperties.remove( texture[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction getTextureCacheKey( texture ) {\n\n\t\tconst array = [];\n\n\t\tarray.push( texture.wrapS );\n\t\tarray.push( texture.wrapT );\n\t\tarray.push( texture.magFilter );\n\t\tarray.push( texture.minFilter );\n\t\tarray.push( texture.anisotropy );\n\t\tarray.push( texture.internalFormat );\n\t\tarray.push( texture.format );\n\t\tarray.push( texture.type );\n\t\tarray.push( texture.generateMipmaps );\n\t\tarray.push( texture.premultiplyAlpha );\n\t\tarray.push( texture.flipY );\n\t\tarray.push( texture.unpackAlignment );\n\t\tarray.push( texture.encoding );\n\n\t\treturn array.join();\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.isRenderTargetTexture === false && texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but no image data found.' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tlet forceUpload = false;\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t}\n\n\t\t// create Source <-> WebGLTextures mapping if necessary\n\n\t\tconst source = texture.source;\n\t\tlet webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures === undefined ) {\n\n\t\t\twebglTextures = {};\n\t\t\t_sources.set( source, webglTextures );\n\n\t\t}\n\n\t\t// check if there is already a WebGLTexture object for the given texture parameters\n\n\t\tconst textureCacheKey = getTextureCacheKey( texture );\n\n\t\tif ( textureCacheKey !== textureProperties.__cacheKey ) {\n\n\t\t\t// if not, create a new instance of WebGLTexture\n\n\t\t\tif ( webglTextures[ textureCacheKey ] === undefined ) {\n\n\t\t\t\t// create new entry\n\n\t\t\t\twebglTextures[ textureCacheKey ] = {\n\t\t\t\t\ttexture: _gl.createTexture(),\n\t\t\t\t\tusedTimes: 0\n\t\t\t\t};\n\n\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t// when a new instance of WebGLTexture was created, a texture upload is required\n\t\t\t\t// even if the image contents are identical\n\n\t\t\t\tforceUpload = true;\n\n\t\t\t}\n\n\t\t\twebglTextures[ textureCacheKey ].usedTimes ++;\n\n\t\t\t// every time the texture cache key changes, it's necessary to check if an instance of\n\t\t\t// WebGLTexture can be deleted in order to avoid a memory leak.\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\n\t\t\tif ( webglTexture !== undefined ) {\n\n\t\t\t\twebglTextures[ textureProperties.__cacheKey ].usedTimes --;\n\n\t\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteTexture( texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// store references to cache key and WebGLTexture object\n\n\t\t\ttextureProperties.__cacheKey = textureCacheKey;\n\t\t\ttextureProperties.__webglTexture = webglTextures[ textureCacheKey ].texture;\n\n\t\t}\n\n\t\treturn forceUpload;\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataArrayTexture ) textureType = 35866;\n\t\tif ( texture.isData3DTexture ) textureType = 32879;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\tif ( source.version !== source.__currentVersion || forceUpload === true ) {\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo$1( texture.image ) === false;\n\t\t\tlet image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\t\t\timage = verifyColorSpace( texture, image );\n\n\t\t\tconst supportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding );\n\n\t\t\tlet glType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding, texture.isVideoTexture );\n\n\t\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\t\tlet mipmap;\n\t\t\tconst mipmaps = texture.mipmaps;\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( source.__currentVersion === undefined ) || ( forceUpload === true );\n\t\t\tconst levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tglInternalFormat = 6402;\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// validation checks for WebGL 1\n\n\t\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedIntType;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, 1, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, image.width, image.height, glFormat, glType, image.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 35866, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 35866, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( 32879, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( 32879, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isFramebufferTexture ) {\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet width = image.width, height = image.height;\n\n\t\t\t\t\t\tfor ( let i = 0; i < levels; i ++ ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t\t\t\t\twidth >>= 1;\n\t\t\t\t\t\t\theight >>= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 3553, i, 0, 0, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( 3553, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( 3553, 0, 0, 0, glFormat, glType, image );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( textureType );\n\n\t\t\t}\n\n\t\t\tsource.__currentVersion = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\tif ( source.version !== source.__currentVersion || forceUpload === true ) {\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\t\tconst isCompressed = ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcubeImage[ i ] = verifyColorSpace( texture, cubeImage[ i ] );\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.encoding ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( source.__currentVersion === undefined ) || ( forceUpload === true );\n\t\t\tlet levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t// TODO: Uniformly handle mipmap definitions\n\t\t\t\t\t// Normal textures and compressed cube textures define base level + mips with their mipmap array\n\t\t\t\t\t// Uncompressed cube textures use their mipmap array only for mips (no base level)\n\n\t\t\t\t\tif ( mipmaps.length > 0 ) levels ++;\n\n\t\t\t\t\tstate.texStorage2D( 34067, levels, glInternalFormat, cubeImage[ 0 ].width, cubeImage[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, cubeImage[ i ].width, cubeImage[ i ].height, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, mipmapImage.width, mipmapImage.height, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, 0, 0, 0, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( 34069 + i, j + 1, 0, 0, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tsource.__currentVersion = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, texture, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( ! renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\tif ( textureTarget === 32879 || textureTarget === 35866 ) {\n\n\t\t\t\tstate.texImage3D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0, getRenderTargetSamples( renderTarget ) );\n\n\t\t} else {\n\n\t\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0 );\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample || useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tconst texture = textures[ i ];\n\n\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 36096, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( 36160, 33306, 3553, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture && ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// rebind framebuffer with external textures\n\tfunction rebindTextures( renderTarget, colorTexture, depthTexture ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( colorTexture !== undefined ) {\n\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, renderTarget.texture, 36064, 3553 );\n\n\t\t}\n\n\t\tif ( depthTexture !== undefined ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets !== true ) {\n\n\t\t\tif ( textureProperties.__webglTexture === undefined ) {\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tif ( capabilities.drawBuffers ) {\n\n\t\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst attachmentProperties = properties.get( textures[ i ] );\n\n\t\t\t\t\t\tif ( attachmentProperties.__webglTexture === undefined ) {\n\n\t\t\t\t\t\t\tattachmentProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tconst textures = isMultipleRenderTargets ? texture : [ texture ];\n\n\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = [];\n\n\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tconst texture = textures[ i ];\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format, texture.encoding );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.encoding );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t}\n\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, texture, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067 );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else if ( isMultipleRenderTargets ) {\n\n\t\t\tconst textures = renderTarget.texture;\n\n\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachment = textures[ i ];\n\t\t\t\tconst attachmentProperties = properties.get( attachment );\n\n\t\t\t\tstate.bindTexture( 3553, attachmentProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( 3553, attachment, supportsMips );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, attachment, 36064 + i, 3553 );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( attachment, supportsMips ) ) {\n\n\t\t\t\t\tgenerateMipmap( 3553 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else {\n\n\t\t\tlet glTextureType = 3553;\n\n\t\t\tif ( renderTarget.isWebGL3DRenderTarget || renderTarget.isWebGLArrayRenderTarget ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tglTextureType = renderTarget.isWebGL3DRenderTarget ? 32879 : 35866;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, texture, 36064, glTextureType );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( glTextureType );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\tconst texture = textures[ i ];\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\tgenerateMipmap( target );\n\t\t\t\tstate.unbindTexture();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets ? renderTarget.texture : [ renderTarget.texture ];\n\t\t\tconst width = renderTarget.width;\n\t\t\tconst height = renderTarget.height;\n\t\t\tlet mask = 16384;\n\t\t\tconst invalidationArray = [];\n\t\t\tconst depthStyle = renderTarget.stencilBuffer ? 33306 : 36096;\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\n\t\t\t// If MRT we need to remove FBO attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, null );\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, null, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tinvalidationArray.push( 36064 + i );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\tinvalidationArray.push( depthStyle );\n\n\t\t\t\t}\n\n\t\t\t\tconst ignoreDepthValues = ( renderTargetProperties.__ignoreDepthValues !== undefined ) ? renderTargetProperties.__ignoreDepthValues : false;\n\n\t\t\t\tif ( ignoreDepthValues === false ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36008, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ignoreDepthValues === true ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, [ depthStyle ] );\n\t\t\t\t\t_gl.invalidateFramebuffer( 36009, [ depthStyle ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\tif ( supportsInvalidateFramebuffer ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( 36008, invalidationArray );\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36008, null );\n\t\t\tstate.bindFramebuffer( 36009, null );\n\n\t\t\t// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064 + i, 36161, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\n\t\t\t\t\tstate.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( 36009, 36064 + i, 3553, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( 36009, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn Math.min( maxSamples, renderTarget.samples );\n\n\t}\n\n\tfunction useMultisampledRTT( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\treturn isWebGL2 && renderTarget.samples > 0 && extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true && renderTargetProperties.__useRenderToTexture !== false;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tfunction verifyColorSpace( texture, image ) {\n\n\t\tconst encoding = texture.encoding;\n\t\tconst format = texture.format;\n\t\tconst type = texture.type;\n\n\t\tif ( texture.isCompressedTexture === true || texture.isVideoTexture === true || texture.format === _SRGBAFormat ) return image;\n\n\t\tif ( encoding !== LinearEncoding ) {\n\n\t\t\t// sRGB\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\tif ( isWebGL2 === false ) {\n\n\t\t\t\t\t// in WebGL 1, try to use EXT_sRGB extension and unsized formats\n\n\t\t\t\t\tif ( extensions.has( 'EXT_sRGB' ) === true && format === RGBAFormat ) {\n\n\t\t\t\t\t\ttexture.format = _SRGBAFormat;\n\n\t\t\t\t\t\t// it's not possible to generate mips in WebGL 1 with this extension\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// slow fallback (CPU decode)\n\n\t\t\t\t\t\timage = ImageUtils.sRGBToLinear( image );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// in WebGL 2 uncompressed textures can only be sRGB encoded if they have the RGBA8 format\n\n\t\t\t\t\tif ( format !== RGBAFormat || type !== UnsignedByteType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.WebGLTextures: Unsupported texture encoding:', encoding );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.rebindTextures = rebindTextures;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\tthis.setupDepthRenderbuffer = setupDepthRenderbuffer;\n\tthis.setupFrameBufferTexture = setupFrameBufferTexture;\n\tthis.useMultisampledRTT = useMultisampledRTT;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p, encoding = null ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\tif ( p === RGBFormat ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228' );\n\t\t\treturn 6408;\n\n\t\t}\n\n\t\t// WebGL 1 sRGB fallback\n\n\t\tif ( p === _SRGBAFormat ) {\n\n\t\t\textension = extensions.get( 'EXT_sRGB' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.SRGB_ALPHA_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\t// S3TC\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\tif ( encoding === sRGBEncoding ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc_srgb' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// PVRTC\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC1\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC2\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ETC2 : extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ASTC\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_ASTC_4x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : extension.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x4_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : extension.COMPRESSED_RGBA_ASTC_5x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : extension.COMPRESSED_RGBA_ASTC_5x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : extension.COMPRESSED_RGBA_ASTC_6x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : extension.COMPRESSED_RGBA_ASTC_6x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : extension.COMPRESSED_RGBA_ASTC_8x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : extension.COMPRESSED_RGBA_ASTC_8x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : extension.COMPRESSED_RGBA_ASTC_8x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x5_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : extension.COMPRESSED_RGBA_ASTC_10x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x6_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : extension.COMPRESSED_RGBA_ASTC_10x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x8_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : extension.COMPRESSED_RGBA_ASTC_10x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : extension.COMPRESSED_RGBA_ASTC_10x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x10_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : extension.COMPRESSED_RGBA_ASTC_12x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x12_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : extension.COMPRESSED_RGBA_ASTC_12x12_KHR;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// BPTC\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return ( encoding === sRGBEncoding ) ? extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : extension.COMPRESSED_RGBA_BPTC_UNORM_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if \"p\" can't be resolved, assume the user defines a WebGL constant as a string (fallback/workaround for packed RGB formats)\n\n\t\treturn ( gl[ p ] !== undefined ) ? gl[ p ] : null;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nclass ArrayCamera extends PerspectiveCamera {\n\n\tconstructor( array = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isArrayCamera = true;\n\n\t\tthis.cameras = array;\n\n\t}\n\n}\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isGroup = true;\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nconst _moveEvent = { type: 'move' };\n\nclass WebXRController {\n\n\tconstructor() {\n\n\t\tthis._targetRay = null;\n\t\tthis._grip = null;\n\t\tthis._hand = null;\n\n\t}\n\n\tgetHandSpace() {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t}\n\n\tgetTargetRaySpace() {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\t\t\tthis._targetRay.hasLinearVelocity = false;\n\t\t\tthis._targetRay.linearVelocity = new Vector3();\n\t\t\tthis._targetRay.hasAngularVelocity = false;\n\t\t\tthis._targetRay.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t}\n\n\tgetGripSpace() {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\t\t\tthis._grip.hasLinearVelocity = false;\n\t\t\tthis._grip.linearVelocity = new Vector3();\n\t\t\tthis._grip.hasAngularVelocity = false;\n\t\t\tthis._grip.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tupdate( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\t\t\t\t\t\t// ??\n\t\t\t\t\t\thand.add( joint );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst joint = hand.joints[ inputjoint.jointName ];\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t\tif ( gripPose.linearVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = true;\n\t\t\t\t\t\t\tgrip.linearVelocity.copy( gripPose.linearVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( gripPose.angularVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = true;\n\t\t\t\t\t\t\tgrip.angularVelocity.copy( gripPose.angularVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t// Some runtimes (namely Vive Cosmos with Vive OpenXR Runtime) have only grip space and ray space is equal to it\n\t\t\t\tif ( inputPose === null && gripPose !== null ) {\n\n\t\t\t\t\tinputPose = gripPose;\n\n\t\t\t\t}\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\tif ( inputPose.linearVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = true;\n\t\t\t\t\t\ttargetRay.linearVelocity.copy( inputPose.linearVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( inputPose.angularVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = true;\n\t\t\t\t\t\ttargetRay.angularVelocity.copy( inputPose.angularVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _moveEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DepthTexture extends Texture {\n\n\tconstructor( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedIntType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isDepthTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n\n}\n\nclass WebXRManager extends EventDispatcher {\n\n\tconstructor( renderer, gl ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tlet session = null;\n\t\tlet framebufferScaleFactor = 1.0;\n\n\t\tlet referenceSpace = null;\n\t\tlet referenceSpaceType = 'local-floor';\n\t\tlet customReferenceSpace = null;\n\n\t\tlet pose = null;\n\t\tlet glBinding = null;\n\t\tlet glProjLayer = null;\n\t\tlet glBaseLayer = null;\n\t\tlet xrFrame = null;\n\t\tconst attributes = gl.getContextAttributes();\n\t\tlet initialRenderTarget = null;\n\t\tlet newRenderTarget = null;\n\n\t\tconst controllers = [];\n\t\tconst controllerInputSources = [];\n\n\t\t//\n\n\t\tconst cameraL = new PerspectiveCamera();\n\t\tcameraL.layers.enable( 1 );\n\t\tcameraL.viewport = new Vector4();\n\n\t\tconst cameraR = new PerspectiveCamera();\n\t\tcameraR.layers.enable( 2 );\n\t\tcameraR.viewport = new Vector4();\n\n\t\tconst cameras = [ cameraL, cameraR ];\n\n\t\tconst cameraVR = new ArrayCamera();\n\t\tcameraVR.layers.enable( 1 );\n\t\tcameraVR.layers.enable( 2 );\n\n\t\tlet _currentDepthNear = null;\n\t\tlet _currentDepthFar = null;\n\n\t\t//\n\n\t\tthis.cameraAutoUpdate = true;\n\t\tthis.enabled = false;\n\n\t\tthis.isPresenting = false;\n\n\t\tthis.getController = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getTargetRaySpace();\n\n\t\t};\n\n\t\tthis.getControllerGrip = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getGripSpace();\n\n\t\t};\n\n\t\tthis.getHand = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getHandSpace();\n\n\t\t};\n\n\t\t//\n\n\t\tfunction onSessionEvent( event ) {\n\n\t\t\tconst controllerIndex = controllerInputSources.indexOf( event.inputSource );\n\n\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\tif ( controller !== undefined ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onSessionEnd() {\n\n\t\t\tsession.removeEventListener( 'select', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'end', onSessionEnd );\n\t\t\tsession.removeEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\n\t\t\t\tif ( inputSource === null ) continue;\n\n\t\t\t\tcontrollerInputSources[ i ] = null;\n\n\t\t\t\tcontrollers[ i ].disconnect( inputSource );\n\n\t\t\t}\n\n\t\t\t_currentDepthNear = null;\n\t\t\t_currentDepthFar = null;\n\n\t\t\t// restore framebuffer/rendering state\n\n\t\t\trenderer.setRenderTarget( initialRenderTarget );\n\n\t\t\tglBaseLayer = null;\n\t\t\tglProjLayer = null;\n\t\t\tglBinding = null;\n\t\t\tsession = null;\n\t\t\tnewRenderTarget = null;\n\n\t\t\t//\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.isPresenting = false;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\t\tframebufferScaleFactor = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\t\treferenceSpaceType = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getReferenceSpace = function () {\n\n\t\t\treturn customReferenceSpace || referenceSpace;\n\n\t\t};\n\n\t\tthis.setReferenceSpace = function ( space ) {\n\n\t\t\tcustomReferenceSpace = space;\n\n\t\t};\n\n\t\tthis.getBaseLayer = function () {\n\n\t\t\treturn glProjLayer !== null ? glProjLayer : glBaseLayer;\n\n\t\t};\n\n\t\tthis.getBinding = function () {\n\n\t\t\treturn glBinding;\n\n\t\t};\n\n\t\tthis.getFrame = function () {\n\n\t\t\treturn xrFrame;\n\n\t\t};\n\n\t\tthis.getSession = function () {\n\n\t\t\treturn session;\n\n\t\t};\n\n\t\tthis.setSession = async function ( value ) {\n\n\t\t\tsession = value;\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\tinitialRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( session.renderState.layers === undefined ) || ( renderer.capabilities.isWebGL2 === false ) ) {\n\n\t\t\t\t\tconst layerInit = {\n\t\t\t\t\t\tantialias: ( session.renderState.layers === undefined ) ? attributes.antialias : true,\n\t\t\t\t\t\talpha: attributes.alpha,\n\t\t\t\t\t\tdepth: attributes.depth,\n\t\t\t\t\t\tstencil: attributes.stencil,\n\t\t\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBaseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\t\t\tsession.updateRenderState( { baseLayer: glBaseLayer } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglBaseLayer.framebufferWidth,\n\t\t\t\t\t\tglBaseLayer.framebufferHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet depthFormat = null;\n\t\t\t\t\tlet depthType = null;\n\t\t\t\t\tlet glDepthFormat = null;\n\n\t\t\t\t\tif ( attributes.depth ) {\n\n\t\t\t\t\t\tglDepthFormat = attributes.stencil ? 35056 : 33190;\n\t\t\t\t\t\tdepthFormat = attributes.stencil ? DepthStencilFormat : DepthFormat;\n\t\t\t\t\t\tdepthType = attributes.stencil ? UnsignedInt248Type : UnsignedIntType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst projectionlayerInit = {\n\t\t\t\t\t\tcolorFormat: 32856,\n\t\t\t\t\t\tdepthFormat: glDepthFormat,\n\t\t\t\t\t\tscaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBinding = new XRWebGLBinding( session, gl );\n\n\t\t\t\t\tglProjLayer = glBinding.createProjectionLayer( projectionlayerInit );\n\n\t\t\t\t\tsession.updateRenderState( { layers: [ glProjLayer ] } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglProjLayer.textureWidth,\n\t\t\t\t\t\tglProjLayer.textureHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tdepthTexture: new DepthTexture( glProjLayer.textureWidth, glProjLayer.textureHeight, depthType, undefined, undefined, undefined, undefined, undefined, undefined, depthFormat ),\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil,\n\t\t\t\t\t\t\tencoding: renderer.outputEncoding,\n\t\t\t\t\t\t\tsamples: attributes.antialias ? 4 : 0\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tconst renderTargetProperties = renderer.properties.get( newRenderTarget );\n\t\t\t\t\trenderTargetProperties.__ignoreDepthValues = glProjLayer.ignoreDepthValues;\n\n\t\t\t\t}\n\n\t\t\t\tnewRenderTarget.isXRRenderTarget = true; // TODO Remove this when possible, see #23278\n\n\t\t\t\t// Set foveation to maximum.\n\t\t\t\tthis.setFoveation( 1.0 );\n\n\t\t\t\tcustomReferenceSpace = null;\n\t\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\t\tanimation.setContext( session );\n\t\t\t\tanimation.start();\n\n\t\t\t\tscope.isPresenting = true;\n\n\t\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction onInputSourcesChange( event ) {\n\n\t\t\t// Notify disconnected\n\n\t\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.removed[ i ];\n\t\t\t\tconst index = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( index >= 0 ) {\n\n\t\t\t\t\tcontrollerInputSources[ index ] = null;\n\t\t\t\t\tcontrollers[ index ].dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Notify connected\n\n\t\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.added[ i ];\n\n\t\t\t\tlet controllerIndex = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\t\t// Assign input source a controller that currently has no input source\n\n\t\t\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( i >= controllerInputSources.length ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources.push( inputSource );\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t} else if ( controllerInputSources[ i ] === null ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources[ i ] = inputSource;\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// If all controllers do currently receive input we ignore new ones\n\n\t\t\t\t\tif ( controllerIndex === - 1 ) break;\n\n\t\t\t\t}\n\n\t\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\t\tif ( controller ) {\n\n\t\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst cameraLPos = new Vector3();\n\t\tconst cameraRPos = new Vector3();\n\n\t\t/**\n\t\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t\t * the cameras' projection and world matrices have already been set.\n\t\t * And that near and far planes are identical for both cameras.\n\t\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t\t */\n\t\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t\t// VR systems will have identical far and near planes, and\n\t\t\t// most likely identical top and bottom frustum extents.\n\t\t\t// Use the left camera for these values.\n\t\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\t\tconst left = near * leftFov;\n\t\t\tconst right = near * rightFov;\n\n\t\t\t// Calculate the new camera's position offset from the\n\t\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t\t// TODO: Better way to apply this offset?\n\t\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.translateX( xOffset );\n\t\t\tcamera.translateZ( zOffset );\n\t\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t\t// Find the union of the frustum values of the cameras and scale\n\t\t\t// the values so that the near plane's position does not change in world space,\n\t\t\t// although must now be relative to the new union camera.\n\t\t\tconst near2 = near + zOffset;\n\t\t\tconst far2 = far + zOffset;\n\t\t\tconst left2 = left - xOffset;\n\t\t\tconst right2 = right + ( ipd - xOffset );\n\t\t\tconst top2 = topFov * far / far2 * near2;\n\t\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t\t}\n\n\t\tfunction updateCamera( camera, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t\t}\n\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t}\n\n\t\tthis.updateCamera = function ( camera ) {\n\n\t\t\tif ( session === null ) return;\n\n\t\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\t\tsession.updateRenderState( {\n\t\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\t\tdepthFar: cameraVR.far\n\t\t\t\t} );\n\n\t\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t\t}\n\n\t\t\tconst parent = camera.parent;\n\t\t\tconst cameras = cameraVR.cameras;\n\n\t\t\tupdateCamera( cameraVR, parent );\n\n\t\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t\t}\n\n\t\t\tcameraVR.matrixWorld.decompose( cameraVR.position, cameraVR.quaternion, cameraVR.scale );\n\n\t\t\t// update user camera and its children\n\n\t\t\tcamera.position.copy( cameraVR.position );\n\t\t\tcamera.quaternion.copy( cameraVR.quaternion );\n\t\t\tcamera.scale.copy( cameraVR.scale );\n\t\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\t\tconst children = camera.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t\t// update projection matrix for proper view frustum culling\n\n\t\t\tif ( cameras.length === 2 ) {\n\n\t\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t\t} else {\n\n\t\t\t\t// assume single camera setup (AR)\n\n\t\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getCamera = function () {\n\n\t\t\treturn cameraVR;\n\n\t\t};\n\n\t\tthis.getFoveation = function () {\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\treturn glProjLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\treturn glBaseLayer.fixedFoveation;\n\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t};\n\n\t\tthis.setFoveation = function ( foveation ) {\n\n\t\t\t// 0 = no foveation = full resolution\n\t\t\t// 1 = maximum foveation = the edges render at lower resolution\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\tglProjLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined ) {\n\n\t\t\t\tglBaseLayer.fixedFoveation = foveation;\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time, frame ) {\n\n\t\t\tpose = frame.getViewerPose( customReferenceSpace || referenceSpace );\n\t\t\txrFrame = frame;\n\n\t\t\tif ( pose !== null ) {\n\n\t\t\t\tconst views = pose.views;\n\n\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\trenderer.setRenderTargetFramebuffer( newRenderTarget, glBaseLayer.framebuffer );\n\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\t\tconst view = views[ i ];\n\n\t\t\t\t\tlet viewport = null;\n\n\t\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\t\tviewport = glBaseLayer.getViewport( view );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst glSubImage = glBinding.getViewSubImage( glProjLayer, view );\n\t\t\t\t\t\tviewport = glSubImage.viewport;\n\n\t\t\t\t\t\t// For side-by-side projection, we only produce a single texture for both eyes.\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\trenderer.setRenderTargetTextures(\n\t\t\t\t\t\t\t\tnewRenderTarget,\n\t\t\t\t\t\t\t\tglSubImage.colorTexture,\n\t\t\t\t\t\t\t\tglProjLayer.ignoreDepthValues ? undefined : glSubImage.depthStencilTexture );\n\n\t\t\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet camera = cameras[ i ];\n\n\t\t\t\t\tif ( camera === undefined ) {\n\n\t\t\t\t\t\tcamera = new PerspectiveCamera();\n\t\t\t\t\t\tcamera.layers.enable( i );\n\t\t\t\t\t\tcamera.viewport = new Vector4();\n\t\t\t\t\t\tcameras[ i ] = camera;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\t\t\t\tconst controller = controllers[ i ];\n\n\t\t\t\tif ( inputSource !== null && controller !== undefined ) {\n\n\t\t\t\t\tcontroller.update( inputSource, frame, customReferenceSpace || referenceSpace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t\t\txrFrame = null;\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\n\t\t};\n\n\t\tthis.dispose = function () {};\n\n\t}\n\n}\n\nfunction WebGLMaterials( renderer, properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height, transmissionRenderTarget ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.ior.value = material.ior;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\n\t\t\t// artist-friendly light intensity scaling factor\n\t\t\tconst scaleFactor = ( renderer.physicallyCorrectLights !== true ) ? Math.PI : 1;\n\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity * scaleFactor;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\t\t// 13. iridescence map\n\t\t// 14. iridescence thickness map\n\t\t// 15. specular intensity map\n\t\t// 16. specular tint map\n\t\t// 17. transmission map\n\t\t// 18. thickness map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t} else if ( material.iridescenceMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceMap;\n\n\t\t} else if ( material.iridescenceThicknessMap ) {\n\n\t\t\tuvScaleMap = material.iridescenceThicknessMap;\n\n\t\t} else if ( material.specularIntensityMap ) {\n\n\t\t\tuvScaleMap = material.specularIntensityMap;\n\n\t\t} else if ( material.specularColorMap ) {\n\n\t\t\tuvScaleMap = material.specularColorMap;\n\n\t\t} else if ( material.transmissionMap ) {\n\n\t\t\tuvScaleMap = material.transmissionMap;\n\n\t\t} else if ( material.thicknessMap ) {\n\n\t\t\tuvScaleMap = material.thicknessMap;\n\n\t\t} else if ( material.sheenColorMap ) {\n\n\t\t\tuvScaleMap = material.sheenColorMap;\n\n\t\t} else if ( material.sheenRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.sheenRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, transmissionRenderTarget ) {\n\n\t\tuniforms.ior.value = material.ior; // also part of uniforms common\n\n\t\tif ( material.sheen > 0 ) {\n\n\t\t\tuniforms.sheenColor.value.copy( material.sheenColor ).multiplyScalar( material.sheen );\n\n\t\t\tuniforms.sheenRoughness.value = material.sheenRoughness;\n\n\t\t\tif ( material.sheenColorMap ) {\n\n\t\t\t\tuniforms.sheenColorMap.value = material.sheenColorMap;\n\n\t\t\t}\n\n\t\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\t\tuniforms.sheenRoughnessMap.value = material.sheenRoughnessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.clearcoat > 0 ) {\n\n\t\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\n\t\t\tif ( material.clearcoatMap ) {\n\n\t\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.iridescence > 0 ) {\n\n\t\t\tuniforms.iridescence.value = material.iridescence;\n\t\t\tuniforms.iridescenceIOR.value = material.iridescenceIOR;\n\t\t\tuniforms.iridescenceThicknessMinimum.value = material.iridescenceThicknessRange[ 0 ];\n\t\t\tuniforms.iridescenceThicknessMaximum.value = material.iridescenceThicknessRange[ 1 ];\n\n\t\t\tif ( material.iridescenceMap ) {\n\n\t\t\t\tuniforms.iridescenceMap.value = material.iridescenceMap;\n\n\t\t\t}\n\n\t\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\t\tuniforms.iridescenceThicknessMap.value = material.iridescenceThicknessMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.transmission > 0 ) {\n\n\t\t\tuniforms.transmission.value = material.transmission;\n\t\t\tuniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n\t\t\tuniforms.transmissionSamplerSize.value.set( transmissionRenderTarget.width, transmissionRenderTarget.height );\n\n\t\t\tif ( material.transmissionMap ) {\n\n\t\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t\t}\n\n\t\t\tuniforms.thickness.value = material.thickness;\n\n\t\t\tif ( material.thicknessMap ) {\n\n\t\t\t\tuniforms.thicknessMap.value = material.thicknessMap;\n\n\t\t\t}\n\n\t\t\tuniforms.attenuationDistance.value = material.attenuationDistance;\n\t\t\tuniforms.attenuationColor.value.copy( material.attenuationColor );\n\n\t\t}\n\n\t\tuniforms.specularIntensity.value = material.specularIntensity;\n\t\tuniforms.specularColor.value.copy( material.specularColor );\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tuniforms.specularIntensityMap.value = material.specularIntensityMap;\n\n\t\t}\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tuniforms.specularColorMap.value = material.specularColorMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLUniformsGroups( gl, info, capabilities, state ) {\n\n\tlet buffers = {};\n\tlet updateList = {};\n\tlet allocatedBindingPoints = [];\n\n\tconst maxBindingPoints = ( capabilities.isWebGL2 ) ? gl.getParameter( 35375 ) : 0; // binding points are global whereas block indices are per shader program\n\n\tfunction bind( uniformsGroup, program ) {\n\n\t\tconst webglProgram = program.program;\n\t\tstate.uniformBlockBinding( uniformsGroup, webglProgram );\n\n\t}\n\n\tfunction update( uniformsGroup, program ) {\n\n\t\tlet buffer = buffers[ uniformsGroup.id ];\n\n\t\tif ( buffer === undefined ) {\n\n\t\t\tprepareUniformsGroup( uniformsGroup );\n\n\t\t\tbuffer = createBuffer( uniformsGroup );\n\t\t\tbuffers[ uniformsGroup.id ] = buffer;\n\n\t\t\tuniformsGroup.addEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\t}\n\n\t\t// ensure to update the binding points/block indices mapping for this program\n\n\t\tconst webglProgram = program.program;\n\t\tstate.updateUBOMapping( uniformsGroup, webglProgram );\n\n\t\t// update UBO once per frame\n\n\t\tconst frame = info.render.frame;\n\n\t\tif ( updateList[ uniformsGroup.id ] !== frame ) {\n\n\t\t\tupdateBufferData( uniformsGroup );\n\n\t\t\tupdateList[ uniformsGroup.id ] = frame;\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( uniformsGroup ) {\n\n\t\t// the setup of an UBO is independent of a particular shader program but global\n\n\t\tconst bindingPointIndex = allocateBindingPointIndex();\n\t\tuniformsGroup.__bindingPointIndex = bindingPointIndex;\n\n\t\tconst buffer = gl.createBuffer();\n\t\tconst size = uniformsGroup.__size;\n\t\tconst usage = uniformsGroup.usage;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\t\tgl.bufferData( 35345, size, usage );\n\t\tgl.bindBuffer( 35345, null );\n\t\tgl.bindBufferBase( 35345, bindingPointIndex, buffer );\n\n\t\treturn buffer;\n\n\t}\n\n\tfunction allocateBindingPointIndex() {\n\n\t\tfor ( let i = 0; i < maxBindingPoints; i ++ ) {\n\n\t\t\tif ( allocatedBindingPoints.indexOf( i ) === - 1 ) {\n\n\t\t\t\tallocatedBindingPoints.push( i );\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.error( 'THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.' );\n\n\t\treturn 0;\n\n\t}\n\n\tfunction updateBufferData( uniformsGroup ) {\n\n\t\tconst buffer = buffers[ uniformsGroup.id ];\n\t\tconst uniforms = uniformsGroup.uniforms;\n\t\tconst cache = uniformsGroup.__cache;\n\n\t\tgl.bindBuffer( 35345, buffer );\n\n\t\tfor ( let i = 0, il = uniforms.length; i < il; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\t// partly update the buffer if necessary\n\n\t\t\tif ( hasUniformChanged( uniform, i, cache ) === true ) {\n\n\t\t\t\tconst value = uniform.value;\n\t\t\t\tconst offset = uniform.__offset;\n\n\t\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\t\tuniform.__data[ 0 ] = value;\n\t\t\t\t\tgl.bufferSubData( 35345, offset, uniform.__data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( uniform.value.isMatrix3 ) {\n\n\t\t\t\t\t\t// manually converting 3x3 to 3x4\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 1 ] = uniform.value.elements[ 1 ];\n\t\t\t\t\t\tuniform.__data[ 2 ] = uniform.value.elements[ 2 ];\n\t\t\t\t\t\tuniform.__data[ 3 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 4 ] = uniform.value.elements[ 3 ];\n\t\t\t\t\t\tuniform.__data[ 5 ] = uniform.value.elements[ 4 ];\n\t\t\t\t\t\tuniform.__data[ 6 ] = uniform.value.elements[ 5 ];\n\t\t\t\t\t\tuniform.__data[ 7 ] = uniform.value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 8 ] = uniform.value.elements[ 6 ];\n\t\t\t\t\t\tuniform.__data[ 9 ] = uniform.value.elements[ 7 ];\n\t\t\t\t\t\tuniform.__data[ 10 ] = uniform.value.elements[ 8 ];\n\t\t\t\t\t\tuniform.__data[ 11 ] = uniform.value.elements[ 0 ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvalue.toArray( uniform.__data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgl.bufferSubData( 35345, offset, uniform.__data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgl.bindBuffer( 35345, null );\n\n\t}\n\n\tfunction hasUniformChanged( uniform, index, cache ) {\n\n\t\tconst value = uniform.value;\n\n\t\tif ( cache[ index ] === undefined ) {\n\n\t\t\t// cache entry does not exist so far\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tcache[ index ] = value;\n\n\t\t\t} else {\n\n\t\t\t\tcache[ index ] = value.clone();\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\t// compare current value with cached entry\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tif ( cache[ index ] !== value ) {\n\n\t\t\t\t\tcache[ index ] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst cachedObject = cache[ index ];\n\n\t\t\t\tif ( cachedObject.equals( value ) === false ) {\n\n\t\t\t\t\tcachedObject.copy( value );\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction prepareUniformsGroup( uniformsGroup ) {\n\n\t\t// determine total buffer size according to the STD140 layout\n\t\t// Hint: STD140 is the only supported layout in WebGL 2\n\n\t\tconst uniforms = uniformsGroup.uniforms;\n\n\t\tlet offset = 0; // global buffer offset in bytes\n\t\tconst chunkSize = 16; // size of a chunk in bytes\n\t\tlet chunkOffset = 0; // offset within a single chunk in bytes\n\n\t\tfor ( let i = 0, l = uniforms.length; i < l; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\t\t\tconst info = getUniformSize( uniform );\n\n\t\t\t// the following two properties will be used for partial buffer updates\n\n\t\t\tuniform.__data = new Float32Array( info.storage / Float32Array.BYTES_PER_ELEMENT );\n\t\t\tuniform.__offset = offset;\n\n\t\t\t//\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\tchunkOffset = offset % chunkSize;\n\n\t\t\t\tconst remainingSizeInChunk = chunkSize - chunkOffset;\n\n\t\t\t\t// check for chunk overflow\n\n\t\t\t\tif ( chunkOffset !== 0 && ( remainingSizeInChunk - info.boundary ) < 0 ) {\n\n\t\t\t\t\t// add padding and adjust offset\n\n\t\t\t\t\toffset += ( chunkSize - chunkOffset );\n\t\t\t\t\tuniform.__offset = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset += info.storage;\n\n\t\t}\n\n\t\t// ensure correct final padding\n\n\t\tchunkOffset = offset % chunkSize;\n\n\t\tif ( chunkOffset > 0 ) offset += ( chunkSize - chunkOffset );\n\n\t\t//\n\n\t\tuniformsGroup.__size = offset;\n\t\tuniformsGroup.__cache = {};\n\n\t\treturn this;\n\n\t}\n\n\tfunction getUniformSize( uniform ) {\n\n\t\tconst value = uniform.value;\n\n\t\tconst info = {\n\t\t\tboundary: 0, // bytes\n\t\t\tstorage: 0 // bytes\n\t\t};\n\n\t\t// determine sizes according to STD140\n\n\t\tif ( typeof value === 'number' ) {\n\n\t\t\t// float/int\n\n\t\t\tinfo.boundary = 4;\n\t\t\tinfo.storage = 4;\n\n\t\t} else if ( value.isVector2 ) {\n\n\t\t\t// vec2\n\n\t\t\tinfo.boundary = 8;\n\t\t\tinfo.storage = 8;\n\n\t\t} else if ( value.isVector3 || value.isColor ) {\n\n\t\t\t// vec3\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 12; // evil: vec3 must start on a 16-byte boundary but it only consumes 12 bytes\n\n\t\t} else if ( value.isVector4 ) {\n\n\t\t\t// vec4\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 16;\n\n\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t// mat3 (in STD140 a 3x3 matrix is represented as 3x4)\n\n\t\t\tinfo.boundary = 48;\n\t\t\tinfo.storage = 48;\n\n\t\t} else if ( value.isMatrix4 ) {\n\n\t\t\t// mat4\n\n\t\t\tinfo.boundary = 64;\n\t\t\tinfo.storage = 64;\n\n\t\t} else if ( value.isTexture ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.' );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unsupported uniform value type.', value );\n\n\t\t}\n\n\t\treturn info;\n\n\t}\n\n\tfunction onUniformsGroupsDispose( event ) {\n\n\t\tconst uniformsGroup = event.target;\n\n\t\tuniformsGroup.removeEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\tconst index = allocatedBindingPoints.indexOf( uniformsGroup.__bindingPointIndex );\n\t\tallocatedBindingPoints.splice( index, 1 );\n\n\t\tgl.deleteBuffer( buffers[ uniformsGroup.id ] );\n\n\t\tdelete buffers[ uniformsGroup.id ];\n\t\tdelete updateList[ uniformsGroup.id ];\n\n\t}\n\n\tfunction dispose() {\n\n\t\tfor ( const id in buffers ) {\n\n\t\t\tgl.deleteBuffer( buffers[ id ] );\n\n\t\t}\n\n\t\tallocatedBindingPoints = [];\n\t\tbuffers = {};\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tbind: bind,\n\t\tupdate: update,\n\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = createElementNS( 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters = {} ) {\n\n\tthis.isWebGLRenderer = true;\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet _alpha;\n\n\tif ( _context !== null ) {\n\n\t\t_alpha = _context.getContextAttributes().alpha;\n\n\t} else {\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false;\n\n\t}\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\tconst renderListStack = [];\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t//\n\n\tObject.defineProperties( this, {\n\n\t\t// @deprecated since r136, 0e21088102b4de7e0a0a33140620b7a3424b9e6d\n\n\t\tgammaFactor: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaFactor has been removed.' );\n\t\t\t\treturn 2;\n\n\t\t\t},\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaFactor has been removed.' );\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// transmission\n\n\tlet _transmissionRenderTarget = null;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector2 = new Vector2();\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: true,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// OffscreenCanvas does not have setAttribute, see #22811\n\t\tif ( 'setAttribute' in _canvas ) _canvas.setAttribute( 'data-engine', `three.js r${REVISION}` );\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.addEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping, shadowMap;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates, uniformsGroups;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\n\t\tinfo = new WebGLInfo();\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tcubeuvmaps = new WebGLCubeUVMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl, capabilities, textures );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( _this, properties );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _alpha, _premultipliedAlpha );\n\t\tshadowMap = new WebGLShadowMap( _this, objects, capabilities );\n\t\tuniformsGroups = new WebGLUniformsGroups( _gl, info, capabilities, state );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.shadowMap = shadowMap;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color = true, depth = true, stencil = true ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color ) bits |= 16384;\n\t\tif ( depth ) bits |= 256;\n\t\tif ( stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t_canvas.removeEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tcubeuvmaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\t\tuniformsGroups.dispose();\n\t\tprogramCache.dispose();\n\n\t\txr.dispose();\n\n\t\txr.removeEventListener( 'sessionstart', onXRSessionStart );\n\t\txr.removeEventListener( 'sessionend', onXRSessionEnd );\n\n\t\tif ( _transmissionRenderTarget ) {\n\n\t\t\t_transmissionRenderTarget.dispose();\n\t\t\t_transmissionRenderTarget = null;\n\n\t\t}\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tconst infoAutoReset = info.autoReset;\n\t\tconst shadowMapEnabled = shadowMap.enabled;\n\t\tconst shadowMapAutoUpdate = shadowMap.autoUpdate;\n\t\tconst shadowMapNeedsUpdate = shadowMap.needsUpdate;\n\t\tconst shadowMapType = shadowMap.type;\n\n\t\tinitGLContext();\n\n\t\tinfo.autoReset = infoAutoReset;\n\t\tshadowMap.enabled = shadowMapEnabled;\n\t\tshadowMap.autoUpdate = shadowMapAutoUpdate;\n\t\tshadowMap.needsUpdate = shadowMapNeedsUpdate;\n\t\tshadowMap.type = shadowMapType;\n\n\t}\n\n\tfunction onContextCreationError( event ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: A WebGL context could not be created. Reason: ', event.statusMessage );\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReferences( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReferences( material ) {\n\n\t\tconst programs = properties.get( material ).programs;\n\n\t\tif ( programs !== undefined ) {\n\n\t\t\tprograms.forEach( function ( program ) {\n\n\t\t\t\tprogramCache.releaseProgram( program );\n\n\t\t\t} );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tprogramCache.releaseShaderCache( material );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, geometry, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tgetProgram( material2, scene, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\trenderStateStack.pop();\n\t\tcurrentRenderState = null;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tfunction onXRSessionStart() {\n\n\t\tanimation.stop();\n\n\t}\n\n\tfunction onXRSessionEnd() {\n\n\t\tanimation.start();\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof self !== 'undefined' ) animation.setContext( self );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\txr.addEventListener( 'sessionstart', onXRSessionStart );\n\txr.addEventListener( 'sessionend', onXRSessionEnd );\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tif ( xr.cameraAutoUpdate === true ) xr.updateCamera( camera );\n\n\t\t\tcamera = xr.getCamera(); // use XR camera for rendering\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\tcurrentRenderList.init();\n\n\t\trenderListStack.push( currentRenderList );\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene );\n\n\t\t// render scene\n\n\t\tcurrentRenderState.setupLights( _this.physicallyCorrectLights );\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tconst cameras = camera.cameras;\n\n\t\t\tfor ( let i = 0, l = cameras.length; i < l; i ++ ) {\n\n\t\t\t\tconst camera2 = cameras[ i ];\n\n\t\t\t\trenderScene( currentRenderList, scene, camera2, camera2.viewport );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderScene( currentRenderList, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t// _gl.finish();\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\trenderStateStack.pop();\n\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\trenderListStack.pop();\n\n\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderList = null;\n\n\t\t}\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderScene( currentRenderList, scene, camera, viewport ) {\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transmissiveObjects = currentRenderList.transmissive;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( transmissiveObjects.length > 0 ) renderTransmissionPass( opaqueObjects, scene, camera );\n\n\t\tif ( viewport ) state.viewport( _currentViewport.copy( viewport ) );\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transmissiveObjects.length > 0 ) renderObjects( transmissiveObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t}\n\n\tfunction renderTransmissionPass( opaqueObjects, scene, camera ) {\n\n\t\tconst isWebGL2 = capabilities.isWebGL2;\n\n\t\tif ( _transmissionRenderTarget === null ) {\n\n\t\t\t_transmissionRenderTarget = new WebGLRenderTarget( 1, 1, {\n\t\t\t\tgenerateMipmaps: true,\n\t\t\t\ttype: extensions.has( 'EXT_color_buffer_half_float' ) ? HalfFloatType : UnsignedByteType,\n\t\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\t\tsamples: ( isWebGL2 && _antialias === true ) ? 4 : 0\n\t\t\t} );\n\n\t\t}\n\n\t\t_this.getDrawingBufferSize( _vector2 );\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\t_transmissionRenderTarget.setSize( _vector2.x, _vector2.y );\n\n\t\t} else {\n\n\t\t\t_transmissionRenderTarget.setSize( floorPowerOfTwo( _vector2.x ), floorPowerOfTwo( _vector2.y ) );\n\n\t\t}\n\n\t\t//\n\n\t\tconst currentRenderTarget = _this.getRenderTarget();\n\t\t_this.setRenderTarget( _transmissionRenderTarget );\n\t\t_this.clear();\n\n\t\t// Turn off the features which can affect the frag color for opaque objects pass.\n\t\t// Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\t\tconst currentToneMapping = _this.toneMapping;\n\t\t_this.toneMapping = NoToneMapping;\n\n\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t_this.toneMapping = currentToneMapping;\n\n\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t_this.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tmaterial.onBeforeRender( _this, scene, camera, geometry, object, group );\n\n\t\tif ( material.transparent === true && material.side === DoubleSide ) {\n\n\t\t\tmaterial.side = BackSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = FrontSide;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\tmaterial.side = DoubleSide;\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction getProgram( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet programs = materialProperties.programs;\n\n\t\t// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || materialProperties.environment );\n\n\t\tif ( programs === undefined ) {\n\n\t\t\t// new material\n\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tprograms = new Map();\n\t\t\tmaterialProperties.programs = programs;\n\n\t\t}\n\n\t\tlet program = programs.get( programCacheKey );\n\n\t\tif ( program !== undefined ) {\n\n\t\t\t// early out if program and light state is identical\n\n\t\t\tif ( materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion ) {\n\n\t\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t\treturn program;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBuild( object, parameters, _this );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\t\t\tprograms.set( programCacheKey, program );\n\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ( ! material.isShaderMaterial && ! material.isRawShaderMaterial ) || material.clipping === true ) {\n\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.currentProgram = program;\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t\treturn program;\n\n\t}\n\n\tfunction updateCommonMaterialProperties( material, parameters ) {\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\t\tmaterialProperties.instancing = parameters.instancing;\n\t\tmaterialProperties.skinning = parameters.skinning;\n\t\tmaterialProperties.morphTargets = parameters.morphTargets;\n\t\tmaterialProperties.morphNormals = parameters.morphNormals;\n\t\tmaterialProperties.morphColors = parameters.morphColors;\n\t\tmaterialProperties.morphTargetsCount = parameters.morphTargetsCount;\n\t\tmaterialProperties.numClippingPlanes = parameters.numClippingPlanes;\n\t\tmaterialProperties.numIntersection = parameters.numClipIntersection;\n\t\tmaterialProperties.vertexAlphas = parameters.vertexAlphas;\n\t\tmaterialProperties.vertexTangents = parameters.vertexTangents;\n\t\tmaterialProperties.toneMapping = parameters.toneMapping;\n\n\t}\n\n\tfunction setProgram( camera, scene, geometry, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : ( _currentRenderTarget.isXRRenderTarget === true ? _currentRenderTarget.texture.encoding : LinearEncoding );\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst vertexAlphas = material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4;\n\t\tconst vertexTangents = !! material.normalMap && !! geometry.attributes.tangent;\n\t\tconst morphTargets = !! geometry.morphAttributes.position;\n\t\tconst morphNormals = !! geometry.morphAttributes.normal;\n\t\tconst morphColors = !! geometry.morphAttributes.color;\n\t\tconst toneMapping = material.toneMapped ? _this.toneMapping : NoToneMapping;\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet needsProgramChange = false;\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancing === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isInstancedMesh && materialProperties.instancing === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( object.isSkinnedMesh && materialProperties.skinning === false ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( ! object.isSkinnedMesh && materialProperties.skinning === true ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( material.fog === true && materialProperties.fog !== fog ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexAlphas !== vertexAlphas ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.vertexTangents !== vertexTangents ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphTargets !== morphTargets ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphNormals !== morphNormals ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.morphColors !== morphColors ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( materialProperties.toneMapping !== toneMapping ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t} else if ( capabilities.isWebGL2 === true && materialProperties.morphTargetsCount !== morphTargetsCount ) {\n\n\t\t\t\tneedsProgramChange = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tneedsProgramChange = true;\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\t//\n\n\t\tlet program = materialProperties.currentProgram;\n\n\t\tif ( needsProgramChange === true ) {\n\n\t\t\tprogram = getProgram( material, scene, object );\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst p_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tobject.isSkinnedMesh ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning and morph target uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone and morph texture must go before other textures\n\t\t// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) skeleton.computeBoneTexture();\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tif ( morphAttributes.position !== undefined || morphAttributes.normal !== undefined || ( morphAttributes.color !== undefined && capabilities.isWebGL2 === true ) ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog === true ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t// UBOs\n\n\t\tif ( material.isShaderMaterial || material.isRawShaderMaterial ) {\n\n\t\t\tconst groups = material.uniformsGroups;\n\n\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\t\tuniformsGroups.update( group, program );\n\t\t\t\t\tuniformsGroups.bind( group, program );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTargetTextures = function ( renderTarget, colorTexture, depthTexture ) {\n\n\t\tproperties.get( renderTarget.texture ).__webglTexture = colorTexture;\n\t\tproperties.get( renderTarget.depthTexture ).__webglTexture = depthTexture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__hasExternalTextures = true;\n\n\t\tif ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\trenderTargetProperties.__autoAllocateDepthBuffer = depthTexture === undefined;\n\n\t\t\tif ( ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\t\t// The multisample_render_to_texture extension doesn't work properly if there\n\t\t\t\t// are midframe flushes and an external depth buffer. Disable use of the extension.\n\t\t\t\tif ( extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided' );\n\t\t\t\t\trenderTargetProperties.__useRenderToTexture = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.setRenderTargetFramebuffer = function ( renderTarget, defaultFramebuffer ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\trenderTargetProperties.__webglFramebuffer = defaultFramebuffer;\n\t\trenderTargetProperties.__useDefaultFramebuffer = defaultFramebuffer === undefined;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tlet useDefaultFramebuffer = true;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( renderTargetProperties.__useDefaultFramebuffer !== undefined ) {\n\n\t\t\t\t// We need to make sure to rebind the framebuffer.\n\t\t\t\tstate.bindFramebuffer( 36160, null );\n\t\t\t\tuseDefaultFramebuffer = false;\n\n\t\t\t} else if ( renderTargetProperties.__webglFramebuffer === undefined ) {\n\n\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t} else if ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\t// Color and depth texture must be rebound in order for the swapchain to update.\n\t\t\t\ttextures.rebindTextures( renderTarget, properties.get( renderTarget.texture ).__webglTexture, properties.get( renderTarget.depthTexture ).__webglTexture );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet framebuffer = null;\n\t\tlet isCube = false;\n\t\tlet isRenderTarget3D = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tif ( texture.isData3DTexture || texture.isDataArrayTexture ) {\n\n\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t}\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( ( capabilities.isWebGL2 && renderTarget.samples > 0 ) && textures.useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tconst framebufferBound = state.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( framebufferBound && capabilities.drawBuffers && useDefaultFramebuffer ) {\n\n\t\t\tstate.drawBuffers( renderTarget, framebuffer );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t_gl.framebufferTextureLayer( 36160, 36064, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t}\n\n\t\t_currentMaterialId = - 1; // reset current material to ensure correct uniform bindings\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\t// restore framebuffer of current render target if necessary\n\n\t\t\t\tconst framebuffer = ( _currentRenderTarget !== null ) ? properties.get( _currentRenderTarget ).__webglFramebuffer : null;\n\t\t\t\tstate.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexSubImage2D( 3553, level, 0, 0, position.x, position.y, width, height );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst width = sourceBox.max.x - sourceBox.min.x + 1;\n\t\tconst height = sourceBox.max.y - sourceBox.min.y + 1;\n\t\tconst depth = sourceBox.max.z - sourceBox.min.z + 1;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\t\tlet glTarget;\n\n\t\tif ( dstTexture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\tglTarget = 32879;\n\n\t\t} else if ( dstTexture.isDataArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\tglTarget = 35866;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tconst unpackRowLen = _gl.getParameter( 3314 );\n\t\tconst unpackImageHeight = _gl.getParameter( 32878 );\n\t\tconst unpackSkipPixels = _gl.getParameter( 3316 );\n\t\tconst unpackSkipRows = _gl.getParameter( 3315 );\n\t\tconst unpackSkipImages = _gl.getParameter( 32877 );\n\n\t\tconst image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[ 0 ] : srcTexture.image;\n\n\t\t_gl.pixelStorei( 3314, image.width );\n\t\t_gl.pixelStorei( 32878, image.height );\n\t\t_gl.pixelStorei( 3316, sourceBox.min.x );\n\t\t_gl.pixelStorei( 3315, sourceBox.min.y );\n\t\t_gl.pixelStorei( 32877, sourceBox.min.z );\n\n\t\tif ( srcTexture.isDataTexture || srcTexture.isData3DTexture ) {\n\n\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.' );\n\t\t\t\t_gl.compressedTexSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.pixelStorei( 3314, unpackRowLen );\n\t\t_gl.pixelStorei( 32878, unpackImageHeight );\n\t\t_gl.pixelStorei( 3316, unpackSkipPixels );\n\t\t_gl.pixelStorei( 3315, unpackSkipRows );\n\t\t_gl.pixelStorei( 32877, unpackSkipImages );\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\ttextures.setTextureCube( texture, 0 );\n\n\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\ttextures.setTexture3D( texture, 0 );\n\n\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\ttextures.setTexture2DArray( texture, 0 );\n\n\t\t} else {\n\n\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\t_currentActiveCubeFace = 0;\n\t\t_currentActiveMipmapLevel = 0;\n\t\t_currentRenderTarget = null;\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass FogExp2 {\n\n\tconstructor( color, density = 0.00025 ) {\n\n\t\tthis.isFogExp2 = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = density;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near = 1, far = 1000 ) {\n\n\t\tthis.isFog = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isScene = true;\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nconst _vector$6 = /*@__PURE__*/ new Vector3();\n\nclass InterleavedBufferAttribute {\n\n\tconstructor( interleavedBuffer, itemSize, offset, normalized = false ) {\n\n\t\tthis.isInterleavedBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized === true;\n\n\t}\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t}\n\n\tget array() {\n\n\t\treturn this.data.array;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tthis.data.needsUpdate = value;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.fromBufferAttribute( this, i );\n\n\t\t\t_vector$6.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t}\n\n\tgetY( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t}\n\n\tgetZ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t}\n\n\tgetW( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interleaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nclass SpriteMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isSpriteMaterial = true;\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet _geometry;\n\nconst _intersectPoint = /*@__PURE__*/ new Vector3();\nconst _worldScale = /*@__PURE__*/ new Vector3();\nconst _mvPosition = /*@__PURE__*/ new Vector3();\n\nconst _alignedPosition = /*@__PURE__*/ new Vector2();\nconst _rotatedPosition = /*@__PURE__*/ new Vector2();\nconst _viewWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _vA = /*@__PURE__*/ new Vector3();\nconst _vB = /*@__PURE__*/ new Vector3();\nconst _vC = /*@__PURE__*/ new Vector3();\n\nconst _uvA = /*@__PURE__*/ new Vector2();\nconst _uvB = /*@__PURE__*/ new Vector2();\nconst _uvC = /*@__PURE__*/ new Vector2();\n\nclass Sprite extends Object3D {\n\n\tconstructor( material ) {\n\n\t\tsuper();\n\n\t\tthis.isSprite = true;\n\n\t\tthis.type = 'Sprite';\n\n\t\tif ( _geometry === undefined ) {\n\n\t\t\t_geometry = new BufferGeometry();\n\n\t\t\tconst float32Array = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t\t] );\n\n\t\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t\t}\n\n\t\tthis.geometry = _geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$2 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$2 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$2.distanceTo( _v2$1 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\n\nconst _vector$5 = /*@__PURE__*/ new Vector3();\nconst _matrix = /*@__PURE__*/ new Matrix4();\n\nclass SkinnedMesh extends Mesh {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkinnedMesh = true;\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = 'attached';\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t}\n\n\tbind( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t}\n\n\tpose() {\n\n\t\tthis.skeleton.pose();\n\n\t}\n\n\tnormalizeSkinWeights() {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.fromBufferAttribute( skinWeight, i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t}\n\n\tboneTransform( index, target ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.copy( target ).applyMatrix4( this.bindMatrix );\n\n\t\ttarget.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\ttarget.addScaledVector( _vector$5.copy( _basePosition ).applyMatrix4( _matrix ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n}\n\nclass Bone extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBone = true;\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n}\n\nclass DataTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, format, type, mapping, wrapS, wrapT, magFilter = NearestFilter, minFilter = NearestFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isDataTexture = true;\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\t\tthis.boneTextureSize = 0;\n\n\t\tthis.frame = - 1;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tcomputeBoneTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = ceilPowerOfTwo( size );\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tboneMatrices.set( this.boneMatrices ); // copy current values\n\n\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\tboneTexture.needsUpdate = true;\n\n\t\tthis.boneMatrices = boneMatrices;\n\t\tthis.boneTexture = boneTexture;\n\t\tthis.boneTextureSize = size;\n\n\t\treturn this;\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InstancedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized, meshPerAttribute = 1 ) {\n\n\t\tif ( typeof normalized === 'number' ) {\n\n\t\t\tmeshPerAttribute = normalized;\n\n\t\t\tnormalized = false;\n\n\t\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t\t}\n\n\t\tsuper( array, itemSize, normalized );\n\n\t\tthis.isInstancedBufferAttribute = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = /*@__PURE__*/ new Matrix4();\nconst _instanceWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = /*@__PURE__*/ new Mesh();\n\nclass InstancedMesh extends Mesh {\n\n\tconstructor( geometry, material, count ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isInstancedMesh = true;\n\n\t\tthis.instanceMatrix = new InstancedBufferAttribute( new Float32Array( count * 16 ), 16 );\n\t\tthis.instanceColor = null;\n\n\t\tthis.count = count;\n\n\t\tthis.frustumCulled = false;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t}\n\n\tgetColorAt( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tgetMatrixAt( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t}\n\n\tsetColorAt( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tsetMatrixAt( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass LineBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineBasicMaterial = true;\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _start$1 = /*@__PURE__*/ new Vector3();\nconst _end$1 = /*@__PURE__*/ new Vector3();\nconst _inverseMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _ray$1 = /*@__PURE__*/ new Ray();\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\n\nclass Line extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isLine = true;\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere );\n\t\t_sphere$1.applyMatrix4( matrixWorld );\n\t\t_sphere$1.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$1 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tconst a = index.getX( i );\n\t\t\t\tconst b = index.getX( i + 1 );\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nconst _start = /*@__PURE__*/ new Vector3();\nconst _end = /*@__PURE__*/ new Vector3();\n\nclass LineSegments extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments = true;\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [];\n\n\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineLoop = true;\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isPointsMaterial = true;\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _inverseMatrix = /*@__PURE__*/ new Matrix4();\nconst _ray = /*@__PURE__*/ new Ray();\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _position$2 = /*@__PURE__*/ new Vector3();\n\nclass Points extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isPoints = true;\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, il = end; i < il; i ++ ) {\n\n\t\t\t\tconst a = index.getX( i );\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\ttestPoint( _position$2, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end; i < l; i ++ ) {\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\ttestPoint( _position$2, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass VideoTexture extends Texture {\n\n\tconstructor( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isVideoTexture = true;\n\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tconst scope = this;\n\n\t\tfunction updateVideo() {\n\n\t\t\tscope.needsUpdate = true;\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass FramebufferTexture extends Texture {\n\n\tconstructor( width, height, format ) {\n\n\t\tsuper( { width, height } );\n\n\t\tthis.isFramebufferTexture = true;\n\n\t\tthis.format = format;\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.isCompressedTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nclass CanvasTexture extends Texture {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isCanvasTexture = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nclass Curve {\n\n\tconstructor() {\n\n\t\tthis.type = 'Curve';\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength() {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions = this.arcLengthDivisions ) {\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t}\n\n\tcomputeFrenetFrames( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass EllipseCurve extends Curve {\n\n\tconstructor( aX = 0, aY = 0, xRadius = 1, yRadius = 1, aStartAngle = 0, aEndAngle = Math.PI * 2, aClockwise = false, aRotation = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.isEllipseCurve = true;\n\n\t\tthis.type = 'EllipseCurve';\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation;\n\n\t}\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst point = optionalTarget || new Vector2();\n\n\t\tconst twoPi = Math.PI * 2;\n\t\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = this.aStartAngle + t * deltaAngle;\n\t\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\t\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tconst cos = Math.cos( this.aRotation );\n\t\t\tconst sin = Math.sin( this.aRotation );\n\n\t\t\tconst tx = x - this.aX;\n\t\t\tconst ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn point.set( x, y );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.aX = source.aX;\n\t\tthis.aY = source.aY;\n\n\t\tthis.xRadius = source.xRadius;\n\t\tthis.yRadius = source.yRadius;\n\n\t\tthis.aStartAngle = source.aStartAngle;\n\t\tthis.aEndAngle = source.aEndAngle;\n\n\t\tthis.aClockwise = source.aClockwise;\n\n\t\tthis.aRotation = source.aRotation;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.aX = this.aX;\n\t\tdata.aY = this.aY;\n\n\t\tdata.xRadius = this.xRadius;\n\t\tdata.yRadius = this.yRadius;\n\n\t\tdata.aStartAngle = this.aStartAngle;\n\t\tdata.aEndAngle = this.aEndAngle;\n\n\t\tdata.aClockwise = this.aClockwise;\n\n\t\tdata.aRotation = this.aRotation;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.aX = json.aX;\n\t\tthis.aY = json.aY;\n\n\t\tthis.xRadius = json.xRadius;\n\t\tthis.yRadius = json.yRadius;\n\n\t\tthis.aStartAngle = json.aStartAngle;\n\t\tthis.aEndAngle = json.aEndAngle;\n\n\t\tthis.aClockwise = json.aClockwise;\n\n\t\tthis.aRotation = json.aRotation;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass ArcCurve extends EllipseCurve {\n\n\tconstructor( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tsuper( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\tthis.isArcCurve = true;\n\n\t\tthis.type = 'ArcCurve';\n\n\t}\n\n}\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = /*@__PURE__*/ new Vector3();\nconst px = /*@__PURE__*/ new CubicPoly();\nconst py = /*@__PURE__*/ new CubicPoly();\nconst pz = /*@__PURE__*/ new CubicPoly();\n\nclass CatmullRomCurve3 extends Curve {\n\n\tconstructor( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\t\tsuper();\n\n\t\tthis.isCatmullRomCurve3 = true;\n\n\t\tthis.type = 'CatmullRomCurve3';\n\n\t\tthis.points = points;\n\t\tthis.closed = closed;\n\t\tthis.curveType = curveType;\n\t\tthis.tension = tension;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst l = points.length;\n\n\t\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tlet intPoint = Math.floor( p );\n\t\tlet weight = p - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tconst p1 = points[ intPoint % l ];\n\t\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t\t}\n\n\t\tpoint.set(\n\t\t\tpx.calc( weight ),\n\t\t\tpy.calc( weight ),\n\t\t\tpz.calc( weight )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\tthis.closed = source.closed;\n\t\tthis.curveType = source.curveType;\n\t\tthis.tension = source.tension;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\tdata.closed = this.closed;\n\t\tdata.curveType = this.curveType;\n\t\tdata.tension = this.tension;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t\t}\n\n\t\tthis.closed = json.closed;\n\t\tthis.curveType = json.curveType;\n\t\tthis.tension = json.tension;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Bezier Curves formulas obtained from\n * https://en.wikipedia.org/wiki/B%C3%A9zier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nclass CubicBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve = true;\n\n\t\tthis.type = 'CubicBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CubicBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve3 = true;\n\n\t\tthis.type = 'CubicBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve extends Curve {\n\n\tconstructor( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve = true;\n\n\t\tthis.type = 'LineCurve';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst tangent = optionalTarget || new Vector2();\n\n\t\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve3 extends Curve {\n\n\tconstructor( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve3 = true;\n\n\t\tthis.type = 'LineCurve3';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve = true;\n\n\t\tthis.type = 'QuadraticBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve3 = true;\n\n\t\tthis.type = 'QuadraticBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SplineCurve extends Curve {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isSplineCurve = true;\n\n\t\tthis.type = 'SplineCurve';\n\n\t\tthis.points = points;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst p = ( points.length - 1 ) * t;\n\n\t\tconst intPoint = Math.floor( p );\n\t\tconst weight = p - intPoint;\n\n\t\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tconst p1 = points[ intPoint ];\n\t\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tpoint.set(\n\t\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nclass CurvePath extends Curve {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'CurvePath';\n\n\t\tthis.curves = [];\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tadd( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t}\n\n\tclosePath() {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t}\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u, optionalTarget );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t}\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength() {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t}\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t}\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths() {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t}\n\n\tgetSpacedPoints( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tgetPoints( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = curve.isEllipseCurve ? divisions * 2\n\t\t\t\t: ( curve.isLineCurve || curve.isLineCurve3 ) ? 1\n\t\t\t\t\t: curve.isSplineCurve ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Path extends CurvePath {\n\n\tconstructor( points ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Path';\n\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t}\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t}\n\n\tarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tabsarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t}\n\n\tabsellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LatheGeometry extends BufferGeometry {\n\n\tconstructor( points = [ new Vector2( 0, - 0.5 ), new Vector2( 0.5, 0 ), new Vector2( 0, 0.5 ) ], segments = 12, phiStart = 0, phiLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments );\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = clamp( phiLength, 0, Math.PI * 2 );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\t\tconst initNormals = [];\n\t\tconst normals = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tconst normal = new Vector3();\n\t\tconst curNormal = new Vector3();\n\t\tconst prevNormal = new Vector3();\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\n\t\t// pre-compute normals for initial \"meridian\"\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\tswitch ( j ) {\n\n\t\t\t\tcase 0:\t\t\t\t// special handling for 1st vertex on path\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tprevNormal.copy( normal );\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ( points.length - 1 ):\t// special handling for last Vertex on path\n\n\t\t\t\t\tinitNormals.push( prevNormal.x, prevNormal.y, prevNormal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\t\t\t// default handling for all vertices in between\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tcurNormal.copy( normal );\n\n\t\t\t\t\tnormal.x += prevNormal.x;\n\t\t\t\t\tnormal.y += prevNormal.y;\n\t\t\t\t\tnormal.z += prevNormal.z;\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tprevNormal.copy( curNormal );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices, uvs and normals\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// normal\n\n\t\t\t\tconst x = initNormals[ 3 * j + 0 ] * sin;\n\t\t\t\tconst y = initNormals[ 3 * j + 1 ];\n\t\t\t\tconst z = initNormals[ 3 * j + 0 ] * cos;\n\n\t\t\t\tnormals.push( x, y, z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( c, d, b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new LatheGeometry( data.points, data.segments, data.phiStart, data.phiLength );\n\n\t}\n\n}\n\nclass CapsuleGeometry extends LatheGeometry {\n\n\tconstructor( radius = 1, length = 1, capSegments = 4, radialSegments = 8 ) {\n\n\t\tconst path = new Path();\n\t\tpath.absarc( 0, - length / 2, radius, Math.PI * 1.5, 0 );\n\t\tpath.absarc( 0, length / 2, radius, 0, Math.PI * 0.5 );\n\n\t\tsuper( path.getPoints( capSegments ), radialSegments );\n\n\t\tthis.type = 'CapsuleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: length,\n\t\t\tcapSegments: capSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CapsuleGeometry( data.radius, data.length, data.capSegments, data.radialSegments );\n\n\t}\n\n}\n\nclass CircleGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, segments = 8, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tsegments = Math.max( 3, segments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CircleGeometry( data.radius, data.segments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass CylinderGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 8, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CylinderGeometry( data.radiusTop, data.radiusBottom, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius = 1, height = 1, radialSegments = 8, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new ConeGeometry( data.radius, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass PolyhedronGeometry extends BufferGeometry {\n\n\tconstructor( vertices = [], indices = [], radius = 1, detail = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = detail + 1;\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PolyhedronGeometry( data.vertices, data.indices, data.radius, data.details );\n\n\t}\n\n}\n\nclass DodecahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (±1, ±1, ±1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, ±1/φ, ±φ)\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (±1/φ, ±φ, 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (±φ, 0, ±1/φ)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new DodecahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\nconst _triangle = /*@__PURE__*/ new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null, thresholdAngle = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry,\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\tconst precisionPoints = 4;\n\t\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\t\tconst thresholdDot = Math.cos( DEG2RAD * thresholdAngle );\n\n\t\t\tconst indexAttr = geometry.getIndex();\n\t\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\t\tconst indexArr = [ 0, 0, 0 ];\n\t\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\t\tconst hashes = new Array( 3 );\n\n\t\t\tconst edgeData = {};\n\t\t\tconst vertices = [];\n\t\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\t\tif ( indexAttr ) {\n\n\t\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t\t}\n\n\t\t\t\tconst { a, b, c } = _triangle;\n\t\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t\t// create hashes for the edge from the vertices\n\t\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t\t// skip degenerate triangles\n\t\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over every edge\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\t\tfor ( const key in edgeData ) {\n\n\t\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t\t_v1$1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\t\tvertices.push( _v1$1.x, _v1$1.y, _v1$1.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nclass Shape extends Path {\n\n\tconstructor( points ) {\n\n\t\tsuper( points );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.type = 'Shape';\n\n\t\tthis.holes = [];\n\n\t}\n\n\tgetPointsHoles( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t}\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim = 2 ) {\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode;\n\tconst hx = hole.x;\n\tconst hy = hole.y;\n\tlet qx = - Infinity, m;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // doesn't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nclass ShapeUtils {\n\n\t// calculate area of the contour polygon\n\n\tstatic area( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t}\n\n\tstatic isClockWise( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n\tstatic triangulateShape( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n}\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0.5, 0.5 ), new Vector2( - 0.5, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tconst depth = options.depth !== undefined ? options.depth : 1;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 0.2;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 0.1;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\tconst extrudePath = data.options.extrudePath;\n\n\t\tif ( extrudePath !== undefined ) {\n\n\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t}\n\n\t\treturn new ExtrudeGeometry( geometryShapes, data.options );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < Math.abs( a_x - b_x ) ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tdata.options = Object.assign( {}, options );\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\nclass IcosahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new IcosahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass OctahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new OctahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass RingGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius = 0.5, outerRadius = 1, thetaSegments = 8, phiSegments = 1, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthetaSegments = Math.max( 3, thetaSegments );\n\t\tphiSegments = Math.max( 1, phiSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new RingGeometry( data.innerRadius, data.outerRadius, data.thetaSegments, data.phiSegments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), curveSegments = 12 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\treturn new ShapeGeometry( geometryShapes, data.curveSegments );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass SphereGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, widthSegments = 32, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) );\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new SphereGeometry( data.radius, data.widthSegments, data.heightSegments, data.phiStart, data.phiLength, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass TetrahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TetrahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass TorusGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, radialSegments = 8, tubularSegments = 6, arc = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\ttubularSegments = Math.floor( tubularSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusGeometry( data.radius, data.tube, data.radialSegments, data.tubularSegments, data.arc );\n\n\t}\n\n}\n\nclass TorusKnotGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, tubularSegments = 64, radialSegments = 8, p = 2, q = 3 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\ttubularSegments = Math.floor( tubularSegments );\n\t\tradialSegments = Math.floor( radialSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segment\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusKnotGeometry( data.radius, data.tube, data.tubularSegments, data.radialSegments, data.p, data.q );\n\n\t}\n\n}\n\nclass TubeGeometry extends BufferGeometry {\n\n\tconstructor( path = new QuadraticBezierCurve3( new Vector3( - 1, - 1, 0 ), new Vector3( - 1, 1, 0 ), new Vector3( 1, 1, 0 ) ), tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\treturn new TubeGeometry(\n\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\tdata.tubularSegments,\n\t\t\tdata.radius,\n\t\t\tdata.radialSegments,\n\t\t\tdata.closed\n\t\t);\n\n\t}\n\n}\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\t// buffer\n\n\t\t\tconst vertices = [];\n\t\t\tconst edges = new Set();\n\n\t\t\t// helper variables\n\n\t\t\tconst start = new Vector3();\n\t\t\tconst end = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst groupStart = group.start;\n\t\t\t\t\tconst groupCount = group.count;\n\n\t\t\t\t\tfor ( let i = groupStart, l = ( groupStart + groupCount ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst index1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst index2 = indices.getX( i + ( j + 1 ) % 3 );\n\n\t\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\n\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n}\n\nfunction isUniqueEdge( start, end, edges ) {\n\n\tconst hash1 = `${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`;\n\tconst hash2 = `${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`; // coincident edge\n\n\tif ( edges.has( hash1 ) === true || edges.has( hash2 ) === true ) {\n\n\t\treturn false;\n\n\t} else {\n\n\t\tedges.add( hash1 );\n\t\tedges.add( hash2 );\n\t\treturn true;\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBoxGeometry: BoxGeometry,\n\tBoxBufferGeometry: BoxGeometry,\n\tCapsuleGeometry: CapsuleGeometry,\n\tCapsuleBufferGeometry: CapsuleGeometry,\n\tCircleGeometry: CircleGeometry,\n\tCircleBufferGeometry: CircleGeometry,\n\tConeGeometry: ConeGeometry,\n\tConeBufferGeometry: ConeGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tCylinderBufferGeometry: CylinderGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tDodecahedronBufferGeometry: DodecahedronGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tExtrudeBufferGeometry: ExtrudeGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tIcosahedronBufferGeometry: IcosahedronGeometry,\n\tLatheGeometry: LatheGeometry,\n\tLatheBufferGeometry: LatheGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tOctahedronBufferGeometry: OctahedronGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPlaneBufferGeometry: PlaneGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tPolyhedronBufferGeometry: PolyhedronGeometry,\n\tRingGeometry: RingGeometry,\n\tRingBufferGeometry: RingGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tShapeBufferGeometry: ShapeGeometry,\n\tSphereGeometry: SphereGeometry,\n\tSphereBufferGeometry: SphereGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTetrahedronBufferGeometry: TetrahedronGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusBufferGeometry: TorusGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTorusKnotBufferGeometry: TorusKnotGeometry,\n\tTubeGeometry: TubeGeometry,\n\tTubeBufferGeometry: TubeGeometry,\n\tWireframeGeometry: WireframeGeometry\n});\n\nclass ShadowMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShadowMaterial = true;\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.isRawShaderMaterial = true;\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nclass MeshStandardMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshStandardMaterial = true;\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 1.0;\n\t\tthis.metalness = 0.0;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhysicalMaterial extends MeshStandardMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhysicalMaterial = true;\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.clearcoatMap = null;\n\t\tthis.clearcoatRoughness = 0.0;\n\t\tthis.clearcoatRoughnessMap = null;\n\t\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\t\tthis.clearcoatNormalMap = null;\n\n\t\tthis.ior = 1.5;\n\n\t\tObject.defineProperty( this, 'reflectivity', {\n\t\t\tget: function () {\n\n\t\t\t\treturn ( clamp( 2.5 * ( this.ior - 1 ) / ( this.ior + 1 ), 0, 1 ) );\n\n\t\t\t},\n\t\t\tset: function ( reflectivity ) {\n\n\t\t\t\tthis.ior = ( 1 + 0.4 * reflectivity ) / ( 1 - 0.4 * reflectivity );\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.iridescenceMap = null;\n\t\tthis.iridescenceIOR = 1.3;\n\t\tthis.iridescenceThicknessRange = [ 100, 400 ];\n\t\tthis.iridescenceThicknessMap = null;\n\n\t\tthis.sheenColor = new Color( 0x000000 );\n\t\tthis.sheenColorMap = null;\n\t\tthis.sheenRoughness = 1.0;\n\t\tthis.sheenRoughnessMap = null;\n\n\t\tthis.transmissionMap = null;\n\n\t\tthis.thickness = 0;\n\t\tthis.thicknessMap = null;\n\t\tthis.attenuationDistance = 0.0;\n\t\tthis.attenuationColor = new Color( 1, 1, 1 );\n\n\t\tthis.specularIntensity = 1.0;\n\t\tthis.specularIntensityMap = null;\n\t\tthis.specularColor = new Color( 1, 1, 1 );\n\t\tthis.specularColorMap = null;\n\n\t\tthis._sheen = 0.0;\n\t\tthis._clearcoat = 0;\n\t\tthis._iridescence = 0;\n\t\tthis._transmission = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget sheen() {\n\n\t\treturn this._sheen;\n\n\t}\n\n\tset sheen( value ) {\n\n\t\tif ( this._sheen > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._sheen = value;\n\n\t}\n\n\tget clearcoat() {\n\n\t\treturn this._clearcoat;\n\n\t}\n\n\tset clearcoat( value ) {\n\n\t\tif ( this._clearcoat > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._clearcoat = value;\n\n\t}\n\n\tget iridescence() {\n\n\t\treturn this._iridescence;\n\n\t}\n\n\tset iridescence( value ) {\n\n\t\tif ( this._iridescence > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._iridescence = value;\n\n\t}\n\n\tget transmission() {\n\n\t\treturn this._transmission;\n\n\t}\n\n\tset transmission( value ) {\n\n\t\tif ( this._transmission > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._transmission = value;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.clearcoat = source.clearcoat;\n\t\tthis.clearcoatMap = source.clearcoatMap;\n\t\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\t\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\t\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\t\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\t\tthis.ior = source.ior;\n\n\t\tthis.iridescence = source.iridescence;\n\t\tthis.iridescenceMap = source.iridescenceMap;\n\t\tthis.iridescenceIOR = source.iridescenceIOR;\n\t\tthis.iridescenceThicknessRange = [ ...source.iridescenceThicknessRange ];\n\t\tthis.iridescenceThicknessMap = source.iridescenceThicknessMap;\n\n\t\tthis.sheen = source.sheen;\n\t\tthis.sheenColor.copy( source.sheenColor );\n\t\tthis.sheenColorMap = source.sheenColorMap;\n\t\tthis.sheenRoughness = source.sheenRoughness;\n\t\tthis.sheenRoughnessMap = source.sheenRoughnessMap;\n\n\t\tthis.transmission = source.transmission;\n\t\tthis.transmissionMap = source.transmissionMap;\n\n\t\tthis.thickness = source.thickness;\n\t\tthis.thicknessMap = source.thicknessMap;\n\t\tthis.attenuationDistance = source.attenuationDistance;\n\t\tthis.attenuationColor.copy( source.attenuationColor );\n\n\t\tthis.specularIntensity = source.specularIntensity;\n\t\tthis.specularIntensityMap = source.specularIntensityMap;\n\t\tthis.specularColor.copy( source.specularColor );\n\t\tthis.specularColorMap = source.specularColorMap;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhongMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhongMaterial = true;\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshToonMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshToonMaterial = true;\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\t\tthis.gradientMap = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshNormalMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshNormalMaterial = true;\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshLambertMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshLambertMaterial = true;\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshMatcapMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshMatcapMaterial = true;\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.type = 'MeshMatcapMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.matcap = null;\n\n\t\tthis.map = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.matcap = source.matcap;\n\n\t\tthis.map = source.map;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineDashedMaterial extends LineBasicMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineDashedMaterial = true;\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// same as Array.prototype.slice, but also works on typed arrays\nfunction arraySlice( array, from, to ) {\n\n\tif ( isTypedArray( array ) ) {\n\n\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t}\n\n\treturn array.slice( from, to );\n\n}\n\n// converts an array to a specific type\nfunction convertArray( array, type, forceClone ) {\n\n\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t! forceClone && array.constructor === type ) return array;\n\n\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\treturn new type( array ); // create typed array\n\n\t}\n\n\treturn Array.prototype.slice.call( array ); // create Array\n\n}\n\nfunction isTypedArray( object ) {\n\n\treturn ArrayBuffer.isView( object ) &&\n\t\t! ( object instanceof DataView );\n\n}\n\n// returns an array by which times and values can be sorted\nfunction getKeyframeOrder( times ) {\n\n\tfunction compareTime( i, j ) {\n\n\t\treturn times[ i ] - times[ j ];\n\n\t}\n\n\tconst n = times.length;\n\tconst result = new Array( n );\n\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\tresult.sort( compareTime );\n\n\treturn result;\n\n}\n\n// uses the array previously returned by 'getKeyframeOrder' to sort data\nfunction sortedArray( values, stride, order ) {\n\n\tconst nValues = values.length;\n\tconst result = new values.constructor( nValues );\n\n\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\tconst srcOffset = order[ i ] * stride;\n\n\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n// function for parsing AOS keyframe formats\nfunction flattenJSON( jsonKeys, times, values, valuePropertyName ) {\n\n\tlet i = 1, key = jsonKeys[ 0 ];\n\n\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\tkey = jsonKeys[ i ++ ];\n\n\t}\n\n\tif ( key === undefined ) return; // no data\n\n\tlet value = key[ valuePropertyName ];\n\tif ( value === undefined ) return; // no data\n\n\tif ( Array.isArray( value ) ) {\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else if ( value.toArray !== undefined ) {\n\n\t\t// ...assume THREE.Math-ish\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else {\n\n\t\t// otherwise push as-is\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push( value );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t}\n\n}\n\nfunction subclip( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\tconst clip = sourceClip.clone();\n\n\tclip.name = name;\n\n\tconst tracks = [];\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tconst track = clip.tracks[ i ];\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( times.length === 0 ) continue;\n\n\t\ttrack.times = convertArray( times, track.times.constructor );\n\t\ttrack.values = convertArray( values, track.values.constructor );\n\n\t\ttracks.push( track );\n\n\t}\n\n\tclip.tracks = tracks;\n\n\t// find minimum .times value across all tracks in the trimmed clip\n\n\tlet minStartTime = Infinity;\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t}\n\n\t}\n\n\t// shift all tracks such that clip begins at t=0\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t}\n\n\tclip.resetDuration();\n\n\treturn clip;\n\n}\n\nfunction makeClipAdditive( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\tif ( fps <= 0 ) fps = 30;\n\n\tconst numTracks = referenceClip.tracks.length;\n\tconst referenceTime = referenceFrame / fps;\n\n\t// Make each track's values relative to the values at the reference frame\n\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t// Skip this track if it's non-numeric\n\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t} );\n\n\t\tif ( targetTrack === undefined ) continue;\n\n\t\tlet referenceOffset = 0;\n\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t}\n\n\t\tlet targetOffset = 0;\n\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t}\n\n\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\tlet referenceValue;\n\n\t\t// Find the value to subtract out of the track\n\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\treferenceValue = arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t} else {\n\n\t\t\t// Interpolate to the reference value\n\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\treferenceValue = arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t}\n\n\t\t// Conjugate the quaternion\n\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t}\n\n\t\t// Subtract the reference value from all of the track values\n\n\t\tconst numTimes = targetTrack.times.length;\n\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart,\n\t\t\t\t\treferenceValue,\n\t\t\t\t\t0,\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\treturn targetClip;\n\n}\n\nvar AnimationUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tarraySlice: arraySlice,\n\tconvertArray: convertArray,\n\tisTypedArray: isTypedArray,\n\tgetKeyframeOrder: getKeyframeOrder,\n\tsortedArray: sortedArray,\n\tflattenJSON: flattenJSON,\n\tsubclip: subclip,\n\tmakeClipAdditive: makeClipAdditive\n});\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nclass Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t\tthis.settings = null;\n\t\tthis.DefaultSettings_ = {};\n\n\t}\n\n\tevaluate( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t}\n\n\tgetSettings_() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// Template methods for derived classes:\n\n\tinterpolate_( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t}\n\n\tintervalChanged_( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n}\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nclass LinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceding\n * the parameter.\n */\n\nclass DiscreteInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n}\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = convertArray( times, this.TimeBufferType );\n\t\tthis.values = convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': convertArray( track.times, Array ),\n\t\t\t\t'values': convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = arraySlice( times, from, to );\n\t\t\tthis.values = arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = arraySlice( this.times ),\n\t\t\tvalues = arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = arraySlice( this.times, 0 );\n\t\tconst values = arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nclass QuaternionLinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = getKeyframeOrder( times );\n\t\t\ttimes = sortedArray( times, 1, order );\n\t\t\tvalues = sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tflattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * fps;\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tflattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nclass LoadingManager {\n\n\tconstructor( onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet isLoading = false;\n\t\tlet itemsLoaded = 0;\n\t\tlet itemsTotal = 0;\n\t\tlet urlModifier = undefined;\n\t\tconst handlers = [];\n\n\t\t// Refer to #5689 for the reason why we don't set .onStart\n\t\t// in the constructor\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.resolveURL = function ( url ) {\n\n\t\t\tif ( urlModifier ) {\n\n\t\t\t\treturn urlModifier( url );\n\n\t\t\t}\n\n\t\t\treturn url;\n\n\t\t};\n\n\t\tthis.setURLModifier = function ( transform ) {\n\n\t\t\turlModifier = transform;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.addHandler = function ( regex, loader ) {\n\n\t\t\thandlers.push( regex, loader );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.removeHandler = function ( regex ) {\n\n\t\t\tconst index = handlers.indexOf( regex );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\thandlers.splice( index, 2 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.getHandler = function ( file ) {\n\n\t\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tconst regex = handlers[ i ];\n\t\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t}\n\n}\n\nconst DefaultLoadingManager = /*@__PURE__*/ new LoadingManager();\n\nclass Loader {\n\n\tconstructor( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.crossOrigin = 'anonymous';\n\t\tthis.withCredentials = false;\n\t\tthis.path = '';\n\t\tthis.resourcePath = '';\n\t\tthis.requestHeader = {};\n\n\t}\n\n\tload( /* url, onLoad, onProgress, onError */ ) {}\n\n\tloadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t}\n\n\tparse( /* data */ ) {}\n\n\tsetCrossOrigin( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t}\n\n\tsetWithCredentials( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t}\n\n\tsetResourcePath( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n\tsetRequestHeader( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n}\n\nconst loading = {};\n\nclass HttpError extends Error {\n\n\tconstructor( message, response ) {\n\n\t\tsuper( message );\n\t\tthis.response = response;\n\n\t}\n\n}\n\nclass FileLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Initialise array for duplicate requests\n\t\tloading[ url ] = [];\n\n\t\tloading[ url ].push( {\n\t\t\tonLoad: onLoad,\n\t\t\tonProgress: onProgress,\n\t\t\tonError: onError,\n\t\t} );\n\n\t\t// create request\n\t\tconst req = new Request( url, {\n\t\t\theaders: new Headers( this.requestHeader ),\n\t\t\tcredentials: this.withCredentials ? 'include' : 'same-origin',\n\t\t\t// An abort controller could be added within a future PR\n\t\t} );\n\n\t\t// record states ( avoid data race )\n\t\tconst mimeType = this.mimeType;\n\t\tconst responseType = this.responseType;\n\n\t\t// start the fetch\n\t\tfetch( req )\n\t\t\t.then( response => {\n\n\t\t\t\tif ( response.status === 200 || response.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( response.status === 0 ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Workaround: Checking if response.body === undefined for Alipay browser #23548\n\n\t\t\t\t\tif ( typeof ReadableStream === 'undefined' || response.body === undefined || response.body.getReader === undefined ) {\n\n\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\t\tconst reader = response.body.getReader();\n\t\t\t\t\tconst contentLength = response.headers.get( 'Content-Length' );\n\t\t\t\t\tconst total = contentLength ? parseInt( contentLength ) : 0;\n\t\t\t\t\tconst lengthComputable = total !== 0;\n\t\t\t\t\tlet loaded = 0;\n\n\t\t\t\t\t// periodically read data into the new stream tracking while download progress\n\t\t\t\t\tconst stream = new ReadableStream( {\n\t\t\t\t\t\tstart( controller ) {\n\n\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\tfunction readData() {\n\n\t\t\t\t\t\t\t\treader.read().then( ( { done, value } ) => {\n\n\t\t\t\t\t\t\t\t\tif ( done ) {\n\n\t\t\t\t\t\t\t\t\t\tcontroller.close();\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tloaded += value.byteLength;\n\n\t\t\t\t\t\t\t\t\t\tconst event = new ProgressEvent( 'progress', { lengthComputable, loaded, total } );\n\t\t\t\t\t\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\t\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcontroller.enqueue( value );\n\t\t\t\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn new Response( stream );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new HttpError( `fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`, response );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( response => {\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\n\t\t\t\t\t\treturn response.arrayBuffer();\n\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\treturn response.blob();\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\treturn response.text()\n\t\t\t\t\t\t\t.then( text => {\n\n\t\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\t\treturn parser.parseFromString( text, mimeType );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( mimeType === undefined ) {\n\n\t\t\t\t\t\t\treturn response.text();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// sniff encoding\n\t\t\t\t\t\t\tconst re = /charset=\"?([^;\"\\s]*)\"?/i;\n\t\t\t\t\t\t\tconst exec = re.exec( mimeType );\n\t\t\t\t\t\t\tconst label = exec && exec[ 1 ] ? exec[ 1 ].toLowerCase() : undefined;\n\t\t\t\t\t\t\tconst decoder = new TextDecoder( label );\n\t\t\t\t\t\t\treturn response.arrayBuffer().then( ab => decoder.decode( ab ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( data => {\n\n\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\tCache.add( url, data );\n\n\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( data );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.catch( err => {\n\n\t\t\t\t// Abort errors and other errors are handled the same\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tif ( callbacks === undefined ) {\n\n\t\t\t\t\t// When onLoad was called and url was deleted in `loading`\n\t\t\t\t\tthis.manager.itemError( url );\n\t\t\t\t\tthrow err;\n\n\t\t\t\t}\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( err );\n\n\t\t\t\t}\n\n\t\t\t\tthis.manager.itemError( url );\n\n\t\t\t} )\n\t\t\t.finally( () => {\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\tthis.manager.itemStart( url );\n\n\t}\n\n\tsetResponseType( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t}\n\n\tsetMimeType( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass CompressedTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = createElementNS( 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction removeEventListeners() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass DataTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\tif ( texData.generateMipmaps !== undefined ) {\n\n\t\t\t\ttexture.generateMipmaps = texData.generateMipmaps;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass TextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.isLight = true;\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tdispose() {\n\n\t\t// Empty here in base class; some subclasses override.\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass HemisphereLight extends Light {\n\n\tconstructor( skyColor, groundColor, intensity ) {\n\n\t\tsuper( skyColor, intensity );\n\n\t\tthis.isHemisphereLight = true;\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\t\tthis.blurSamples = 8;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget$1 );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix$1.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this.map ) {\n\n\t\t\tthis.map.dispose();\n\n\t\t}\n\n\t\tif ( this.mapPass ) {\n\n\t\t\tthis.mapPass.dispose();\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.isSpotLightShadow = true;\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.focus = source.focus;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isSpotLight = true;\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// by convention for a spotlight, luminous power (lm) = π * luminous intensity (cd)\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis.isPointLightShadow = true;\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( far !== camera.far ) {\n\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isPointLight = true;\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// for an isotropic light source, luminous power (lm) = 4 π luminous intensity (cd)\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t\tthis.isDirectionalLightShadow = true;\n\n\t}\n\n}\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isDirectionalLight = true;\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AmbientLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isAmbientLight = true;\n\n\t\tthis.type = 'AmbientLight';\n\n\t}\n\n}\n\nclass RectAreaLight extends Light {\n\n\tconstructor( color, intensity, width = 10, height = 10 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isRectAreaLight = true;\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in nits)\n\t\treturn this.intensity * this.width * this.height * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in nits) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( this.width * this.height * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tthis.isSphericalHarmonics3 = true;\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nclass LightProbe extends Light {\n\n\tconstructor( sh = new SphericalHarmonics3(), intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isLightProbe = true;\n\n\t\tthis.sh = sh;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass MaterialLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\t\tthis.textures = {};\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = MaterialLoader.createMaterialFromType( json.type );\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = json.sheen;\n\t\tif ( json.sheenColor !== undefined ) material.sheenColor = new Color().setHex( json.sheenColor );\n\t\tif ( json.sheenRoughness !== undefined ) material.sheenRoughness = json.sheenRoughness;\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.specularIntensity !== undefined ) material.specularIntensity = json.specularIntensity;\n\t\tif ( json.specularColor !== undefined && material.specularColor !== undefined ) material.specularColor.setHex( json.specularColor );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.iridescence !== undefined ) material.iridescence = json.iridescence;\n\t\tif ( json.iridescenceIOR !== undefined ) material.iridescenceIOR = json.iridescenceIOR;\n\t\tif ( json.iridescenceThicknessRange !== undefined ) material.iridescenceThicknessRange = json.iridescenceThicknessRange;\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.thickness !== undefined ) material.thickness = json.thickness;\n\t\tif ( json.attenuationDistance !== undefined ) material.attenuationDistance = json.attenuationDistance;\n\t\tif ( json.attenuationColor !== undefined && material.attenuationColor !== undefined ) material.attenuationColor.setHex( json.attenuationColor );\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.shadowSide !== undefined ) material.shadowSide = json.shadowSide;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.alphaToCoverage !== undefined ) material.alphaToCoverage = json.alphaToCoverage;\n\t\tif ( json.premultipliedAlpha !== undefined ) material.premultipliedAlpha = json.premultipliedAlpha;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\t\tif ( json.specularIntensityMap !== undefined ) material.specularIntensityMap = getTexture( json.specularIntensityMap );\n\t\tif ( json.specularColorMap !== undefined ) material.specularColorMap = getTexture( json.specularColorMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.iridescenceMap !== undefined ) material.iridescenceMap = getTexture( json.iridescenceMap );\n\t\tif ( json.iridescenceThicknessMap !== undefined ) material.iridescenceThicknessMap = getTexture( json.iridescenceThicknessMap );\n\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\t\tif ( json.thicknessMap !== undefined ) material.thicknessMap = getTexture( json.thicknessMap );\n\n\t\tif ( json.sheenColorMap !== undefined ) material.sheenColorMap = getTexture( json.sheenColorMap );\n\t\tif ( json.sheenRoughnessMap !== undefined ) material.sheenRoughnessMap = getTexture( json.sheenRoughnessMap );\n\n\t\treturn material;\n\n\t}\n\n\tsetTextures( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n\tstatic createMaterialFromType( type ) {\n\n\t\tconst materialLib = {\n\t\t\tShadowMaterial,\n\t\t\tSpriteMaterial,\n\t\t\tRawShaderMaterial,\n\t\t\tShaderMaterial,\n\t\t\tPointsMaterial,\n\t\t\tMeshPhysicalMaterial,\n\t\t\tMeshStandardMaterial,\n\t\t\tMeshPhongMaterial,\n\t\t\tMeshToonMaterial,\n\t\t\tMeshNormalMaterial,\n\t\t\tMeshLambertMaterial,\n\t\t\tMeshDepthMaterial,\n\t\t\tMeshDistanceMaterial,\n\t\t\tMeshBasicMaterial,\n\t\t\tMeshMatcapMaterial,\n\t\t\tLineDashedMaterial,\n\t\t\tLineBasicMaterial,\n\t\t\tMaterial\n\t\t};\n\n\t\treturn new materialLib[ type ]();\n\n\t}\n\n}\n\nclass LoaderUtils {\n\n\tstatic decodeText( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t}\n\n\tstatic extractUrlBase( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.slice( 0, index + 1 );\n\n\t}\n\n\tstatic resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n}\n\nclass InstancedBufferGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isInstancedBufferGeometry = true;\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.instanceCount = Infinity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass BufferGeometryLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tif ( attribute.usage !== undefined ) bufferAttribute.setUsage( attribute.usage );\n\n\t\t\tif ( attribute.updateRange !== undefined ) {\n\n\t\t\t\tbufferAttribute.updateRange.offset = attribute.updateRange.offset;\n\t\t\t\tbufferAttribute.updateRange.count = attribute.updateRange.count;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n}\n\nclass ObjectLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tasync loadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tconst text = await loader.loadAsync( url, onProgress );\n\n\t\tconst json = JSON.parse( text );\n\n\t\tconst metadata = json.metadata;\n\n\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\tthrow new Error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\n\t\t}\n\n\t\treturn await scope.parseAsync( json );\n\n\t}\n\n\tparse( json, onLoad ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\t//\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\tlet hasImages = false;\n\n\t\t\tfor ( const uuid in images ) {\n\n\t\t\t\tif ( images[ uuid ].data instanceof HTMLImageElement ) {\n\n\t\t\t\t\thasImages = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasImages === false ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tasync parseAsync( json ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = await this.parseImagesAsync( json.images );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\treturn object;\n\n\t}\n\n\tparseShapes( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n\tparseSkeletons( json, object ) {\n\n\t\tconst skeletons = {};\n\t\tconst bones = {};\n\n\t\t// generate bone lookup table\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isBone ) bones[ child.uuid ] = child;\n\n\t\t} );\n\n\t\t// create skeletons\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst skeleton = new Skeleton().fromJSON( json[ i ], bones );\n\n\t\t\t\tskeletons[ skeleton.uuid ] = skeleton;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn skeletons;\n\n\t}\n\n\tparseGeometries( json, shapes ) {\n\n\t\tconst geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: The legacy Geometry type is no longer supported.' );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( data.type in Geometries ) {\n\n\t\t\t\t\t\t\tgeometry = Geometries[ data.type ].fromJSON( data, shapes );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( `THREE.ObjectLoader: Unsupported geometry type \"${ data.type }\"` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t}\n\n\tparseMaterials( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t// Deprecated\n\n\t\t\t\t\tconst array = [];\n\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\tconst material = data.materials[ j ];\n\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\n\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t}\n\n\tparseAnimations( json ) {\n\n\t\tconst animations = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\t\tanimations[ clip.uuid ] = clip;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n\tparseImages( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn loadImage( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tasync parseImagesAsync( json ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tasync function deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn await loader.loadAsync( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tloader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = await deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = await deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tparseTextures( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tconst source = images[ data.image ];\n\t\t\t\tconst image = source.data;\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture();\n\n\t\t\t\t\tif ( image.length === 6 ) texture.needsUpdate = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( image && image.data ) {\n\n\t\t\t\t\t\ttexture = new DataTexture();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image ) texture.needsUpdate = true; // textures can have undefined image data\n\n\t\t\t\t}\n\n\t\t\t\ttexture.source = source;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\tif ( data.userData !== undefined ) texture.userData = data.userData;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tparseObject( data, geometries, materials, textures, animations ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tfunction getTexture( uuid ) {\n\n\t\t\tif ( textures[ uuid ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined texture', uuid );\n\n\t\t\t}\n\n\t\t\treturn textures[ uuid ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject.background = getTexture( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.environment !== undefined ) {\n\n\t\t\t\t\tobject.environment = getTexture( data.environment );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t \tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\tif ( data.bindMode !== undefined ) object.bindMode = data.bindMode;\n\t\t\t\tif ( data.bindMatrix !== undefined ) object.bindMatrix.fromArray( data.bindMatrix );\n\t\t\t\tif ( data.skeleton !== undefined ) object.skeleton = data.skeleton;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\t\t\t\tconst instanceColor = data.instanceColor;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new InstancedBufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\t\t\t\tif ( instanceColor !== undefined ) object.instanceColor = new InstancedBufferAttribute( new Float32Array( instanceColor.array ), instanceColor.itemSize );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Bone':\n\n\t\t\t\tobject = new Bone();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials, textures, animations ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.animations !== undefined ) {\n\n\t\t\tconst objectAnimations = data.animations;\n\n\t\t\tfor ( let i = 0; i < objectAnimations.length; i ++ ) {\n\n\t\t\t\tconst uuid = objectAnimations[ i ];\n\n\t\t\t\tobject.animations.push( animations[ uuid ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tbindSkeletons( object, skeletons ) {\n\n\t\tif ( Object.keys( skeletons ).length === 0 ) return;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isSkinnedMesh === true && child.skeleton !== undefined ) {\n\n\t\t\t\tconst skeleton = skeletons[ child.skeleton ];\n\n\t\t\t\tif ( skeleton === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No skeleton found with UUID:', child.skeleton );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tchild.bind( skeleton, child.bindMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n}\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n}\n\nclass HemisphereLightProbe extends LightProbe {\n\n\tconstructor( skyColor, groundColor, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isHemisphereLightProbe = true;\n\n\t\tconst color1 = new Color().set( skyColor );\n\t\tconst color2 = new Color().set( groundColor );\n\n\t\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\t\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\t\tconst c0 = Math.sqrt( Math.PI );\n\t\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\t\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\t\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n\t}\n\n}\n\nclass AmbientLightProbe extends LightProbe {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isAmbientLightProbe = true;\n\n\t\tconst color1 = new Color().set( color );\n\n\t\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\t\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n\t}\n\n}\n\nconst _eyeRight = /*@__PURE__*/ new Matrix4();\nconst _eyeLeft = /*@__PURE__*/ new Matrix4();\nconst _projectionMatrix = /*@__PURE__*/ new Matrix4();\n\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null\n\t\t};\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t_projectionMatrix.copy( camera.projectionMatrix );\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( _projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( _projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n}\n\nclass Clock {\n\n\tconstructor( autoStart = true ) {\n\n\t\tthis.autoStart = autoStart;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nconst _position$1 = /*@__PURE__*/ new Vector3();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\nconst _scale$1 = /*@__PURE__*/ new Vector3();\nconst _orientation$1 = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$1, _quaternion$1, _scale$1 );\n\n\t\t_orientation$1.set( 0, 0, - 1 ).applyQuaternion( _quaternion$1 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$1.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$1.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$1.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$1.x, _position$1.y, _position$1.z );\n\t\t\tlistener.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass PositionalAudio extends Audio {\n\n\tconstructor( listener ) {\n\n\t\tsuper( listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.panningModel = 'HRTF';\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tdisconnect() {\n\n\t\tsuper.disconnect();\n\n\t\tthis.panner.disconnect( this.gain );\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.panner;\n\n\t}\n\n\tgetRefDistance() {\n\n\t\treturn this.panner.refDistance;\n\n\t}\n\n\tsetRefDistance( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetRolloffFactor() {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t}\n\n\tsetRolloffFactor( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetDistanceModel() {\n\n\t\treturn this.panner.distanceModel;\n\n\t}\n\n\tsetDistanceModel( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxDistance() {\n\n\t\treturn this.panner.maxDistance;\n\n\t}\n\n\tsetMaxDistance( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetDirectionalCone( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, 1 ).applyQuaternion( _quaternion );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position.x, _position.y, _position.z );\n\t\t\tpanner.setOrientation( _orientation.x, _orientation.y, _orientation.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass AudioAnalyser {\n\n\tconstructor( audio, fftSize = 2048 ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\n\tgetFrequencyData() {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t}\n\n\tgetAverageFrequency() {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /*@__PURE__*/ /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /*@__PURE__*/ /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /*@__PURE__*/ /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /*@__PURE__*/ /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nclass Composite {\n\n\tconstructor( targetGroup, path, optionalParsedPath ) {\n\n\t\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tgetValue( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t}\n\n\tsetValue( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t}\n\n\tbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t}\n\n\tunbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n}\n\n// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\nclass PropertyBinding {\n\n\tconstructor( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\t\tthis.rootNode = rootNode;\n\n\t\t// initial state of these methods that calls 'bind'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n\n\tstatic create( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tstatic sanitizeNodeName( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t}\n\n\tstatic parseTrackName( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( matches === null ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t}\n\n\tstatic findNode( root, nodeName ) {\n\n\t\tif ( nodeName === undefined || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable() {}\n\t_setValue_unavailable() {}\n\n\t// Getters\n\n\t_getValue_direct( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.targetObject[ this.propertyName ];\n\n\t}\n\n\t_getValue_array( buffer, offset ) {\n\n\t\tconst source = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t}\n\n\t}\n\n\t_getValue_arrayElement( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t}\n\n\t_getValue_toArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t}\n\n\t// Direct\n\n\t_setValue_direct( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// EntireArray\n\n\t_setValue_array( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t}\n\n\t_setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// ArrayElement\n\n\t_setValue_arrayElement( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// HasToFromArray\n\n\t_setValue_fromArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t}\n\n\t_setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t_getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t}\n\n\t_setValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t}\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind() {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t}\n\n\tunbind() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n}\n\nPropertyBinding.Composite = Composite;\n\nPropertyBinding.prototype.BindingType = {\n\tDirect: 0,\n\tEntireArray: 1,\n\tArrayElement: 2,\n\tHasFromToArray: 3\n};\n\nPropertyBinding.prototype.Versioning = {\n\tNone: 0,\n\tNeedsUpdate: 1,\n\tMatrixWorldNeedsUpdate: 2\n};\n\nPropertyBinding.prototype.GetterByBindingType = [\n\n\tPropertyBinding.prototype._getValue_direct,\n\tPropertyBinding.prototype._getValue_array,\n\tPropertyBinding.prototype._getValue_arrayElement,\n\tPropertyBinding.prototype._getValue_toArray,\n\n];\n\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [\n\n\t[\n\t\t// Direct\n\t\tPropertyBinding.prototype._setValue_direct,\n\t\tPropertyBinding.prototype._setValue_direct_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// EntireArray\n\n\t\tPropertyBinding.prototype._setValue_array,\n\t\tPropertyBinding.prototype._setValue_array_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// ArrayElement\n\t\tPropertyBinding.prototype._setValue_arrayElement,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// HasToFromArray\n\t\tPropertyBinding.prototype._setValue_fromArray,\n\t\tPropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,\n\n\t]\n\n];\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nclass AnimationObjectGroup {\n\n\tconstructor() {\n\n\t\tthis.isAnimationObjectGroup = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0; // threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tconst indices = {};\n\t\tthis._indicesByUUID = indices; // for bookkeeping\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = []; // inside: string\n\t\tthis._parsedPaths = []; // inside: { we don't care, here }\n\t\tthis._bindings = []; // inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._objects.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tget bindingsPerObject() {\n\n\t\t\t\treturn scope._bindings.length;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tadd() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\tremove() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// remove & forget\n\tuncache() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t}\n\n\tunsubscribe_( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n}\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _controlInterpolantsResultBuffer = new Float32Array( 1 );\n\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, _controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nlet id = 0;\n\nclass UniformsGroup extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isUniformsGroup = true;\n\n\t\tObject.defineProperty( this, 'id', { value: id ++ } );\n\n\t\tthis.name = '';\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.uniforms = [];\n\n\t}\n\n\tadd( uniform ) {\n\n\t\tthis.uniforms.push( uniform );\n\n\t\treturn this;\n\n\t}\n\n\tremove( uniform ) {\n\n\t\tconst index = this.uniforms.indexOf( uniform );\n\n\t\tif ( index !== - 1 ) this.uniforms.splice( index, 1 );\n\n\t\treturn this;\n\n\t}\n\n\tsetName( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.usage = source.usage;\n\n\t\tconst uniformsSource = source.uniforms;\n\n\t\tthis.uniforms.length = 0;\n\n\t\tfor ( let i = 0, l = uniformsSource.length; i < l; i ++ ) {\n\n\t\t\tthis.uniforms.push( uniformsSource[ i ].clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n\n\tconstructor( array, stride, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, stride );\n\n\t\tthis.isInstancedInterleavedBuffer = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tconst ib = super.clone( data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tconst json = super.toJSON( data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n}\n\nclass GLBufferAttribute {\n\n\tconstructor( buffer, type, itemSize, elementSize, count ) {\n\n\t\tthis.isGLBufferAttribute = true;\n\n\t\tthis.buffer = buffer;\n\t\tthis.type = type;\n\t\tthis.itemSize = itemSize;\n\t\tthis.elementSize = elementSize;\n\t\tthis.count = count;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetBuffer( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t}\n\n\tsetType( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetItemSize( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetCount( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Raycaster {\n\n\tconstructor( origin, direction, near = 0, far = Infinity ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.camera = null;\n\t\tthis.layers = new Layers();\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t}\n\n\tsetFromCamera( coords, camera ) {\n\n\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t}\n\n\tintersectObject( object, recursive = true, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n\tintersectObjects( objects, recursive = true, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be between EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n */\n\nclass Cylindrical {\n\n\tconstructor( radius = 1, theta = 0, y = 0 ) {\n\n\t\tthis.radius = radius; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = theta; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = y; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$4 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min = new Vector2( + Infinity, + Infinity ), max = new Vector2( - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox2 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$4.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$4.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = /*@__PURE__*/ new Vector3();\nconst _startEnd = /*@__PURE__*/ new Vector3();\n\nclass Line3 {\n\n\tconstructor( start = new Vector3(), end = new Vector3() ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\n\t}\n\n\tset( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t}\n\n\tdelta( target ) {\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t}\n\n\tdistanceSq() {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t}\n\n\tdistance() {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tclosestPointToPointParameter( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t}\n\n\tclosestPointToPoint( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tequals( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$3 = /*@__PURE__*/ new Vector3();\n\nclass SpotLightHelper extends Object3D {\n\n\tconstructor( light, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst positions = [\n\t\t\t0, 0, 0, \t0, 0, 1,\n\t\t\t0, 0, 0, \t1, 0, 1,\n\t\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t\t0, 0, 0, \t0, 1, 1,\n\t\t\t0, 0, 0, \t0, - 1, 1\n\t\t];\n\n\t\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateMatrixWorld();\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector$3 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.type = 'SkeletonHelper';\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object.isBone === true ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nclass PointLightHelper extends Mesh {\n\n\tconstructor( light, sphereSize, color ) {\n\n\t\tconst geometry = new SphereGeometry( sphereSize, 4, 2 );\n\t\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'PointLightHelper';\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\n\t\t/*\n\t// TODO: delete this comment?\n\tconst distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\t/*\n\t\tconst d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t}\n\n}\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\nconst _color1 = /*@__PURE__*/ new Color();\nconst _color2 = /*@__PURE__*/ new Color();\n\nclass HemisphereLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tconst geometry = new OctahedronGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\t\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\t\tconst colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, this.material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.children[ 0 ];\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\t_color1.copy( this.light.color );\n\t\t\t_color2.copy( this.light.groundColor );\n\n\t\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t}\n\n\t\tmesh.lookAt( _vector$1.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t}\n\n}\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n}\n\nclass PolarGridHelper extends LineSegments {\n\n\tconstructor( radius = 10, radials = 16, circles = 8, divisions = 64, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\t// create the radials\n\n\t\tfor ( let i = 0; i <= radials; i ++ ) {\n\n\t\t\tconst v = ( i / radials ) * ( Math.PI * 2 );\n\n\t\t\tconst x = Math.sin( v ) * radius;\n\t\t\tconst z = Math.cos( v ) * radius;\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tvertices.push( x, 0, z );\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t}\n\n\t\t// create the circles\n\n\t\tfor ( let i = 0; i <= circles; i ++ ) {\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tconst r = radius - ( radius / circles * i );\n\n\t\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tlet x = Math.sin( v ) * r;\n\t\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'PolarGridHelper';\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nclass DirectionalLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tlet geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size, size, 0,\n\t\t\tsize, size, 0,\n\t\t\tsize, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size, size, 0\n\t\t], 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.lightPlane = new Line( geometry, material );\n\t\tthis.add( this.lightPlane );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.targetLine = new Line( geometry, material );\n\t\tthis.add( this.targetLine );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.lightPlane.geometry.dispose();\n\t\tthis.lightPlane.material.dispose();\n\t\tthis.targetLine.geometry.dispose();\n\t\tthis.targetLine.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\t_v1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t_v2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t_v3.subVectors( _v2, _v1 );\n\n\t\tthis.lightPlane.lookAt( _v2 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.lightPlane.material.color.set( this.color );\n\t\t\tthis.targetLine.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\tthis.targetLine.lookAt( _v2 );\n\t\tthis.targetLine.scale.z = _v3.length();\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _camera = /*@__PURE__*/ new Camera();\n\n/**\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttps://github.com/evanw/lightgl.js/blob/master/tests/shadowmap.html\n */\n\nclass CameraHelper extends LineSegments {\n\n\tconstructor( camera ) {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst pointMap = {};\n\n\t\t// near\n\n\t\taddLine( 'n1', 'n2' );\n\t\taddLine( 'n2', 'n4' );\n\t\taddLine( 'n4', 'n3' );\n\t\taddLine( 'n3', 'n1' );\n\n\t\t// far\n\n\t\taddLine( 'f1', 'f2' );\n\t\taddLine( 'f2', 'f4' );\n\t\taddLine( 'f4', 'f3' );\n\t\taddLine( 'f3', 'f1' );\n\n\t\t// sides\n\n\t\taddLine( 'n1', 'f1' );\n\t\taddLine( 'n2', 'f2' );\n\t\taddLine( 'n3', 'f3' );\n\t\taddLine( 'n4', 'f4' );\n\n\t\t// cone\n\n\t\taddLine( 'p', 'n1' );\n\t\taddLine( 'p', 'n2' );\n\t\taddLine( 'p', 'n3' );\n\t\taddLine( 'p', 'n4' );\n\n\t\t// up\n\n\t\taddLine( 'u1', 'u2' );\n\t\taddLine( 'u2', 'u3' );\n\t\taddLine( 'u3', 'u1' );\n\n\t\t// target\n\n\t\taddLine( 'c', 't' );\n\t\taddLine( 'p', 'c' );\n\n\t\t// cross\n\n\t\taddLine( 'cn1', 'cn2' );\n\t\taddLine( 'cn3', 'cn4' );\n\n\t\taddLine( 'cf1', 'cf2' );\n\t\taddLine( 'cf3', 'cf4' );\n\n\t\tfunction addLine( a, b ) {\n\n\t\t\taddPoint( a );\n\t\t\taddPoint( b );\n\n\t\t}\n\n\t\tfunction addPoint( id ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( 0, 0, 0 );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'CameraHelper';\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t\t// colors\n\n\t\tconst colorFrustum = new Color( 0xffaa00 );\n\t\tconst colorCone = new Color( 0xff0000 );\n\t\tconst colorUp = new Color( 0x00aaff );\n\t\tconst colorTarget = new Color( 0xffffff );\n\t\tconst colorCross = new Color( 0x333333 );\n\n\t\tthis.setColors( colorFrustum, colorCone, colorUp, colorTarget, colorCross );\n\n\t}\n\n\tsetColors( frustum, cone, up, target, cross ) {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst colorAttribute = geometry.getAttribute( 'color' );\n\n\t\t// near\n\n\t\tcolorAttribute.setXYZ( 0, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 1, frustum.r, frustum.g, frustum.b ); // n1, n2\n\t\tcolorAttribute.setXYZ( 2, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 3, frustum.r, frustum.g, frustum.b ); // n2, n4\n\t\tcolorAttribute.setXYZ( 4, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 5, frustum.r, frustum.g, frustum.b ); // n4, n3\n\t\tcolorAttribute.setXYZ( 6, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 7, frustum.r, frustum.g, frustum.b ); // n3, n1\n\n\t\t// far\n\n\t\tcolorAttribute.setXYZ( 8, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 9, frustum.r, frustum.g, frustum.b ); // f1, f2\n\t\tcolorAttribute.setXYZ( 10, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 11, frustum.r, frustum.g, frustum.b ); // f2, f4\n\t\tcolorAttribute.setXYZ( 12, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 13, frustum.r, frustum.g, frustum.b ); // f4, f3\n\t\tcolorAttribute.setXYZ( 14, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 15, frustum.r, frustum.g, frustum.b ); // f3, f1\n\n\t\t// sides\n\n\t\tcolorAttribute.setXYZ( 16, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 17, frustum.r, frustum.g, frustum.b ); // n1, f1\n\t\tcolorAttribute.setXYZ( 18, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 19, frustum.r, frustum.g, frustum.b ); // n2, f2\n\t\tcolorAttribute.setXYZ( 20, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 21, frustum.r, frustum.g, frustum.b ); // n3, f3\n\t\tcolorAttribute.setXYZ( 22, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 23, frustum.r, frustum.g, frustum.b ); // n4, f4\n\n\t\t// cone\n\n\t\tcolorAttribute.setXYZ( 24, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 25, cone.r, cone.g, cone.b ); // p, n1\n\t\tcolorAttribute.setXYZ( 26, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 27, cone.r, cone.g, cone.b ); // p, n2\n\t\tcolorAttribute.setXYZ( 28, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 29, cone.r, cone.g, cone.b ); // p, n3\n\t\tcolorAttribute.setXYZ( 30, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 31, cone.r, cone.g, cone.b ); // p, n4\n\n\t\t// up\n\n\t\tcolorAttribute.setXYZ( 32, up.r, up.g, up.b ); colorAttribute.setXYZ( 33, up.r, up.g, up.b ); // u1, u2\n\t\tcolorAttribute.setXYZ( 34, up.r, up.g, up.b ); colorAttribute.setXYZ( 35, up.r, up.g, up.b ); // u2, u3\n\t\tcolorAttribute.setXYZ( 36, up.r, up.g, up.b ); colorAttribute.setXYZ( 37, up.r, up.g, up.b ); // u3, u1\n\n\t\t// target\n\n\t\tcolorAttribute.setXYZ( 38, target.r, target.g, target.b ); colorAttribute.setXYZ( 39, target.r, target.g, target.b ); // c, t\n\t\tcolorAttribute.setXYZ( 40, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 41, cross.r, cross.g, cross.b ); // p, c\n\n\t\t// cross\n\n\t\tcolorAttribute.setXYZ( 42, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 43, cross.r, cross.g, cross.b ); // cn1, cn2\n\t\tcolorAttribute.setXYZ( 44, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 45, cross.r, cross.g, cross.b ); // cn3, cn4\n\n\t\tcolorAttribute.setXYZ( 46, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 47, cross.r, cross.g, cross.b ); // cf1, cf2\n\t\tcolorAttribute.setXYZ( 48, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 49, cross.r, cross.g, cross.b ); // cf3, cf4\n\n\t\tcolorAttribute.needsUpdate = true;\n\n\t}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst pointMap = this.pointMap;\n\n\t\tconst w = 1, h = 1;\n\n\t\t// we need just camera projection matrix inverse\n\t\t// world matrix must be identity\n\n\t\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t\t// center / target\n\n\t\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\t\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t\t// near\n\n\t\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\t\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\t\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\t\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\t\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\t\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\t\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\t\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\t\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\t\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\t\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\t\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\t\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\t\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\t_box.setFromObject( this.object );\n\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Box3Helper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\t\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'Box3Helper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nclass PlaneHelper extends Line {\n\n\tconstructor( plane, size = 1, hex = 0xffff00 ) {\n\n\t\tconst color = hex;\n\n\t\tconst positions = [ 1, - 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, - 1, 0, 1, 1, 0 ];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.computeBoundingSphere();\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.type = 'PlaneHelper';\n\n\t\tthis.plane = plane;\n\n\t\tthis.size = size;\n\n\t\tconst positions2 = [ 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\n\t\tconst geometry2 = new BufferGeometry();\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.computeBoundingSphere();\n\n\t\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tthis.position.set( 0, 0, 0 );\n\n\t\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, 1 );\n\n\t\tthis.lookAt( this.plane.normal );\n\n\t\tthis.translateZ( - this.plane.constant );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nconst _axis = /*@__PURE__*/ new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nclass ArrowHelper extends Object3D {\n\n\t// dir is assumed to be normalized\n\n\tconstructor( dir = new Vector3( 0, 0, 1 ), origin = new Vector3( 0, 0, 0 ), length = 1, color = 0xffff00, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ArrowHelper';\n\n\t\tif ( _lineGeometry === undefined ) {\n\n\t\t\t_lineGeometry = new BufferGeometry();\n\t\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\t_coneGeometry = new CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tsetDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tconst radians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t\t}\n\n\t}\n\n\tsetLength( length, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tthis.line.material.color.set( color );\n\t\tthis.cone.material.color.set( color );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tthis.line.copy( source.line );\n\t\tthis.cone.copy( source.cone );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AxesHelper extends LineSegments {\n\n\tconstructor( size = 1 ) {\n\n\t\tconst vertices = [\n\t\t\t0, 0, 0,\tsize, 0, 0,\n\t\t\t0, 0, 0,\t0, size, 0,\n\t\t\t0, 0, 0,\t0, 0, size\n\t\t];\n\n\t\tconst colors = [\n\t\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t\t0, 0, 1,\t0, 0.6, 1\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'AxesHelper';\n\n\t}\n\n\tsetColors( xAxisColor, yAxisColor, zAxisColor ) {\n\n\t\tconst color = new Color();\n\t\tconst array = this.geometry.attributes.color.array;\n\n\t\tcolor.set( xAxisColor );\n\t\tcolor.toArray( array, 0 );\n\t\tcolor.toArray( array, 3 );\n\n\t\tcolor.set( yAxisColor );\n\t\tcolor.toArray( array, 6 );\n\t\tcolor.toArray( array, 9 );\n\n\t\tcolor.set( zAxisColor );\n\t\tcolor.toArray( array, 12 );\n\t\tcolor.toArray( array, 15 );\n\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass ShapePath {\n\n\tconstructor() {\n\n\t\tthis.type = 'ShapePath';\n\n\t\tthis.color = new Color();\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t}\n\n\ttoShapes( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tlet toChange = 0;\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange ++;\n\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( toChange > 0 && ambiguous === false ) {\n\n\t\t\t\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n}\n\n// Fast Half Float Conversions, http://www.fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst _tables = /*@__PURE__*/ _generateTables();\n\nfunction _generateTables() {\n\n\t// float32 to float16 helpers\n\n\tconst buffer = new ArrayBuffer( 4 );\n\tconst floatView = new Float32Array( buffer );\n\tconst uint32View = new Uint32Array( buffer );\n\n\tconst baseTable = new Uint32Array( 512 );\n\tconst shiftTable = new Uint32Array( 512 );\n\n\tfor ( let i = 0; i < 256; ++ i ) {\n\n\t\tconst e = i - 127;\n\n\t\t// very small number (0, -0)\n\n\t\tif ( e < - 27 ) {\n\n\t\t\tbaseTable[ i ] = 0x0000;\n\t\t\tbaseTable[ i | 0x100 ] = 0x8000;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// small number (denorm)\n\n\t\t} else if ( e < - 14 ) {\n\n\t\t\tbaseTable[ i ] = 0x0400 >> ( - e - 14 );\n\t\t\tbaseTable[ i | 0x100 ] = ( 0x0400 >> ( - e - 14 ) ) | 0x8000;\n\t\t\tshiftTable[ i ] = - e - 1;\n\t\t\tshiftTable[ i | 0x100 ] = - e - 1;\n\n\t\t\t// normal number\n\n\t\t} else if ( e <= 15 ) {\n\n\t\t\tbaseTable[ i ] = ( e + 15 ) << 10;\n\t\t\tbaseTable[ i | 0x100 ] = ( ( e + 15 ) << 10 ) | 0x8000;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t\t// large number (Infinity, -Infinity)\n\n\t\t} else if ( e < 128 ) {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// stay (NaN, Infinity, -Infinity)\n\n\t\t} else {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t}\n\n\t}\n\n\t// float16 to float32 helpers\n\n\tconst mantissaTable = new Uint32Array( 2048 );\n\tconst exponentTable = new Uint32Array( 64 );\n\tconst offsetTable = new Uint32Array( 64 );\n\n\tfor ( let i = 1; i < 1024; ++ i ) {\n\n\t\tlet m = i << 13; // zero pad mantissa bits\n\t\tlet e = 0; // zero exponent\n\n\t\t// normalized\n\t\twhile ( ( m & 0x00800000 ) === 0 ) {\n\n\t\t\tm <<= 1;\n\t\t\te -= 0x00800000; // decrement exponent\n\n\t\t}\n\n\t\tm &= ~ 0x00800000; // clear leading 1 bit\n\t\te += 0x38800000; // adjust bias\n\n\t\tmantissaTable[ i ] = m | e;\n\n\t}\n\n\tfor ( let i = 1024; i < 2048; ++ i ) {\n\n\t\tmantissaTable[ i ] = 0x38000000 + ( ( i - 1024 ) << 13 );\n\n\t}\n\n\tfor ( let i = 1; i < 31; ++ i ) {\n\n\t\texponentTable[ i ] = i << 23;\n\n\t}\n\n\texponentTable[ 31 ] = 0x47800000;\n\texponentTable[ 32 ] = 0x80000000;\n\n\tfor ( let i = 33; i < 63; ++ i ) {\n\n\t\texponentTable[ i ] = 0x80000000 + ( ( i - 32 ) << 23 );\n\n\t}\n\n\texponentTable[ 63 ] = 0xc7800000;\n\n\tfor ( let i = 1; i < 64; ++ i ) {\n\n\t\tif ( i !== 32 ) {\n\n\t\t\toffsetTable[ i ] = 1024;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tfloatView: floatView,\n\t\tuint32View: uint32View,\n\t\tbaseTable: baseTable,\n\t\tshiftTable: shiftTable,\n\t\tmantissaTable: mantissaTable,\n\t\texponentTable: exponentTable,\n\t\toffsetTable: offsetTable\n\t};\n\n}\n\n// float32 to float16\n\nfunction toHalfFloat( val ) {\n\n\tif ( Math.abs( val ) > 65504 ) console.warn( 'THREE.DataUtils.toHalfFloat(): Value out of range.' );\n\n\tval = clamp( val, - 65504, 65504 );\n\n\t_tables.floatView[ 0 ] = val;\n\tconst f = _tables.uint32View[ 0 ];\n\tconst e = ( f >> 23 ) & 0x1ff;\n\treturn _tables.baseTable[ e ] + ( ( f & 0x007fffff ) >> _tables.shiftTable[ e ] );\n\n}\n\n// float16 to float32\n\nfunction fromHalfFloat( val ) {\n\n\tconst m = val >> 10;\n\t_tables.uint32View[ 0 ] = _tables.mantissaTable[ _tables.offsetTable[ m ] + ( val & 0x3ff ) ] + _tables.exponentTable[ m ];\n\treturn _tables.floatView[ 0 ];\n\n}\n\nvar DataUtils = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\ttoHalfFloat: toHalfFloat,\n\tfromHalfFloat: fromHalfFloat\n});\n\n// r133, c5bb5434555a3c3ddd784944a0a124f996fc721b\n\nclass ParametricGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tconsole.error( 'THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js' );\n\t\tsuper();\n\n\t}\n\n}\n\n// r133, eb58ff153119090d3bbb24474ea0ffc40c70dc92\n\nclass TextGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tconsole.error( 'THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js' );\n\t\tsuper();\n\n\t}\n\n}\n\n// r133, eb58ff153119090d3bbb24474ea0ffc40c70dc92\n\nfunction FontLoader() {\n\n\tconsole.error( 'THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js' );\n\n}\n\n// r133, eb58ff153119090d3bbb24474ea0ffc40c70dc92\n\nfunction Font() {\n\n\tconsole.error( 'THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js' );\n\n}\n\n// r134, d65e0af06644fe5a84a6fc0e372f4318f95a04c0\n\nfunction ImmediateRenderObject() {\n\n\tconsole.error( 'THREE.ImmediateRenderObject has been removed.' );\n\n}\n\n// r138, 48b05d3500acc084df50be9b4c90781ad9b8cb17\n\nclass WebGLMultisampleRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width, height, options ) {\n\n\t\tconsole.error( 'THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the \"samples\" property to greater 0 to enable multisampling.' );\n\t\tsuper( width, height, options );\n\t\tthis.samples = 4;\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture2DArray extends DataArrayTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture2DArray has been renamed to DataArrayTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\n// r138, f9cd9cab03b7b64244e304900a3a2eeaa3a588ce\n\nclass DataTexture3D extends Data3DTexture {\n\n\tconstructor( data, width, height, depth ) {\n\n\t\tconsole.warn( 'THREE.DataTexture3D has been renamed to Data3DTexture.' );\n\t\tsuper( data, width, height, depth );\n\n\t}\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, BackSide, BasicDepthPacking, BasicShadowMap, Bone, BooleanKeyframeTrack, Box2, Box3, Box3Helper, BoxGeometry as BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasTexture, CapsuleGeometry as CapsuleBufferGeometry, CapsuleGeometry, CatmullRomCurve3, CineonToneMapping, CircleGeometry as CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, Color, ColorKeyframeTrack, ColorManagement, CompressedTexture, CompressedTextureLoader, ConeGeometry as ConeBufferGeometry, ConeGeometry, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderGeometry as CylinderBufferGeometry, CylinderGeometry, Cylindrical, Data3DTexture, DataArrayTexture, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DataUtils, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DiscreteInterpolant, DodecahedronGeometry as DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeGeometry as ExtrudeBufferGeometry, ExtrudeGeometry, FileLoader, FlatShading, Float16BufferAttribute, Float32BufferAttribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FramebufferTexture, FrontSide, Frustum, GLBufferAttribute, GLSL1, GLSL3, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronGeometry as IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16BufferAttribute, Int32BufferAttribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, KeepStencilOp, KeyframeTrack, LOD, LatheGeometry as LatheBufferGeometry, LatheGeometry, Layers, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LineSegments, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearSRGBColorSpace, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColorSpace, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronGeometry as OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricGeometry, Path, PerspectiveCamera, Plane, PlaneGeometry as PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronGeometry as PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBFormat, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingGeometry as RingBufferGeometry, RingGeometry, SRGBColorSpace, Scene, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeGeometry as ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Source, Sphere, SphereGeometry as SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, SplineCurve, SpotLight, SpotLightHelper, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronGeometry as TetrahedronBufferGeometry, TetrahedronGeometry, TextGeometry, Texture, TextureLoader, TorusGeometry as TorusBufferGeometry, TorusGeometry, TorusKnotGeometry as TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeGeometry as TubeBufferGeometry, TubeGeometry, UVMapping, Uint16BufferAttribute, Uint32BufferAttribute, Uint8BufferAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsGroup, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, VideoTexture, WebGL1Renderer, WebGL3DRenderTarget, WebGLArrayRenderTarget, WebGLCubeRenderTarget, WebGLMultipleRenderTargets, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderer, WebGLUtils, WireframeGeometry, WrapAroundEnding, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, _SRGBAFormat, sRGBEncoding };\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t    removePointer( event );\n\n\t\t    if ( pointers.length === 0 ) {\n\n\t\t        scope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t        scope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t        scope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t    }\n\n\t\t    scope.dispatchEvent( _endEvent );\n\n\t\t    state = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenColor.fromArray( extension.sheenColorFactor );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || 0;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends MeshStandardMaterial {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.roughness += geometryRoughness;',\n\t\t\t'material.roughness = min( material.roughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity'\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef, sRGBEncoding ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = materialParams.emissiveIntensity === undefined ? 1.0 : materialParams.emissiveIntensity;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\n\treturn 'image/png';\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tconst isSafari = /^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === true;\n\t\tconst isFirefox = navigator.userAgent.indexOf( 'Firefox' ) > - 1;\n\t\tconst firefoxVersion = isFirefox ? navigator.userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\tif ( typeof createImageBitmap === 'undefined' || isSafari || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, encoding ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = encoding;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, sRGBEncoding ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierarchy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierarchy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierarchy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n","/**\n * Full-screen textured quad shader\n */\n\nconst CopyShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}`\n\n};\n\nexport { CopyShader };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tOrthographicCamera,\n\tMesh\n} from 'three';\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new BufferGeometry();\n_geometry.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { Pass, FullScreenQuad };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\n\nclass ShaderPass extends Pass {\n\n\tconstructor( shader, textureID ) {\n\n\t\tsuper();\n\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\t\tif ( shader instanceof ShaderMaterial ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t\tthis.material = new ShaderMaterial( {\n\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n}\n\nexport { ShaderPass };\n","import { Pass } from './Pass.js';\n\nclass MaskPass extends Pass {\n\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.clear = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis.inverse = false;\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\nclass ClearMaskPass extends Pass {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.needsSwap = false;\n\n\t}\n\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tBufferGeometry,\n\tClock,\n\tFloat32BufferAttribute,\n\tMesh,\n\tOrthographicCamera,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from './ShaderPass.js';\nimport { MaskPass } from './MaskPass.js';\nimport { ClearMaskPass } from './MaskPass.js';\n\nclass EffectComposer {\n\n\tconstructor( renderer, renderTarget ) {\n\n\t\tthis.renderer = renderer;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._pixelRatio = 1;\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tthis.renderToScreen = true;\n\n\t\tthis.passes = [];\n\n\t\t// dependencies\n\n\t\tif ( CopyShader === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t\t}\n\n\t\tif ( ShaderPass === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t\t}\n\n\t\tthis.copyPass = new ShaderPass( CopyShader );\n\n\t\tthis.clock = new Clock();\n\n\t}\n\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n}\n\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new BufferGeometry();\n_geometry.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { EffectComposer, Pass, FullScreenQuad };\n","import {\n\tColor\n} from 'three';\nimport { Pass } from './Pass.js';\n\nclass RenderPass extends Pass {\n\n\tconstructor( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\tthis.clearColor = clearColor;\n\t\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\t\tthis.clear = true;\n\t\tthis.clearDepth = false;\n\t\tthis.needsSwap = false;\n\t\tthis._oldClearColor = new Color();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\nexport { RenderPass };\n","import {\n\tVector2\n} from 'three';\n\n/**\n * NVIDIA FXAA by Timothy Lottes\n * https://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n * - WebGL port by @supereggbert\n * http://www.glge.org/demos/fxaa/\n * Further improved by Daniel Sturk\n */\n\nconst FXAAShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'resolution': { value: new Vector2( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: `\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t`\n\n};\n\nexport { FXAAShader };\n","import {\n\tColor\n} from 'three';\n\n/**\n * Luminosity\n * http://en.wikipedia.org/wiki/Luminosity\n */\n\nconst LuminosityHighPassShader = {\n\n\tshaderID: 'luminosityHighPass',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'luminosityThreshold': { value: 1.0 },\n\t\t'smoothWidth': { value: 1.0 },\n\t\t'defaultColor': { value: new Color( 0x000000 ) },\n\t\t'defaultOpacity': { value: 0.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}`\n\n};\n\nexport { LuminosityHighPassShader };\n","import {\n\tAdditiveBlending,\n\tColor,\n\tMeshBasicMaterial,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { LuminosityHighPassShader } from '../shaders/LuminosityHighPassShader.js';\n\n/**\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\n * mip map chain of bloom textures and blurs them with different radii. Because\n * of the weighted combination of mips, and because larger blurs are done on\n * higher mips, this effect provides good quality and performance.\n *\n * Reference:\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\n */\nclass UnrealBloomPass extends Pass {\n\n\tconstructor( resolution, strength, radius, threshold ) {\n\n\t\tsuper();\n\n\t\tthis.strength = ( strength !== undefined ) ? strength : 1;\n\t\tthis.radius = radius;\n\t\tthis.threshold = threshold;\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t\t// create color only once here, reuse it later inside the render function\n\t\tthis.clearColor = new Color( 0, 0, 0 );\n\n\t\t// render targets\n\t\tthis.renderTargetsHorizontal = [];\n\t\tthis.renderTargetsVertical = [];\n\t\tthis.nMips = 5;\n\t\tlet resx = Math.round( this.resolution.x / 2 );\n\t\tlet resy = Math.round( this.resolution.y / 2 );\n\n\t\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy );\n\t\tthis.renderTargetBright.texture.name = 'UnrealBloomPass.bright';\n\t\tthis.renderTargetBright.texture.generateMipmaps = false;\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tconst renderTargetHorizonal = new WebGLRenderTarget( resx, resy );\n\n\t\t\trenderTargetHorizonal.texture.name = 'UnrealBloomPass.h' + i;\n\t\t\trenderTargetHorizonal.texture.generateMipmaps = false;\n\n\t\t\tthis.renderTargetsHorizontal.push( renderTargetHorizonal );\n\n\t\t\tconst renderTargetVertical = new WebGLRenderTarget( resx, resy );\n\n\t\t\trenderTargetVertical.texture.name = 'UnrealBloomPass.v' + i;\n\t\t\trenderTargetVertical.texture.generateMipmaps = false;\n\n\t\t\tthis.renderTargetsVertical.push( renderTargetVertical );\n\n\t\t\tresx = Math.round( resx / 2 );\n\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t\t// luminosity high pass material\n\n\t\tif ( LuminosityHighPassShader === undefined )\n\t\t\tconsole.error( 'THREE.UnrealBloomPass relies on LuminosityHighPassShader' );\n\n\t\tconst highPassShader = LuminosityHighPassShader;\n\t\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\n\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = threshold;\n\t\tthis.highPassUniforms[ 'smoothWidth' ].value = 0.01;\n\n\t\tthis.materialHighPassFilter = new ShaderMaterial( {\n\t\t\tuniforms: this.highPassUniforms,\n\t\t\tvertexShader: highPassShader.vertexShader,\n\t\t\tfragmentShader: highPassShader.fragmentShader,\n\t\t\tdefines: {}\n\t\t} );\n\n\t\t// Gaussian Blur Materials\n\t\tthis.separableBlurMaterials = [];\n\t\tconst kernelSizeArray = [ 3, 5, 7, 9, 11 ];\n\t\tresx = Math.round( this.resolution.x / 2 );\n\t\tresy = Math.round( this.resolution.y / 2 );\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t\t// Composite material\n\t\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture1' ].value = this.renderTargetsVertical[ 0 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture2' ].value = this.renderTargetsVertical[ 1 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture3' ].value = this.renderTargetsVertical[ 2 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture4' ].value = this.renderTargetsVertical[ 3 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture5' ].value = this.renderTargetsVertical[ 4 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = strength;\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = 0.1;\n\t\tthis.compositeMaterial.needsUpdate = true;\n\n\t\tconst bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\n\t\tthis.compositeMaterial.uniforms[ 'bloomFactors' ].value = bloomFactors;\n\t\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t\t// copy material\n\t\tif ( CopyShader === undefined ) {\n\n\t\t\tconsole.error( 'THREE.UnrealBloomPass relies on CopyShader' );\n\n\t\t}\n\n\t\tconst copyShader = CopyShader;\n\n\t\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\n\t\tthis.copyUniforms[ 'opacity' ].value = 1.0;\n\n\t\tthis.materialCopy = new ShaderMaterial( {\n\t\t\tuniforms: this.copyUniforms,\n\t\t\tvertexShader: copyShader.vertexShader,\n\t\t\tfragmentShader: copyShader.fragmentShader,\n\t\t\tblending: AdditiveBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.enabled = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis._oldClearColor = new Color();\n\t\tthis.oldClearAlpha = 1;\n\n\t\tthis.basic = new MeshBasicMaterial();\n\n\t\tthis.fsQuad = new FullScreenQuad( null );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\n\n\t\t}\n\n\t\tfor ( let i = 0; i < this.renderTargetsVertical.length; i ++ ) {\n\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\n\n\t\t}\n\n\t\tthis.renderTargetBright.dispose();\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tlet resx = Math.round( width / 2 );\n\t\tlet resy = Math.round( height / 2 );\n\n\t\tthis.renderTargetBright.setSize( resx, resy );\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\trenderer.getClearColor( this._oldClearColor );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setClearColor( this.clearColor, 0 );\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t// Render input to screen\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.basic;\n\t\t\tthis.basic.map = readBuffer.texture;\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// 1. Extract Bright Areas\n\n\t\tthis.highPassUniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = this.threshold;\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\n\n\t\trenderer.setRenderTarget( this.renderTargetBright );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// 2. Blur All the mips progressively\n\n\t\tlet inputRenderTarget = this.renderTargetBright;\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = inputRenderTarget.texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = this.renderTargetsHorizontal[ i ].texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\n\n\t\t}\n\n\t\t// Composite All the mips\n\n\t\tthis.fsQuad.material = this.compositeMaterial;\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = this.strength;\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = this.radius;\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// Blend it additively over the input texture\n\n\t\tthis.fsQuad.material = this.materialCopy;\n\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetsHorizontal[ 0 ].texture;\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Restore renderer settings\n\n\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n\tgetSeperableBlurMaterial( kernelRadius ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'KERNEL_RADIUS': kernelRadius,\n\t\t\t\t'SIGMA': kernelRadius\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'colorTexture': { value: null },\n\t\t\t\t'texSize': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\tgetCompositeMaterial( nMips ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'NUM_MIPS': nMips\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'blurTexture1': { value: null },\n\t\t\t\t'blurTexture2': { value: null },\n\t\t\t\t'blurTexture3': { value: null },\n\t\t\t\t'blurTexture4': { value: null },\n\t\t\t\t'blurTexture5': { value: null },\n\t\t\t\t'bloomStrength': { value: 1.0 },\n\t\t\t\t'bloomFactors': { value: null },\n\t\t\t\t'bloomTintColors': { value: null },\n\t\t\t\t'bloomRadius': { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n}\n\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { UnrealBloomPass };\n","function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/*!\n * GSAP 3.11.1\n * https://greensock.com\n *\n * @license Copyright 2008-2022, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nvar _config = {\n  autoSleep: 120,\n  force3D: \"auto\",\n  nullTargetWarn: 1,\n  units: {\n    lineHeight: \"\"\n  }\n},\n    _defaults = {\n  duration: .5,\n  overwrite: false,\n  delay: 0\n},\n    _suppressOverwrites,\n    _reverting,\n    _context,\n    _bigNum = 1e8,\n    _tinyNum = 1 / _bigNum,\n    _2PI = Math.PI * 2,\n    _HALF_PI = _2PI / 4,\n    _gsID = 0,\n    _sqrt = Math.sqrt,\n    _cos = Math.cos,\n    _sin = Math.sin,\n    _isString = function _isString(value) {\n  return typeof value === \"string\";\n},\n    _isFunction = function _isFunction(value) {\n  return typeof value === \"function\";\n},\n    _isNumber = function _isNumber(value) {\n  return typeof value === \"number\";\n},\n    _isUndefined = function _isUndefined(value) {\n  return typeof value === \"undefined\";\n},\n    _isObject = function _isObject(value) {\n  return typeof value === \"object\";\n},\n    _isNotFalse = function _isNotFalse(value) {\n  return value !== false;\n},\n    _windowExists = function _windowExists() {\n  return typeof window !== \"undefined\";\n},\n    _isFuncOrString = function _isFuncOrString(value) {\n  return _isFunction(value) || _isString(value);\n},\n    _isTypedArray = typeof ArrayBuffer === \"function\" && ArrayBuffer.isView || function () {},\n    // note: IE10 has ArrayBuffer, but NOT ArrayBuffer.isView().\n_isArray = Array.isArray,\n    _strictNumExp = /(?:-?\\.?\\d|\\.)+/gi,\n    //only numbers (including negatives and decimals) but NOT relative values.\n_numExp = /[-+=.]*\\d+[.e\\-+]*\\d*[e\\-+]*\\d*/g,\n    //finds any numbers, including ones that start with += or -=, negative numbers, and ones in scientific notation like 1e-8.\n_numWithUnitExp = /[-+=.]*\\d+[.e-]*\\d*[a-z%]*/g,\n    _complexStringNumExp = /[-+=.]*\\d+\\.?\\d*(?:e-|e\\+)?\\d*/gi,\n    //duplicate so that while we're looping through matches from exec(), it doesn't contaminate the lastIndex of _numExp which we use to search for colors too.\n_relExp = /[+-]=-?[.\\d]+/,\n    _delimitedValueExp = /[^,'\"\\[\\]\\s]+/gi,\n    // previously /[#\\-+.]*\\b[a-z\\d\\-=+%.]+/gi but didn't catch special characters.\n_unitExp = /^[+\\-=e\\s\\d]*\\d+[.\\d]*([a-z]*|%)\\s*$/i,\n    _globalTimeline,\n    _win,\n    _coreInitted,\n    _doc,\n    _globals = {},\n    _installScope = {},\n    _coreReady,\n    _install = function _install(scope) {\n  return (_installScope = _merge(scope, _globals)) && gsap;\n},\n    _missingPlugin = function _missingPlugin(property, value) {\n  return console.warn(\"Invalid property\", property, \"set to\", value, \"Missing plugin? gsap.registerPlugin()\");\n},\n    _warn = function _warn(message, suppress) {\n  return !suppress && console.warn(message);\n},\n    _addGlobal = function _addGlobal(name, obj) {\n  return name && (_globals[name] = obj) && _installScope && (_installScope[name] = obj) || _globals;\n},\n    _emptyFunc = function _emptyFunc() {\n  return 0;\n},\n    _startAtRevertConfig = {\n  suppressEvents: true,\n  isStart: true\n},\n    _revertConfig = {\n  suppressEvents: true\n},\n    _reservedProps = {},\n    _lazyTweens = [],\n    _lazyLookup = {},\n    _lastRenderedFrame,\n    _plugins = {},\n    _effects = {},\n    _nextGCFrame = 30,\n    _harnessPlugins = [],\n    _callbackNames = \"\",\n    _harness = function _harness(targets) {\n  var target = targets[0],\n      harnessPlugin,\n      i;\n  _isObject(target) || _isFunction(target) || (targets = [targets]);\n\n  if (!(harnessPlugin = (target._gsap || {}).harness)) {\n    // find the first target with a harness. We assume targets passed into an animation will be of similar type, meaning the same kind of harness can be used for them all (performance optimization)\n    i = _harnessPlugins.length;\n\n    while (i-- && !_harnessPlugins[i].targetTest(target)) {}\n\n    harnessPlugin = _harnessPlugins[i];\n  }\n\n  i = targets.length;\n\n  while (i--) {\n    targets[i] && (targets[i]._gsap || (targets[i]._gsap = new GSCache(targets[i], harnessPlugin))) || targets.splice(i, 1);\n  }\n\n  return targets;\n},\n    _getCache = function _getCache(target) {\n  return target._gsap || _harness(toArray(target))[0]._gsap;\n},\n    _getProperty = function _getProperty(target, property, v) {\n  return (v = target[property]) && _isFunction(v) ? target[property]() : _isUndefined(v) && target.getAttribute && target.getAttribute(property) || v;\n},\n    _forEachName = function _forEachName(names, func) {\n  return (names = names.split(\",\")).forEach(func) || names;\n},\n    //split a comma-delimited list of names into an array, then run a forEach() function and return the split array (this is just a way to consolidate/shorten some code).\n_round = function _round(value) {\n  return Math.round(value * 100000) / 100000 || 0;\n},\n    _roundPrecise = function _roundPrecise(value) {\n  return Math.round(value * 10000000) / 10000000 || 0;\n},\n    // increased precision mostly for timing values.\n_parseRelative = function _parseRelative(start, value) {\n  var operator = value.charAt(0),\n      end = parseFloat(value.substr(2));\n  start = parseFloat(start);\n  return operator === \"+\" ? start + end : operator === \"-\" ? start - end : operator === \"*\" ? start * end : start / end;\n},\n    _arrayContainsAny = function _arrayContainsAny(toSearch, toFind) {\n  //searches one array to find matches for any of the items in the toFind array. As soon as one is found, it returns true. It does NOT return all the matches; it's simply a boolean search.\n  var l = toFind.length,\n      i = 0;\n\n  for (; toSearch.indexOf(toFind[i]) < 0 && ++i < l;) {}\n\n  return i < l;\n},\n    _lazyRender = function _lazyRender() {\n  var l = _lazyTweens.length,\n      a = _lazyTweens.slice(0),\n      i,\n      tween;\n\n  _lazyLookup = {};\n  _lazyTweens.length = 0;\n\n  for (i = 0; i < l; i++) {\n    tween = a[i];\n    tween && tween._lazy && (tween.render(tween._lazy[0], tween._lazy[1], true)._lazy = 0);\n  }\n},\n    _lazySafeRender = function _lazySafeRender(animation, time, suppressEvents, force) {\n  _lazyTweens.length && _lazyRender();\n  animation.render(time, suppressEvents, force || _reverting);\n  _lazyTweens.length && _lazyRender(); //in case rendering caused any tweens to lazy-init, we should render them because typically when someone calls seek() or time() or progress(), they expect an immediate render.\n},\n    _numericIfPossible = function _numericIfPossible(value) {\n  var n = parseFloat(value);\n  return (n || n === 0) && (value + \"\").match(_delimitedValueExp).length < 2 ? n : _isString(value) ? value.trim() : value;\n},\n    _passThrough = function _passThrough(p) {\n  return p;\n},\n    _setDefaults = function _setDefaults(obj, defaults) {\n  for (var p in defaults) {\n    p in obj || (obj[p] = defaults[p]);\n  }\n\n  return obj;\n},\n    _setKeyframeDefaults = function _setKeyframeDefaults(excludeDuration) {\n  return function (obj, defaults) {\n    for (var p in defaults) {\n      p in obj || p === \"duration\" && excludeDuration || p === \"ease\" || (obj[p] = defaults[p]);\n    }\n  };\n},\n    _merge = function _merge(base, toMerge) {\n  for (var p in toMerge) {\n    base[p] = toMerge[p];\n  }\n\n  return base;\n},\n    _mergeDeep = function _mergeDeep(base, toMerge) {\n  for (var p in toMerge) {\n    p !== \"__proto__\" && p !== \"constructor\" && p !== \"prototype\" && (base[p] = _isObject(toMerge[p]) ? _mergeDeep(base[p] || (base[p] = {}), toMerge[p]) : toMerge[p]);\n  }\n\n  return base;\n},\n    _copyExcluding = function _copyExcluding(obj, excluding) {\n  var copy = {},\n      p;\n\n  for (p in obj) {\n    p in excluding || (copy[p] = obj[p]);\n  }\n\n  return copy;\n},\n    _inheritDefaults = function _inheritDefaults(vars) {\n  var parent = vars.parent || _globalTimeline,\n      func = vars.keyframes ? _setKeyframeDefaults(_isArray(vars.keyframes)) : _setDefaults;\n\n  if (_isNotFalse(vars.inherit)) {\n    while (parent) {\n      func(vars, parent.vars.defaults);\n      parent = parent.parent || parent._dp;\n    }\n  }\n\n  return vars;\n},\n    _arraysMatch = function _arraysMatch(a1, a2) {\n  var i = a1.length,\n      match = i === a2.length;\n\n  while (match && i-- && a1[i] === a2[i]) {}\n\n  return i < 0;\n},\n    _addLinkedListItem = function _addLinkedListItem(parent, child, firstProp, lastProp, sortBy) {\n  if (firstProp === void 0) {\n    firstProp = \"_first\";\n  }\n\n  if (lastProp === void 0) {\n    lastProp = \"_last\";\n  }\n\n  var prev = parent[lastProp],\n      t;\n\n  if (sortBy) {\n    t = child[sortBy];\n\n    while (prev && prev[sortBy] > t) {\n      prev = prev._prev;\n    }\n  }\n\n  if (prev) {\n    child._next = prev._next;\n    prev._next = child;\n  } else {\n    child._next = parent[firstProp];\n    parent[firstProp] = child;\n  }\n\n  if (child._next) {\n    child._next._prev = child;\n  } else {\n    parent[lastProp] = child;\n  }\n\n  child._prev = prev;\n  child.parent = child._dp = parent;\n  return child;\n},\n    _removeLinkedListItem = function _removeLinkedListItem(parent, child, firstProp, lastProp) {\n  if (firstProp === void 0) {\n    firstProp = \"_first\";\n  }\n\n  if (lastProp === void 0) {\n    lastProp = \"_last\";\n  }\n\n  var prev = child._prev,\n      next = child._next;\n\n  if (prev) {\n    prev._next = next;\n  } else if (parent[firstProp] === child) {\n    parent[firstProp] = next;\n  }\n\n  if (next) {\n    next._prev = prev;\n  } else if (parent[lastProp] === child) {\n    parent[lastProp] = prev;\n  }\n\n  child._next = child._prev = child.parent = null; // don't delete the _dp just so we can revert if necessary. But parent should be null to indicate the item isn't in a linked list.\n},\n    _removeFromParent = function _removeFromParent(child, onlyIfParentHasAutoRemove) {\n  child.parent && (!onlyIfParentHasAutoRemove || child.parent.autoRemoveChildren) && child.parent.remove(child);\n  child._act = 0;\n},\n    _uncache = function _uncache(animation, child) {\n  if (animation && (!child || child._end > animation._dur || child._start < 0)) {\n    // performance optimization: if a child animation is passed in we should only uncache if that child EXTENDS the animation (its end time is beyond the end)\n    var a = animation;\n\n    while (a) {\n      a._dirty = 1;\n      a = a.parent;\n    }\n  }\n\n  return animation;\n},\n    _recacheAncestors = function _recacheAncestors(animation) {\n  var parent = animation.parent;\n\n  while (parent && parent.parent) {\n    //sometimes we must force a re-sort of all children and update the duration/totalDuration of all ancestor timelines immediately in case, for example, in the middle of a render loop, one tween alters another tween's timeScale which shoves its startTime before 0, forcing the parent timeline to shift around and shiftChildren() which could affect that next tween's render (startTime). Doesn't matter for the root timeline though.\n    parent._dirty = 1;\n    parent.totalDuration();\n    parent = parent.parent;\n  }\n\n  return animation;\n},\n    _rewindStartAt = function _rewindStartAt(tween, totalTime, suppressEvents, force) {\n  return tween._startAt && (_reverting ? tween._startAt.revert(_revertConfig) : tween.vars.immediateRender && !tween.vars.autoRevert || tween._startAt.render(totalTime, true, force));\n},\n    _hasNoPausedAncestors = function _hasNoPausedAncestors(animation) {\n  return !animation || animation._ts && _hasNoPausedAncestors(animation.parent);\n},\n    _elapsedCycleDuration = function _elapsedCycleDuration(animation) {\n  return animation._repeat ? _animationCycle(animation._tTime, animation = animation.duration() + animation._rDelay) * animation : 0;\n},\n    // feed in the totalTime and cycleDuration and it'll return the cycle (iteration minus 1) and if the playhead is exactly at the very END, it will NOT bump up to the next cycle.\n_animationCycle = function _animationCycle(tTime, cycleDuration) {\n  var whole = Math.floor(tTime /= cycleDuration);\n  return tTime && whole === tTime ? whole - 1 : whole;\n},\n    _parentToChildTotalTime = function _parentToChildTotalTime(parentTime, child) {\n  return (parentTime - child._start) * child._ts + (child._ts >= 0 ? 0 : child._dirty ? child.totalDuration() : child._tDur);\n},\n    _setEnd = function _setEnd(animation) {\n  return animation._end = _roundPrecise(animation._start + (animation._tDur / Math.abs(animation._ts || animation._rts || _tinyNum) || 0));\n},\n    _alignPlayhead = function _alignPlayhead(animation, totalTime) {\n  // adjusts the animation's _start and _end according to the provided totalTime (only if the parent's smoothChildTiming is true and the animation isn't paused). It doesn't do any rendering or forcing things back into parent timelines, etc. - that's what totalTime() is for.\n  var parent = animation._dp;\n\n  if (parent && parent.smoothChildTiming && animation._ts) {\n    animation._start = _roundPrecise(parent._time - (animation._ts > 0 ? totalTime / animation._ts : ((animation._dirty ? animation.totalDuration() : animation._tDur) - totalTime) / -animation._ts));\n\n    _setEnd(animation);\n\n    parent._dirty || _uncache(parent, animation); //for performance improvement. If the parent's cache is already dirty, it already took care of marking the ancestors as dirty too, so skip the function call here.\n  }\n\n  return animation;\n},\n\n/*\n_totalTimeToTime = (clampedTotalTime, duration, repeat, repeatDelay, yoyo) => {\n\tlet cycleDuration = duration + repeatDelay,\n\t\ttime = _round(clampedTotalTime % cycleDuration);\n\tif (time > duration) {\n\t\ttime = duration;\n\t}\n\treturn (yoyo && (~~(clampedTotalTime / cycleDuration) & 1)) ? duration - time : time;\n},\n*/\n_postAddChecks = function _postAddChecks(timeline, child) {\n  var t;\n\n  if (child._time || child._initted && !child._dur) {\n    //in case, for example, the _start is moved on a tween that has already rendered. Imagine it's at its end state, then the startTime is moved WAY later (after the end of this timeline), it should render at its beginning.\n    t = _parentToChildTotalTime(timeline.rawTime(), child);\n\n    if (!child._dur || _clamp(0, child.totalDuration(), t) - child._tTime > _tinyNum) {\n      child.render(t, true);\n    }\n  } //if the timeline has already ended but the inserted tween/timeline extends the duration, we should enable this timeline again so that it renders properly. We should also align the playhead with the parent timeline's when appropriate.\n\n\n  if (_uncache(timeline, child)._dp && timeline._initted && timeline._time >= timeline._dur && timeline._ts) {\n    //in case any of the ancestors had completed but should now be enabled...\n    if (timeline._dur < timeline.duration()) {\n      t = timeline;\n\n      while (t._dp) {\n        t.rawTime() >= 0 && t.totalTime(t._tTime); //moves the timeline (shifts its startTime) if necessary, and also enables it. If it's currently zero, though, it may not be scheduled to render until later so there's no need to force it to align with the current playhead position. Only move to catch up with the playhead.\n\n        t = t._dp;\n      }\n    }\n\n    timeline._zTime = -_tinyNum; // helps ensure that the next render() will be forced (crossingStart = true in render()), even if the duration hasn't changed (we're adding a child which would need to get rendered). Definitely an edge case. Note: we MUST do this AFTER the loop above where the totalTime() might trigger a render() because this _addToTimeline() method gets called from the Animation constructor, BEFORE tweens even record their targets, etc. so we wouldn't want things to get triggered in the wrong order.\n  }\n},\n    _addToTimeline = function _addToTimeline(timeline, child, position, skipChecks) {\n  child.parent && _removeFromParent(child);\n  child._start = _roundPrecise((_isNumber(position) ? position : position || timeline !== _globalTimeline ? _parsePosition(timeline, position, child) : timeline._time) + child._delay);\n  child._end = _roundPrecise(child._start + (child.totalDuration() / Math.abs(child.timeScale()) || 0));\n\n  _addLinkedListItem(timeline, child, \"_first\", \"_last\", timeline._sort ? \"_start\" : 0);\n\n  _isFromOrFromStart(child) || (timeline._recent = child);\n  skipChecks || _postAddChecks(timeline, child);\n  timeline._ts < 0 && _alignPlayhead(timeline, timeline._tTime); // if the timeline is reversed and the new child makes it longer, we may need to adjust the parent's _start (push it back)\n\n  return timeline;\n},\n    _scrollTrigger = function _scrollTrigger(animation, trigger) {\n  return (_globals.ScrollTrigger || _missingPlugin(\"scrollTrigger\", trigger)) && _globals.ScrollTrigger.create(trigger, animation);\n},\n    _attemptInitTween = function _attemptInitTween(tween, totalTime, force, suppressEvents) {\n  _initTween(tween, totalTime);\n\n  if (!tween._initted) {\n    return 1;\n  }\n\n  if (!force && tween._pt && (tween._dur && tween.vars.lazy !== false || !tween._dur && tween.vars.lazy) && _lastRenderedFrame !== _ticker.frame) {\n    _lazyTweens.push(tween);\n\n    tween._lazy = [totalTime, suppressEvents];\n    return 1;\n  }\n},\n    _parentPlayheadIsBeforeStart = function _parentPlayheadIsBeforeStart(_ref) {\n  var parent = _ref.parent;\n  return parent && parent._ts && parent._initted && !parent._lock && (parent.rawTime() < 0 || _parentPlayheadIsBeforeStart(parent));\n},\n    // check parent's _lock because when a timeline repeats/yoyos and does its artificial wrapping, we shouldn't force the ratio back to 0\n_isFromOrFromStart = function _isFromOrFromStart(_ref2) {\n  var data = _ref2.data;\n  return data === \"isFromStart\" || data === \"isStart\";\n},\n    _renderZeroDurationTween = function _renderZeroDurationTween(tween, totalTime, suppressEvents, force) {\n  var prevRatio = tween.ratio,\n      ratio = totalTime < 0 || !totalTime && (!tween._start && _parentPlayheadIsBeforeStart(tween) && !(!tween._initted && _isFromOrFromStart(tween)) || (tween._ts < 0 || tween._dp._ts < 0) && !_isFromOrFromStart(tween)) ? 0 : 1,\n      // if the tween or its parent is reversed and the totalTime is 0, we should go to a ratio of 0. Edge case: if a from() or fromTo() stagger tween is placed later in a timeline, the \"startAt\" zero-duration tween could initially render at a time when the parent timeline's playhead is technically BEFORE where this tween is, so make sure that any \"from\" and \"fromTo\" startAt tweens are rendered the first time at a ratio of 1.\n  repeatDelay = tween._rDelay,\n      tTime = 0,\n      pt,\n      iteration,\n      prevIteration;\n\n  if (repeatDelay && tween._repeat) {\n    // in case there's a zero-duration tween that has a repeat with a repeatDelay\n    tTime = _clamp(0, tween._tDur, totalTime);\n    iteration = _animationCycle(tTime, repeatDelay);\n    tween._yoyo && iteration & 1 && (ratio = 1 - ratio);\n\n    if (iteration !== _animationCycle(tween._tTime, repeatDelay)) {\n      // if iteration changed\n      prevRatio = 1 - ratio;\n      tween.vars.repeatRefresh && tween._initted && tween.invalidate();\n    }\n  }\n\n  if (ratio !== prevRatio || _reverting || force || tween._zTime === _tinyNum || !totalTime && tween._zTime) {\n    if (!tween._initted && _attemptInitTween(tween, totalTime, force, suppressEvents)) {\n      // if we render the very beginning (time == 0) of a fromTo(), we must force the render (normal tweens wouldn't need to render at a time of 0 when the prevTime was also 0). This is also mandatory to make sure overwriting kicks in immediately.\n      return;\n    }\n\n    prevIteration = tween._zTime;\n    tween._zTime = totalTime || (suppressEvents ? _tinyNum : 0); // when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect.\n\n    suppressEvents || (suppressEvents = totalTime && !prevIteration); // if it was rendered previously at exactly 0 (_zTime) and now the playhead is moving away, DON'T fire callbacks otherwise they'll seem like duplicates.\n\n    tween.ratio = ratio;\n    tween._from && (ratio = 1 - ratio);\n    tween._time = 0;\n    tween._tTime = tTime;\n    pt = tween._pt;\n\n    while (pt) {\n      pt.r(ratio, pt.d);\n      pt = pt._next;\n    }\n\n    totalTime < 0 && _rewindStartAt(tween, totalTime, suppressEvents, true);\n    tween._onUpdate && !suppressEvents && _callback(tween, \"onUpdate\");\n    tTime && tween._repeat && !suppressEvents && tween.parent && _callback(tween, \"onRepeat\");\n\n    if ((totalTime >= tween._tDur || totalTime < 0) && tween.ratio === ratio) {\n      ratio && _removeFromParent(tween, 1);\n\n      if (!suppressEvents && !_reverting) {\n        _callback(tween, ratio ? \"onComplete\" : \"onReverseComplete\", true);\n\n        tween._prom && tween._prom();\n      }\n    }\n  } else if (!tween._zTime) {\n    tween._zTime = totalTime;\n  }\n},\n    _findNextPauseTween = function _findNextPauseTween(animation, prevTime, time) {\n  var child;\n\n  if (time > prevTime) {\n    child = animation._first;\n\n    while (child && child._start <= time) {\n      if (child.data === \"isPause\" && child._start > prevTime) {\n        return child;\n      }\n\n      child = child._next;\n    }\n  } else {\n    child = animation._last;\n\n    while (child && child._start >= time) {\n      if (child.data === \"isPause\" && child._start < prevTime) {\n        return child;\n      }\n\n      child = child._prev;\n    }\n  }\n},\n    _setDuration = function _setDuration(animation, duration, skipUncache, leavePlayhead) {\n  var repeat = animation._repeat,\n      dur = _roundPrecise(duration) || 0,\n      totalProgress = animation._tTime / animation._tDur;\n  totalProgress && !leavePlayhead && (animation._time *= dur / animation._dur);\n  animation._dur = dur;\n  animation._tDur = !repeat ? dur : repeat < 0 ? 1e10 : _roundPrecise(dur * (repeat + 1) + animation._rDelay * repeat);\n  totalProgress > 0 && !leavePlayhead ? _alignPlayhead(animation, animation._tTime = animation._tDur * totalProgress) : animation.parent && _setEnd(animation);\n  skipUncache || _uncache(animation.parent, animation);\n  return animation;\n},\n    _onUpdateTotalDuration = function _onUpdateTotalDuration(animation) {\n  return animation instanceof Timeline ? _uncache(animation) : _setDuration(animation, animation._dur);\n},\n    _zeroPosition = {\n  _start: 0,\n  endTime: _emptyFunc,\n  totalDuration: _emptyFunc\n},\n    _parsePosition = function _parsePosition(animation, position, percentAnimation) {\n  var labels = animation.labels,\n      recent = animation._recent || _zeroPosition,\n      clippedDuration = animation.duration() >= _bigNum ? recent.endTime(false) : animation._dur,\n      //in case there's a child that infinitely repeats, users almost never intend for the insertion point of a new child to be based on a SUPER long value like that so we clip it and assume the most recently-added child's endTime should be used instead.\n  i,\n      offset,\n      isPercent;\n\n  if (_isString(position) && (isNaN(position) || position in labels)) {\n    //if the string is a number like \"1\", check to see if there's a label with that name, otherwise interpret it as a number (absolute value).\n    offset = position.charAt(0);\n    isPercent = position.substr(-1) === \"%\";\n    i = position.indexOf(\"=\");\n\n    if (offset === \"<\" || offset === \">\") {\n      i >= 0 && (position = position.replace(/=/, \"\"));\n      return (offset === \"<\" ? recent._start : recent.endTime(recent._repeat >= 0)) + (parseFloat(position.substr(1)) || 0) * (isPercent ? (i < 0 ? recent : percentAnimation).totalDuration() / 100 : 1);\n    }\n\n    if (i < 0) {\n      position in labels || (labels[position] = clippedDuration);\n      return labels[position];\n    }\n\n    offset = parseFloat(position.charAt(i - 1) + position.substr(i + 1));\n\n    if (isPercent && percentAnimation) {\n      offset = offset / 100 * (_isArray(percentAnimation) ? percentAnimation[0] : percentAnimation).totalDuration();\n    }\n\n    return i > 1 ? _parsePosition(animation, position.substr(0, i - 1), percentAnimation) + offset : clippedDuration + offset;\n  }\n\n  return position == null ? clippedDuration : +position;\n},\n    _createTweenType = function _createTweenType(type, params, timeline) {\n  var isLegacy = _isNumber(params[1]),\n      varsIndex = (isLegacy ? 2 : 1) + (type < 2 ? 0 : 1),\n      vars = params[varsIndex],\n      irVars,\n      parent;\n\n  isLegacy && (vars.duration = params[1]);\n  vars.parent = timeline;\n\n  if (type) {\n    irVars = vars;\n    parent = timeline;\n\n    while (parent && !(\"immediateRender\" in irVars)) {\n      // inheritance hasn't happened yet, but someone may have set a default in an ancestor timeline. We could do vars.immediateRender = _isNotFalse(_inheritDefaults(vars).immediateRender) but that'd exact a slight performance penalty because _inheritDefaults() also runs in the Tween constructor. We're paying a small kb price here to gain speed.\n      irVars = parent.vars.defaults || {};\n      parent = _isNotFalse(parent.vars.inherit) && parent.parent;\n    }\n\n    vars.immediateRender = _isNotFalse(irVars.immediateRender);\n    type < 2 ? vars.runBackwards = 1 : vars.startAt = params[varsIndex - 1]; // \"from\" vars\n  }\n\n  return new Tween(params[0], vars, params[varsIndex + 1]);\n},\n    _conditionalReturn = function _conditionalReturn(value, func) {\n  return value || value === 0 ? func(value) : func;\n},\n    _clamp = function _clamp(min, max, value) {\n  return value < min ? min : value > max ? max : value;\n},\n    getUnit = function getUnit(value, v) {\n  return !_isString(value) || !(v = _unitExp.exec(value)) ? \"\" : v[1];\n},\n    // note: protect against padded numbers as strings, like \"100.100\". That shouldn't return \"00\" as the unit. If it's numeric, return no unit.\nclamp = function clamp(min, max, value) {\n  return _conditionalReturn(value, function (v) {\n    return _clamp(min, max, v);\n  });\n},\n    _slice = [].slice,\n    _isArrayLike = function _isArrayLike(value, nonEmpty) {\n  return value && _isObject(value) && \"length\" in value && (!nonEmpty && !value.length || value.length - 1 in value && _isObject(value[0])) && !value.nodeType && value !== _win;\n},\n    _flatten = function _flatten(ar, leaveStrings, accumulator) {\n  if (accumulator === void 0) {\n    accumulator = [];\n  }\n\n  return ar.forEach(function (value) {\n    var _accumulator;\n\n    return _isString(value) && !leaveStrings || _isArrayLike(value, 1) ? (_accumulator = accumulator).push.apply(_accumulator, toArray(value)) : accumulator.push(value);\n  }) || accumulator;\n},\n    //takes any value and returns an array. If it's a string (and leaveStrings isn't true), it'll use document.querySelectorAll() and convert that to an array. It'll also accept iterables like jQuery objects.\ntoArray = function toArray(value, scope, leaveStrings) {\n  return _context && !scope && _context.selector ? _context.selector(value) : _isString(value) && !leaveStrings && (_coreInitted || !_wake()) ? _slice.call((scope || _doc).querySelectorAll(value), 0) : _isArray(value) ? _flatten(value, leaveStrings) : _isArrayLike(value) ? _slice.call(value, 0) : value ? [value] : [];\n},\n    selector = function selector(value) {\n  value = toArray(value)[0] || _warn(\"Invalid scope\") || {};\n  return function (v) {\n    var el = value.current || value.nativeElement || value;\n    return toArray(v, el.querySelectorAll ? el : el === value ? _warn(\"Invalid scope\") || _doc.createElement(\"div\") : value);\n  };\n},\n    shuffle = function shuffle(a) {\n  return a.sort(function () {\n    return .5 - Math.random();\n  });\n},\n    // alternative that's a bit faster and more reliably diverse but bigger:   for (let j, v, i = a.length; i; j = Math.floor(Math.random() * i), v = a[--i], a[i] = a[j], a[j] = v); return a;\n//for distributing values across an array. Can accept a number, a function or (most commonly) a function which can contain the following properties: {base, amount, from, ease, grid, axis, length, each}. Returns a function that expects the following parameters: index, target, array. Recognizes the following\ndistribute = function distribute(v) {\n  if (_isFunction(v)) {\n    return v;\n  }\n\n  var vars = _isObject(v) ? v : {\n    each: v\n  },\n      //n:1 is just to indicate v was a number; we leverage that later to set v according to the length we get. If a number is passed in, we treat it like the old stagger value where 0.1, for example, would mean that things would be distributed with 0.1 between each element in the array rather than a total \"amount\" that's chunked out among them all.\n  ease = _parseEase(vars.ease),\n      from = vars.from || 0,\n      base = parseFloat(vars.base) || 0,\n      cache = {},\n      isDecimal = from > 0 && from < 1,\n      ratios = isNaN(from) || isDecimal,\n      axis = vars.axis,\n      ratioX = from,\n      ratioY = from;\n\n  if (_isString(from)) {\n    ratioX = ratioY = {\n      center: .5,\n      edges: .5,\n      end: 1\n    }[from] || 0;\n  } else if (!isDecimal && ratios) {\n    ratioX = from[0];\n    ratioY = from[1];\n  }\n\n  return function (i, target, a) {\n    var l = (a || vars).length,\n        distances = cache[l],\n        originX,\n        originY,\n        x,\n        y,\n        d,\n        j,\n        max,\n        min,\n        wrapAt;\n\n    if (!distances) {\n      wrapAt = vars.grid === \"auto\" ? 0 : (vars.grid || [1, _bigNum])[1];\n\n      if (!wrapAt) {\n        max = -_bigNum;\n\n        while (max < (max = a[wrapAt++].getBoundingClientRect().left) && wrapAt < l) {}\n\n        wrapAt--;\n      }\n\n      distances = cache[l] = [];\n      originX = ratios ? Math.min(wrapAt, l) * ratioX - .5 : from % wrapAt;\n      originY = wrapAt === _bigNum ? 0 : ratios ? l * ratioY / wrapAt - .5 : from / wrapAt | 0;\n      max = 0;\n      min = _bigNum;\n\n      for (j = 0; j < l; j++) {\n        x = j % wrapAt - originX;\n        y = originY - (j / wrapAt | 0);\n        distances[j] = d = !axis ? _sqrt(x * x + y * y) : Math.abs(axis === \"y\" ? y : x);\n        d > max && (max = d);\n        d < min && (min = d);\n      }\n\n      from === \"random\" && shuffle(distances);\n      distances.max = max - min;\n      distances.min = min;\n      distances.v = l = (parseFloat(vars.amount) || parseFloat(vars.each) * (wrapAt > l ? l - 1 : !axis ? Math.max(wrapAt, l / wrapAt) : axis === \"y\" ? l / wrapAt : wrapAt) || 0) * (from === \"edges\" ? -1 : 1);\n      distances.b = l < 0 ? base - l : base;\n      distances.u = getUnit(vars.amount || vars.each) || 0; //unit\n\n      ease = ease && l < 0 ? _invertEase(ease) : ease;\n    }\n\n    l = (distances[i] - distances.min) / distances.max || 0;\n    return _roundPrecise(distances.b + (ease ? ease(l) : l) * distances.v) + distances.u; //round in order to work around floating point errors\n  };\n},\n    _roundModifier = function _roundModifier(v) {\n  //pass in 0.1 get a function that'll round to the nearest tenth, or 5 to round to the closest 5, or 0.001 to the closest 1000th, etc.\n  var p = Math.pow(10, ((v + \"\").split(\".\")[1] || \"\").length); //to avoid floating point math errors (like 24 * 0.1 == 2.4000000000000004), we chop off at a specific number of decimal places (much faster than toFixed())\n\n  return function (raw) {\n    var n = _roundPrecise(Math.round(parseFloat(raw) / v) * v * p);\n\n    return (n - n % 1) / p + (_isNumber(raw) ? 0 : getUnit(raw)); // n - n % 1 replaces Math.floor() in order to handle negative values properly. For example, Math.floor(-150.00000000000003) is 151!\n  };\n},\n    snap = function snap(snapTo, value) {\n  var isArray = _isArray(snapTo),\n      radius,\n      is2D;\n\n  if (!isArray && _isObject(snapTo)) {\n    radius = isArray = snapTo.radius || _bigNum;\n\n    if (snapTo.values) {\n      snapTo = toArray(snapTo.values);\n\n      if (is2D = !_isNumber(snapTo[0])) {\n        radius *= radius; //performance optimization so we don't have to Math.sqrt() in the loop.\n      }\n    } else {\n      snapTo = _roundModifier(snapTo.increment);\n    }\n  }\n\n  return _conditionalReturn(value, !isArray ? _roundModifier(snapTo) : _isFunction(snapTo) ? function (raw) {\n    is2D = snapTo(raw);\n    return Math.abs(is2D - raw) <= radius ? is2D : raw;\n  } : function (raw) {\n    var x = parseFloat(is2D ? raw.x : raw),\n        y = parseFloat(is2D ? raw.y : 0),\n        min = _bigNum,\n        closest = 0,\n        i = snapTo.length,\n        dx,\n        dy;\n\n    while (i--) {\n      if (is2D) {\n        dx = snapTo[i].x - x;\n        dy = snapTo[i].y - y;\n        dx = dx * dx + dy * dy;\n      } else {\n        dx = Math.abs(snapTo[i] - x);\n      }\n\n      if (dx < min) {\n        min = dx;\n        closest = i;\n      }\n    }\n\n    closest = !radius || min <= radius ? snapTo[closest] : raw;\n    return is2D || closest === raw || _isNumber(raw) ? closest : closest + getUnit(raw);\n  });\n},\n    random = function random(min, max, roundingIncrement, returnFunction) {\n  return _conditionalReturn(_isArray(min) ? !max : roundingIncrement === true ? !!(roundingIncrement = 0) : !returnFunction, function () {\n    return _isArray(min) ? min[~~(Math.random() * min.length)] : (roundingIncrement = roundingIncrement || 1e-5) && (returnFunction = roundingIncrement < 1 ? Math.pow(10, (roundingIncrement + \"\").length - 2) : 1) && Math.floor(Math.round((min - roundingIncrement / 2 + Math.random() * (max - min + roundingIncrement * .99)) / roundingIncrement) * roundingIncrement * returnFunction) / returnFunction;\n  });\n},\n    pipe = function pipe() {\n  for (var _len = arguments.length, functions = new Array(_len), _key = 0; _key < _len; _key++) {\n    functions[_key] = arguments[_key];\n  }\n\n  return function (value) {\n    return functions.reduce(function (v, f) {\n      return f(v);\n    }, value);\n  };\n},\n    unitize = function unitize(func, unit) {\n  return function (value) {\n    return func(parseFloat(value)) + (unit || getUnit(value));\n  };\n},\n    normalize = function normalize(min, max, value) {\n  return mapRange(min, max, 0, 1, value);\n},\n    _wrapArray = function _wrapArray(a, wrapper, value) {\n  return _conditionalReturn(value, function (index) {\n    return a[~~wrapper(index)];\n  });\n},\n    wrap = function wrap(min, max, value) {\n  // NOTE: wrap() CANNOT be an arrow function! A very odd compiling bug causes problems (unrelated to GSAP).\n  var range = max - min;\n  return _isArray(min) ? _wrapArray(min, wrap(0, min.length), max) : _conditionalReturn(value, function (value) {\n    return (range + (value - min) % range) % range + min;\n  });\n},\n    wrapYoyo = function wrapYoyo(min, max, value) {\n  var range = max - min,\n      total = range * 2;\n  return _isArray(min) ? _wrapArray(min, wrapYoyo(0, min.length - 1), max) : _conditionalReturn(value, function (value) {\n    value = (total + (value - min) % total) % total || 0;\n    return min + (value > range ? total - value : value);\n  });\n},\n    _replaceRandom = function _replaceRandom(value) {\n  //replaces all occurrences of random(...) in a string with the calculated random value. can be a range like random(-100, 100, 5) or an array like random([0, 100, 500])\n  var prev = 0,\n      s = \"\",\n      i,\n      nums,\n      end,\n      isArray;\n\n  while (~(i = value.indexOf(\"random(\", prev))) {\n    end = value.indexOf(\")\", i);\n    isArray = value.charAt(i + 7) === \"[\";\n    nums = value.substr(i + 7, end - i - 7).match(isArray ? _delimitedValueExp : _strictNumExp);\n    s += value.substr(prev, i - prev) + random(isArray ? nums : +nums[0], isArray ? 0 : +nums[1], +nums[2] || 1e-5);\n    prev = end + 1;\n  }\n\n  return s + value.substr(prev, value.length - prev);\n},\n    mapRange = function mapRange(inMin, inMax, outMin, outMax, value) {\n  var inRange = inMax - inMin,\n      outRange = outMax - outMin;\n  return _conditionalReturn(value, function (value) {\n    return outMin + ((value - inMin) / inRange * outRange || 0);\n  });\n},\n    interpolate = function interpolate(start, end, progress, mutate) {\n  var func = isNaN(start + end) ? 0 : function (p) {\n    return (1 - p) * start + p * end;\n  };\n\n  if (!func) {\n    var isString = _isString(start),\n        master = {},\n        p,\n        i,\n        interpolators,\n        l,\n        il;\n\n    progress === true && (mutate = 1) && (progress = null);\n\n    if (isString) {\n      start = {\n        p: start\n      };\n      end = {\n        p: end\n      };\n    } else if (_isArray(start) && !_isArray(end)) {\n      interpolators = [];\n      l = start.length;\n      il = l - 2;\n\n      for (i = 1; i < l; i++) {\n        interpolators.push(interpolate(start[i - 1], start[i])); //build the interpolators up front as a performance optimization so that when the function is called many times, it can just reuse them.\n      }\n\n      l--;\n\n      func = function func(p) {\n        p *= l;\n        var i = Math.min(il, ~~p);\n        return interpolators[i](p - i);\n      };\n\n      progress = end;\n    } else if (!mutate) {\n      start = _merge(_isArray(start) ? [] : {}, start);\n    }\n\n    if (!interpolators) {\n      for (p in end) {\n        _addPropTween.call(master, start, p, \"get\", end[p]);\n      }\n\n      func = function func(p) {\n        return _renderPropTweens(p, master) || (isString ? start.p : start);\n      };\n    }\n  }\n\n  return _conditionalReturn(progress, func);\n},\n    _getLabelInDirection = function _getLabelInDirection(timeline, fromTime, backward) {\n  //used for nextLabel() and previousLabel()\n  var labels = timeline.labels,\n      min = _bigNum,\n      p,\n      distance,\n      label;\n\n  for (p in labels) {\n    distance = labels[p] - fromTime;\n\n    if (distance < 0 === !!backward && distance && min > (distance = Math.abs(distance))) {\n      label = p;\n      min = distance;\n    }\n  }\n\n  return label;\n},\n    _callback = function _callback(animation, type, executeLazyFirst) {\n  var v = animation.vars,\n      callback = v[type],\n      prevContext = _context,\n      context = animation._ctx,\n      params,\n      scope,\n      result;\n\n  if (!callback) {\n    return;\n  }\n\n  params = v[type + \"Params\"];\n  scope = v.callbackScope || animation;\n  executeLazyFirst && _lazyTweens.length && _lazyRender(); //in case rendering caused any tweens to lazy-init, we should render them because typically when a timeline finishes, users expect things to have rendered fully. Imagine an onUpdate on a timeline that reports/checks tweened values.\n\n  context && (_context = context);\n  result = params ? callback.apply(scope, params) : callback.call(scope);\n  _context = prevContext;\n  return result;\n},\n    _interrupt = function _interrupt(animation) {\n  _removeFromParent(animation);\n\n  animation.scrollTrigger && animation.scrollTrigger.kill(false);\n  animation.progress() < 1 && _callback(animation, \"onInterrupt\");\n  return animation;\n},\n    _quickTween,\n    _createPlugin = function _createPlugin(config) {\n  config = !config.name && config[\"default\"] || config; //UMD packaging wraps things oddly, so for example MotionPathHelper becomes {MotionPathHelper:MotionPathHelper, default:MotionPathHelper}.\n\n  var name = config.name,\n      isFunc = _isFunction(config),\n      Plugin = name && !isFunc && config.init ? function () {\n    this._props = [];\n  } : config,\n      //in case someone passes in an object that's not a plugin, like CustomEase\n  instanceDefaults = {\n    init: _emptyFunc,\n    render: _renderPropTweens,\n    add: _addPropTween,\n    kill: _killPropTweensOf,\n    modifier: _addPluginModifier,\n    rawVars: 0\n  },\n      statics = {\n    targetTest: 0,\n    get: 0,\n    getSetter: _getSetter,\n    aliases: {},\n    register: 0\n  };\n\n  _wake();\n\n  if (config !== Plugin) {\n    if (_plugins[name]) {\n      return;\n    }\n\n    _setDefaults(Plugin, _setDefaults(_copyExcluding(config, instanceDefaults), statics)); //static methods\n\n\n    _merge(Plugin.prototype, _merge(instanceDefaults, _copyExcluding(config, statics))); //instance methods\n\n\n    _plugins[Plugin.prop = name] = Plugin;\n\n    if (config.targetTest) {\n      _harnessPlugins.push(Plugin);\n\n      _reservedProps[name] = 1;\n    }\n\n    name = (name === \"css\" ? \"CSS\" : name.charAt(0).toUpperCase() + name.substr(1)) + \"Plugin\"; //for the global name. \"motionPath\" should become MotionPathPlugin\n  }\n\n  _addGlobal(name, Plugin);\n\n  config.register && config.register(gsap, Plugin, PropTween);\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * COLORS\n * --------------------------------------------------------------------------------------\n */\n_255 = 255,\n    _colorLookup = {\n  aqua: [0, _255, _255],\n  lime: [0, _255, 0],\n  silver: [192, 192, 192],\n  black: [0, 0, 0],\n  maroon: [128, 0, 0],\n  teal: [0, 128, 128],\n  blue: [0, 0, _255],\n  navy: [0, 0, 128],\n  white: [_255, _255, _255],\n  olive: [128, 128, 0],\n  yellow: [_255, _255, 0],\n  orange: [_255, 165, 0],\n  gray: [128, 128, 128],\n  purple: [128, 0, 128],\n  green: [0, 128, 0],\n  red: [_255, 0, 0],\n  pink: [_255, 192, 203],\n  cyan: [0, _255, _255],\n  transparent: [_255, _255, _255, 0]\n},\n    // possible future idea to replace the hard-coded color name values - put this in the ticker.wake() where we set the _doc:\n// let ctx = _doc.createElement(\"canvas\").getContext(\"2d\");\n// _forEachName(\"aqua,lime,silver,black,maroon,teal,blue,navy,white,olive,yellow,orange,gray,purple,green,red,pink,cyan\", color => {ctx.fillStyle = color; _colorLookup[color] = splitColor(ctx.fillStyle)});\n_hue = function _hue(h, m1, m2) {\n  h += h < 0 ? 1 : h > 1 ? -1 : 0;\n  return (h * 6 < 1 ? m1 + (m2 - m1) * h * 6 : h < .5 ? m2 : h * 3 < 2 ? m1 + (m2 - m1) * (2 / 3 - h) * 6 : m1) * _255 + .5 | 0;\n},\n    splitColor = function splitColor(v, toHSL, forceAlpha) {\n  var a = !v ? _colorLookup.black : _isNumber(v) ? [v >> 16, v >> 8 & _255, v & _255] : 0,\n      r,\n      g,\n      b,\n      h,\n      s,\n      l,\n      max,\n      min,\n      d,\n      wasHSL;\n\n  if (!a) {\n    if (v.substr(-1) === \",\") {\n      //sometimes a trailing comma is included and we should chop it off (typically from a comma-delimited list of values like a textShadow:\"2px 2px 2px blue, 5px 5px 5px rgb(255,0,0)\" - in this example \"blue,\" has a trailing comma. We could strip it out inside parseComplex() but we'd need to do it to the beginning and ending values plus it wouldn't provide protection from other potential scenarios like if the user passes in a similar value.\n      v = v.substr(0, v.length - 1);\n    }\n\n    if (_colorLookup[v]) {\n      a = _colorLookup[v];\n    } else if (v.charAt(0) === \"#\") {\n      if (v.length < 6) {\n        //for shorthand like #9F0 or #9F0F (could have alpha)\n        r = v.charAt(1);\n        g = v.charAt(2);\n        b = v.charAt(3);\n        v = \"#\" + r + r + g + g + b + b + (v.length === 5 ? v.charAt(4) + v.charAt(4) : \"\");\n      }\n\n      if (v.length === 9) {\n        // hex with alpha, like #fd5e53ff\n        a = parseInt(v.substr(1, 6), 16);\n        return [a >> 16, a >> 8 & _255, a & _255, parseInt(v.substr(7), 16) / 255];\n      }\n\n      v = parseInt(v.substr(1), 16);\n      a = [v >> 16, v >> 8 & _255, v & _255];\n    } else if (v.substr(0, 3) === \"hsl\") {\n      a = wasHSL = v.match(_strictNumExp);\n\n      if (!toHSL) {\n        h = +a[0] % 360 / 360;\n        s = +a[1] / 100;\n        l = +a[2] / 100;\n        g = l <= .5 ? l * (s + 1) : l + s - l * s;\n        r = l * 2 - g;\n        a.length > 3 && (a[3] *= 1); //cast as number\n\n        a[0] = _hue(h + 1 / 3, r, g);\n        a[1] = _hue(h, r, g);\n        a[2] = _hue(h - 1 / 3, r, g);\n      } else if (~v.indexOf(\"=\")) {\n        //if relative values are found, just return the raw strings with the relative prefixes in place.\n        a = v.match(_numExp);\n        forceAlpha && a.length < 4 && (a[3] = 1);\n        return a;\n      }\n    } else {\n      a = v.match(_strictNumExp) || _colorLookup.transparent;\n    }\n\n    a = a.map(Number);\n  }\n\n  if (toHSL && !wasHSL) {\n    r = a[0] / _255;\n    g = a[1] / _255;\n    b = a[2] / _255;\n    max = Math.max(r, g, b);\n    min = Math.min(r, g, b);\n    l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      h = max === r ? (g - b) / d + (g < b ? 6 : 0) : max === g ? (b - r) / d + 2 : (r - g) / d + 4;\n      h *= 60;\n    }\n\n    a[0] = ~~(h + .5);\n    a[1] = ~~(s * 100 + .5);\n    a[2] = ~~(l * 100 + .5);\n  }\n\n  forceAlpha && a.length < 4 && (a[3] = 1);\n  return a;\n},\n    _colorOrderData = function _colorOrderData(v) {\n  // strips out the colors from the string, finds all the numeric slots (with units) and returns an array of those. The Array also has a \"c\" property which is an Array of the index values where the colors belong. This is to help work around issues where there's a mis-matched order of color/numeric data like drop-shadow(#f00 0px 1px 2px) and drop-shadow(0x 1px 2px #f00). This is basically a helper function used in _formatColors()\n  var values = [],\n      c = [],\n      i = -1;\n  v.split(_colorExp).forEach(function (v) {\n    var a = v.match(_numWithUnitExp) || [];\n    values.push.apply(values, a);\n    c.push(i += a.length + 1);\n  });\n  values.c = c;\n  return values;\n},\n    _formatColors = function _formatColors(s, toHSL, orderMatchData) {\n  var result = \"\",\n      colors = (s + result).match(_colorExp),\n      type = toHSL ? \"hsla(\" : \"rgba(\",\n      i = 0,\n      c,\n      shell,\n      d,\n      l;\n\n  if (!colors) {\n    return s;\n  }\n\n  colors = colors.map(function (color) {\n    return (color = splitColor(color, toHSL, 1)) && type + (toHSL ? color[0] + \",\" + color[1] + \"%,\" + color[2] + \"%,\" + color[3] : color.join(\",\")) + \")\";\n  });\n\n  if (orderMatchData) {\n    d = _colorOrderData(s);\n    c = orderMatchData.c;\n\n    if (c.join(result) !== d.c.join(result)) {\n      shell = s.replace(_colorExp, \"1\").split(_numWithUnitExp);\n      l = shell.length - 1;\n\n      for (; i < l; i++) {\n        result += shell[i] + (~c.indexOf(i) ? colors.shift() || type + \"0,0,0,0)\" : (d.length ? d : colors.length ? colors : orderMatchData).shift());\n      }\n    }\n  }\n\n  if (!shell) {\n    shell = s.split(_colorExp);\n    l = shell.length - 1;\n\n    for (; i < l; i++) {\n      result += shell[i] + colors[i];\n    }\n  }\n\n  return result + shell[l];\n},\n    _colorExp = function () {\n  var s = \"(?:\\\\b(?:(?:rgb|rgba|hsl|hsla)\\\\(.+?\\\\))|\\\\B#(?:[0-9a-f]{3,4}){1,2}\\\\b\",\n      //we'll dynamically build this Regular Expression to conserve file size. After building it, it will be able to find rgb(), rgba(), # (hexadecimal), and named color values like red, blue, purple, etc.,\n  p;\n\n  for (p in _colorLookup) {\n    s += \"|\" + p + \"\\\\b\";\n  }\n\n  return new RegExp(s + \")\", \"gi\");\n}(),\n    _hslExp = /hsl[a]?\\(/,\n    _colorStringFilter = function _colorStringFilter(a) {\n  var combined = a.join(\" \"),\n      toHSL;\n  _colorExp.lastIndex = 0;\n\n  if (_colorExp.test(combined)) {\n    toHSL = _hslExp.test(combined);\n    a[1] = _formatColors(a[1], toHSL);\n    a[0] = _formatColors(a[0], toHSL, _colorOrderData(a[1])); // make sure the order of numbers/colors match with the END value.\n\n    return true;\n  }\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * TICKER\n * --------------------------------------------------------------------------------------\n */\n_tickerActive,\n    _ticker = function () {\n  var _getTime = Date.now,\n      _lagThreshold = 500,\n      _adjustedLag = 33,\n      _startTime = _getTime(),\n      _lastUpdate = _startTime,\n      _gap = 1000 / 240,\n      _nextTime = _gap,\n      _listeners = [],\n      _id,\n      _req,\n      _raf,\n      _self,\n      _delta,\n      _i,\n      _tick = function _tick(v) {\n    var elapsed = _getTime() - _lastUpdate,\n        manual = v === true,\n        overlap,\n        dispatch,\n        time,\n        frame;\n\n    elapsed > _lagThreshold && (_startTime += elapsed - _adjustedLag);\n    _lastUpdate += elapsed;\n    time = _lastUpdate - _startTime;\n    overlap = time - _nextTime;\n\n    if (overlap > 0 || manual) {\n      frame = ++_self.frame;\n      _delta = time - _self.time * 1000;\n      _self.time = time = time / 1000;\n      _nextTime += overlap + (overlap >= _gap ? 4 : _gap - overlap);\n      dispatch = 1;\n    }\n\n    manual || (_id = _req(_tick)); //make sure the request is made before we dispatch the \"tick\" event so that timing is maintained. Otherwise, if processing the \"tick\" requires a bunch of time (like 15ms) and we're using a setTimeout() that's based on 16.7ms, it'd technically take 31.7ms between frames otherwise.\n\n    if (dispatch) {\n      for (_i = 0; _i < _listeners.length; _i++) {\n        // use _i and check _listeners.length instead of a variable because a listener could get removed during the loop, and if that happens to an element less than the current index, it'd throw things off in the loop.\n        _listeners[_i](time, _delta, frame, v);\n      }\n    }\n  };\n\n  _self = {\n    time: 0,\n    frame: 0,\n    tick: function tick() {\n      _tick(true);\n    },\n    deltaRatio: function deltaRatio(fps) {\n      return _delta / (1000 / (fps || 60));\n    },\n    wake: function wake() {\n      if (_coreReady) {\n        if (!_coreInitted && _windowExists()) {\n          _win = _coreInitted = window;\n          _doc = _win.document || {};\n          _globals.gsap = gsap;\n          (_win.gsapVersions || (_win.gsapVersions = [])).push(gsap.version);\n\n          _install(_installScope || _win.GreenSockGlobals || !_win.gsap && _win || {});\n\n          _raf = _win.requestAnimationFrame;\n        }\n\n        _id && _self.sleep();\n\n        _req = _raf || function (f) {\n          return setTimeout(f, _nextTime - _self.time * 1000 + 1 | 0);\n        };\n\n        _tickerActive = 1;\n\n        _tick(2);\n      }\n    },\n    sleep: function sleep() {\n      (_raf ? _win.cancelAnimationFrame : clearTimeout)(_id);\n      _tickerActive = 0;\n      _req = _emptyFunc;\n    },\n    lagSmoothing: function lagSmoothing(threshold, adjustedLag) {\n      _lagThreshold = threshold || 1 / _tinyNum; //zero should be interpreted as basically unlimited\n\n      _adjustedLag = Math.min(adjustedLag, _lagThreshold, 0);\n    },\n    fps: function fps(_fps) {\n      _gap = 1000 / (_fps || 240);\n      _nextTime = _self.time * 1000 + _gap;\n    },\n    add: function add(callback, once, prioritize) {\n      var func = once ? function (t, d, f, v) {\n        callback(t, d, f, v);\n\n        _self.remove(func);\n      } : callback;\n\n      _self.remove(callback);\n\n      _listeners[prioritize ? \"unshift\" : \"push\"](func);\n\n      _wake();\n\n      return func;\n    },\n    remove: function remove(callback, i) {\n      ~(i = _listeners.indexOf(callback)) && _listeners.splice(i, 1) && _i >= i && _i--;\n    },\n    _listeners: _listeners\n  };\n  return _self;\n}(),\n    _wake = function _wake() {\n  return !_tickerActive && _ticker.wake();\n},\n    //also ensures the core classes are initialized.\n\n/*\n* -------------------------------------------------\n* EASING\n* -------------------------------------------------\n*/\n_easeMap = {},\n    _customEaseExp = /^[\\d.\\-M][\\d.\\-,\\s]/,\n    _quotesExp = /[\"']/g,\n    _parseObjectInString = function _parseObjectInString(value) {\n  //takes a string like \"{wiggles:10, type:anticipate})\" and turns it into a real object. Notice it ends in \")\" and includes the {} wrappers. This is because we only use this function for parsing ease configs and prioritized optimization rather than reusability.\n  var obj = {},\n      split = value.substr(1, value.length - 3).split(\":\"),\n      key = split[0],\n      i = 1,\n      l = split.length,\n      index,\n      val,\n      parsedVal;\n\n  for (; i < l; i++) {\n    val = split[i];\n    index = i !== l - 1 ? val.lastIndexOf(\",\") : val.length;\n    parsedVal = val.substr(0, index);\n    obj[key] = isNaN(parsedVal) ? parsedVal.replace(_quotesExp, \"\").trim() : +parsedVal;\n    key = val.substr(index + 1).trim();\n  }\n\n  return obj;\n},\n    _valueInParentheses = function _valueInParentheses(value) {\n  var open = value.indexOf(\"(\") + 1,\n      close = value.indexOf(\")\"),\n      nested = value.indexOf(\"(\", open);\n  return value.substring(open, ~nested && nested < close ? value.indexOf(\")\", close + 1) : close);\n},\n    _configEaseFromString = function _configEaseFromString(name) {\n  //name can be a string like \"elastic.out(1,0.5)\", and pass in _easeMap as obj and it'll parse it out and call the actual function like _easeMap.Elastic.easeOut.config(1,0.5). It will also parse custom ease strings as long as CustomEase is loaded and registered (internally as _easeMap._CE).\n  var split = (name + \"\").split(\"(\"),\n      ease = _easeMap[split[0]];\n  return ease && split.length > 1 && ease.config ? ease.config.apply(null, ~name.indexOf(\"{\") ? [_parseObjectInString(split[1])] : _valueInParentheses(name).split(\",\").map(_numericIfPossible)) : _easeMap._CE && _customEaseExp.test(name) ? _easeMap._CE(\"\", name) : ease;\n},\n    _invertEase = function _invertEase(ease) {\n  return function (p) {\n    return 1 - ease(1 - p);\n  };\n},\n    // allow yoyoEase to be set in children and have those affected when the parent/ancestor timeline yoyos.\n_propagateYoyoEase = function _propagateYoyoEase(timeline, isYoyo) {\n  var child = timeline._first,\n      ease;\n\n  while (child) {\n    if (child instanceof Timeline) {\n      _propagateYoyoEase(child, isYoyo);\n    } else if (child.vars.yoyoEase && (!child._yoyo || !child._repeat) && child._yoyo !== isYoyo) {\n      if (child.timeline) {\n        _propagateYoyoEase(child.timeline, isYoyo);\n      } else {\n        ease = child._ease;\n        child._ease = child._yEase;\n        child._yEase = ease;\n        child._yoyo = isYoyo;\n      }\n    }\n\n    child = child._next;\n  }\n},\n    _parseEase = function _parseEase(ease, defaultEase) {\n  return !ease ? defaultEase : (_isFunction(ease) ? ease : _easeMap[ease] || _configEaseFromString(ease)) || defaultEase;\n},\n    _insertEase = function _insertEase(names, easeIn, easeOut, easeInOut) {\n  if (easeOut === void 0) {\n    easeOut = function easeOut(p) {\n      return 1 - easeIn(1 - p);\n    };\n  }\n\n  if (easeInOut === void 0) {\n    easeInOut = function easeInOut(p) {\n      return p < .5 ? easeIn(p * 2) / 2 : 1 - easeIn((1 - p) * 2) / 2;\n    };\n  }\n\n  var ease = {\n    easeIn: easeIn,\n    easeOut: easeOut,\n    easeInOut: easeInOut\n  },\n      lowercaseName;\n\n  _forEachName(names, function (name) {\n    _easeMap[name] = _globals[name] = ease;\n    _easeMap[lowercaseName = name.toLowerCase()] = easeOut;\n\n    for (var p in ease) {\n      _easeMap[lowercaseName + (p === \"easeIn\" ? \".in\" : p === \"easeOut\" ? \".out\" : \".inOut\")] = _easeMap[name + \".\" + p] = ease[p];\n    }\n  });\n\n  return ease;\n},\n    _easeInOutFromOut = function _easeInOutFromOut(easeOut) {\n  return function (p) {\n    return p < .5 ? (1 - easeOut(1 - p * 2)) / 2 : .5 + easeOut((p - .5) * 2) / 2;\n  };\n},\n    _configElastic = function _configElastic(type, amplitude, period) {\n  var p1 = amplitude >= 1 ? amplitude : 1,\n      //note: if amplitude is < 1, we simply adjust the period for a more natural feel. Otherwise the math doesn't work right and the curve starts at 1.\n  p2 = (period || (type ? .3 : .45)) / (amplitude < 1 ? amplitude : 1),\n      p3 = p2 / _2PI * (Math.asin(1 / p1) || 0),\n      easeOut = function easeOut(p) {\n    return p === 1 ? 1 : p1 * Math.pow(2, -10 * p) * _sin((p - p3) * p2) + 1;\n  },\n      ease = type === \"out\" ? easeOut : type === \"in\" ? function (p) {\n    return 1 - easeOut(1 - p);\n  } : _easeInOutFromOut(easeOut);\n\n  p2 = _2PI / p2; //precalculate to optimize\n\n  ease.config = function (amplitude, period) {\n    return _configElastic(type, amplitude, period);\n  };\n\n  return ease;\n},\n    _configBack = function _configBack(type, overshoot) {\n  if (overshoot === void 0) {\n    overshoot = 1.70158;\n  }\n\n  var easeOut = function easeOut(p) {\n    return p ? --p * p * ((overshoot + 1) * p + overshoot) + 1 : 0;\n  },\n      ease = type === \"out\" ? easeOut : type === \"in\" ? function (p) {\n    return 1 - easeOut(1 - p);\n  } : _easeInOutFromOut(easeOut);\n\n  ease.config = function (overshoot) {\n    return _configBack(type, overshoot);\n  };\n\n  return ease;\n}; // a cheaper (kb and cpu) but more mild way to get a parameterized weighted ease by feeding in a value between -1 (easeIn) and 1 (easeOut) where 0 is linear.\n// _weightedEase = ratio => {\n// \tlet y = 0.5 + ratio / 2;\n// \treturn p => (2 * (1 - p) * p * y + p * p);\n// },\n// a stronger (but more expensive kb/cpu) parameterized weighted ease that lets you feed in a value between -1 (easeIn) and 1 (easeOut) where 0 is linear.\n// _weightedEaseStrong = ratio => {\n// \tratio = .5 + ratio / 2;\n// \tlet o = 1 / 3 * (ratio < .5 ? ratio : 1 - ratio),\n// \t\tb = ratio - o,\n// \t\tc = ratio + o;\n// \treturn p => p === 1 ? p : 3 * b * (1 - p) * (1 - p) * p + 3 * c * (1 - p) * p * p + p * p * p;\n// };\n\n\n_forEachName(\"Linear,Quad,Cubic,Quart,Quint,Strong\", function (name, i) {\n  var power = i < 5 ? i + 1 : i;\n\n  _insertEase(name + \",Power\" + (power - 1), i ? function (p) {\n    return Math.pow(p, power);\n  } : function (p) {\n    return p;\n  }, function (p) {\n    return 1 - Math.pow(1 - p, power);\n  }, function (p) {\n    return p < .5 ? Math.pow(p * 2, power) / 2 : 1 - Math.pow((1 - p) * 2, power) / 2;\n  });\n});\n\n_easeMap.Linear.easeNone = _easeMap.none = _easeMap.Linear.easeIn;\n\n_insertEase(\"Elastic\", _configElastic(\"in\"), _configElastic(\"out\"), _configElastic());\n\n(function (n, c) {\n  var n1 = 1 / c,\n      n2 = 2 * n1,\n      n3 = 2.5 * n1,\n      easeOut = function easeOut(p) {\n    return p < n1 ? n * p * p : p < n2 ? n * Math.pow(p - 1.5 / c, 2) + .75 : p < n3 ? n * (p -= 2.25 / c) * p + .9375 : n * Math.pow(p - 2.625 / c, 2) + .984375;\n  };\n\n  _insertEase(\"Bounce\", function (p) {\n    return 1 - easeOut(1 - p);\n  }, easeOut);\n})(7.5625, 2.75);\n\n_insertEase(\"Expo\", function (p) {\n  return p ? Math.pow(2, 10 * (p - 1)) : 0;\n});\n\n_insertEase(\"Circ\", function (p) {\n  return -(_sqrt(1 - p * p) - 1);\n});\n\n_insertEase(\"Sine\", function (p) {\n  return p === 1 ? 1 : -_cos(p * _HALF_PI) + 1;\n});\n\n_insertEase(\"Back\", _configBack(\"in\"), _configBack(\"out\"), _configBack());\n\n_easeMap.SteppedEase = _easeMap.steps = _globals.SteppedEase = {\n  config: function config(steps, immediateStart) {\n    if (steps === void 0) {\n      steps = 1;\n    }\n\n    var p1 = 1 / steps,\n        p2 = steps + (immediateStart ? 0 : 1),\n        p3 = immediateStart ? 1 : 0,\n        max = 1 - _tinyNum;\n    return function (p) {\n      return ((p2 * _clamp(0, max, p) | 0) + p3) * p1;\n    };\n  }\n};\n_defaults.ease = _easeMap[\"quad.out\"];\n\n_forEachName(\"onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt\", function (name) {\n  return _callbackNames += name + \",\" + name + \"Params,\";\n});\n/*\n * --------------------------------------------------------------------------------------\n * CACHE\n * --------------------------------------------------------------------------------------\n */\n\n\nexport var GSCache = function GSCache(target, harness) {\n  this.id = _gsID++;\n  target._gsap = this;\n  this.target = target;\n  this.harness = harness;\n  this.get = harness ? harness.get : _getProperty;\n  this.set = harness ? harness.getSetter : _getSetter;\n};\n/*\n * --------------------------------------------------------------------------------------\n * ANIMATION\n * --------------------------------------------------------------------------------------\n */\n\nexport var Animation = /*#__PURE__*/function () {\n  function Animation(vars) {\n    this.vars = vars;\n    this._delay = +vars.delay || 0;\n\n    if (this._repeat = vars.repeat === Infinity ? -2 : vars.repeat || 0) {\n      // TODO: repeat: Infinity on a timeline's children must flag that timeline internally and affect its totalDuration, otherwise it'll stop in the negative direction when reaching the start.\n      this._rDelay = vars.repeatDelay || 0;\n      this._yoyo = !!vars.yoyo || !!vars.yoyoEase;\n    }\n\n    this._ts = 1;\n\n    _setDuration(this, +vars.duration, 1, 1);\n\n    this.data = vars.data;\n\n    if (_context) {\n      this._ctx = _context;\n\n      _context.data.push(this);\n    }\n\n    _tickerActive || _ticker.wake();\n  }\n\n  var _proto = Animation.prototype;\n\n  _proto.delay = function delay(value) {\n    if (value || value === 0) {\n      this.parent && this.parent.smoothChildTiming && this.startTime(this._start + value - this._delay);\n      this._delay = value;\n      return this;\n    }\n\n    return this._delay;\n  };\n\n  _proto.duration = function duration(value) {\n    return arguments.length ? this.totalDuration(this._repeat > 0 ? value + (value + this._rDelay) * this._repeat : value) : this.totalDuration() && this._dur;\n  };\n\n  _proto.totalDuration = function totalDuration(value) {\n    if (!arguments.length) {\n      return this._tDur;\n    }\n\n    this._dirty = 0;\n    return _setDuration(this, this._repeat < 0 ? value : (value - this._repeat * this._rDelay) / (this._repeat + 1));\n  };\n\n  _proto.totalTime = function totalTime(_totalTime, suppressEvents) {\n    _wake();\n\n    if (!arguments.length) {\n      return this._tTime;\n    }\n\n    var parent = this._dp;\n\n    if (parent && parent.smoothChildTiming && this._ts) {\n      _alignPlayhead(this, _totalTime);\n\n      !parent._dp || parent.parent || _postAddChecks(parent, this); // edge case: if this is a child of a timeline that already completed, for example, we must re-activate the parent.\n      //in case any of the ancestor timelines had completed but should now be enabled, we should reset their totalTime() which will also ensure that they're lined up properly and enabled. Skip for animations that are on the root (wasteful). Example: a TimelineLite.exportRoot() is performed when there's a paused tween on the root, the export will not complete until that tween is unpaused, but imagine a child gets restarted later, after all [unpaused] tweens have completed. The start of that child would get pushed out, but one of the ancestors may have completed.\n\n      while (parent && parent.parent) {\n        if (parent.parent._time !== parent._start + (parent._ts >= 0 ? parent._tTime / parent._ts : (parent.totalDuration() - parent._tTime) / -parent._ts)) {\n          parent.totalTime(parent._tTime, true);\n        }\n\n        parent = parent.parent;\n      }\n\n      if (!this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && _totalTime < this._tDur || this._ts < 0 && _totalTime > 0 || !this._tDur && !_totalTime)) {\n        //if the animation doesn't have a parent, put it back into its last parent (recorded as _dp for exactly cases like this). Limit to parents with autoRemoveChildren (like globalTimeline) so that if the user manually removes an animation from a timeline and then alters its playhead, it doesn't get added back in.\n        _addToTimeline(this._dp, this, this._start - this._delay);\n      }\n    }\n\n    if (this._tTime !== _totalTime || !this._dur && !suppressEvents || this._initted && Math.abs(this._zTime) === _tinyNum || !_totalTime && !this._initted && (this.add || this._ptLookup)) {\n      // check for _ptLookup on a Tween instance to ensure it has actually finished being instantiated, otherwise if this.reverse() gets called in the Animation constructor, it could trigger a render() here even though the _targets weren't populated, thus when _init() is called there won't be any PropTweens (it'll act like the tween is non-functional)\n      this._ts || (this._pTime = _totalTime); // otherwise, if an animation is paused, then the playhead is moved back to zero, then resumed, it'd revert back to the original time at the pause\n      //if (!this._lock) { // avoid endless recursion (not sure we need this yet or if it's worth the performance hit)\n      //   this._lock = 1;\n\n      _lazySafeRender(this, _totalTime, suppressEvents); //   this._lock = 0;\n      //}\n\n    }\n\n    return this;\n  };\n\n  _proto.time = function time(value, suppressEvents) {\n    return arguments.length ? this.totalTime(Math.min(this.totalDuration(), value + _elapsedCycleDuration(this)) % (this._dur + this._rDelay) || (value ? this._dur : 0), suppressEvents) : this._time; // note: if the modulus results in 0, the playhead could be exactly at the end or the beginning, and we always defer to the END with a non-zero value, otherwise if you set the time() to the very end (duration()), it would render at the START!\n  };\n\n  _proto.totalProgress = function totalProgress(value, suppressEvents) {\n    return arguments.length ? this.totalTime(this.totalDuration() * value, suppressEvents) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.ratio;\n  };\n\n  _proto.progress = function progress(value, suppressEvents) {\n    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && !(this.iteration() & 1) ? 1 - value : value) + _elapsedCycleDuration(this), suppressEvents) : this.duration() ? Math.min(1, this._time / this._dur) : this.ratio;\n  };\n\n  _proto.iteration = function iteration(value, suppressEvents) {\n    var cycleDuration = this.duration() + this._rDelay;\n\n    return arguments.length ? this.totalTime(this._time + (value - 1) * cycleDuration, suppressEvents) : this._repeat ? _animationCycle(this._tTime, cycleDuration) + 1 : 1;\n  } // potential future addition:\n  // isPlayingBackwards() {\n  // \tlet animation = this,\n  // \t\torientation = 1; // 1 = forward, -1 = backward\n  // \twhile (animation) {\n  // \t\torientation *= animation.reversed() || (animation.repeat() && !(animation.iteration() & 1)) ? -1 : 1;\n  // \t\tanimation = animation.parent;\n  // \t}\n  // \treturn orientation < 0;\n  // }\n  ;\n\n  _proto.timeScale = function timeScale(value) {\n    if (!arguments.length) {\n      return this._rts === -_tinyNum ? 0 : this._rts; // recorded timeScale. Special case: if someone calls reverse() on an animation with timeScale of 0, we assign it -_tinyNum to remember it's reversed.\n    }\n\n    if (this._rts === value) {\n      return this;\n    }\n\n    var tTime = this.parent && this._ts ? _parentToChildTotalTime(this.parent._time, this) : this._tTime; // make sure to do the parentToChildTotalTime() BEFORE setting the new _ts because the old one must be used in that calculation.\n    // future addition? Up side: fast and minimal file size. Down side: only works on this animation; if a timeline is reversed, for example, its childrens' onReverse wouldn't get called.\n    //(+value < 0 && this._rts >= 0) && _callback(this, \"onReverse\", true);\n    // prioritize rendering where the parent's playhead lines up instead of this._tTime because there could be a tween that's animating another tween's timeScale in the same rendering loop (same parent), thus if the timeScale tween renders first, it would alter _start BEFORE _tTime was set on that tick (in the rendering loop), effectively freezing it until the timeScale tween finishes.\n\n    this._rts = +value || 0;\n    this._ts = this._ps || value === -_tinyNum ? 0 : this._rts; // _ts is the functional timeScale which would be 0 if the animation is paused.\n\n    this.totalTime(_clamp(-this._delay, this._tDur, tTime), true);\n\n    _setEnd(this); // if parent.smoothChildTiming was false, the end time didn't get updated in the _alignPlayhead() method, so do it here.\n\n\n    return _recacheAncestors(this);\n  };\n\n  _proto.paused = function paused(value) {\n    if (!arguments.length) {\n      return this._ps;\n    }\n\n    if (this._ps !== value) {\n      this._ps = value;\n\n      if (value) {\n        this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()); // if the pause occurs during the delay phase, make sure that's factored in when resuming.\n\n        this._ts = this._act = 0; // _ts is the functional timeScale, so a paused tween would effectively have a timeScale of 0. We record the \"real\" timeScale as _rts (recorded time scale)\n      } else {\n        _wake();\n\n        this._ts = this._rts; //only defer to _pTime (pauseTime) if tTime is zero. Remember, someone could pause() an animation, then scrub the playhead and resume(). If the parent doesn't have smoothChildTiming, we render at the rawTime() because the startTime won't get updated.\n\n        this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, this.progress() === 1 && Math.abs(this._zTime) !== _tinyNum && (this._tTime -= _tinyNum)); // edge case: animation.progress(1).pause().play() wouldn't render again because the playhead is already at the end, but the call to totalTime() below will add it back to its parent...and not remove it again (since removing only happens upon rendering at a new time). Offsetting the _tTime slightly is done simply to cause the final render in totalTime() that'll pop it off its timeline (if autoRemoveChildren is true, of course). Check to make sure _zTime isn't -_tinyNum to avoid an edge case where the playhead is pushed to the end but INSIDE a tween/callback, the timeline itself is paused thus halting rendering and leaving a few unrendered. When resuming, it wouldn't render those otherwise.\n      }\n    }\n\n    return this;\n  };\n\n  _proto.startTime = function startTime(value) {\n    if (arguments.length) {\n      this._start = value;\n      var parent = this.parent || this._dp;\n      parent && (parent._sort || !this.parent) && _addToTimeline(parent, this, value - this._delay);\n      return this;\n    }\n\n    return this._start;\n  };\n\n  _proto.endTime = function endTime(includeRepeats) {\n    return this._start + (_isNotFalse(includeRepeats) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1);\n  };\n\n  _proto.rawTime = function rawTime(wrapRepeats) {\n    var parent = this.parent || this._dp; // _dp = detached parent\n\n    return !parent ? this._tTime : wrapRepeats && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : !this._ts ? this._tTime : _parentToChildTotalTime(parent.rawTime(wrapRepeats), this);\n  };\n\n  _proto.revert = function revert(config) {\n    if (config === void 0) {\n      config = _revertConfig;\n    }\n\n    var prevIsReverting = _reverting;\n    _reverting = config;\n    this.timeline && this.timeline.revert(config);\n    this.totalTime(-0.01, config.suppressEvents);\n    this.data !== \"nested\" && _removeFromParent(this);\n    _reverting = prevIsReverting;\n    return this;\n  };\n\n  _proto.globalTime = function globalTime(rawTime) {\n    var animation = this,\n        time = arguments.length ? rawTime : animation.rawTime();\n\n    while (animation) {\n      time = animation._start + time / (animation._ts || 1);\n      animation = animation._dp;\n    }\n\n    return !this.parent && this.vars.immediateRender ? -1 : time; // the _startAt tweens for .fromTo() and .from() that have immediateRender should always be FIRST in the timeline (important for Recording.revert())\n  };\n\n  _proto.repeat = function repeat(value) {\n    if (arguments.length) {\n      this._repeat = value === Infinity ? -2 : value;\n      return _onUpdateTotalDuration(this);\n    }\n\n    return this._repeat === -2 ? Infinity : this._repeat;\n  };\n\n  _proto.repeatDelay = function repeatDelay(value) {\n    if (arguments.length) {\n      var time = this._time;\n      this._rDelay = value;\n\n      _onUpdateTotalDuration(this);\n\n      return time ? this.time(time) : this;\n    }\n\n    return this._rDelay;\n  };\n\n  _proto.yoyo = function yoyo(value) {\n    if (arguments.length) {\n      this._yoyo = value;\n      return this;\n    }\n\n    return this._yoyo;\n  };\n\n  _proto.seek = function seek(position, suppressEvents) {\n    return this.totalTime(_parsePosition(this, position), _isNotFalse(suppressEvents));\n  };\n\n  _proto.restart = function restart(includeDelay, suppressEvents) {\n    return this.play().totalTime(includeDelay ? -this._delay : 0, _isNotFalse(suppressEvents));\n  };\n\n  _proto.play = function play(from, suppressEvents) {\n    from != null && this.seek(from, suppressEvents);\n    return this.reversed(false).paused(false);\n  };\n\n  _proto.reverse = function reverse(from, suppressEvents) {\n    from != null && this.seek(from || this.totalDuration(), suppressEvents);\n    return this.reversed(true).paused(false);\n  };\n\n  _proto.pause = function pause(atTime, suppressEvents) {\n    atTime != null && this.seek(atTime, suppressEvents);\n    return this.paused(true);\n  };\n\n  _proto.resume = function resume() {\n    return this.paused(false);\n  };\n\n  _proto.reversed = function reversed(value) {\n    if (arguments.length) {\n      !!value !== this.reversed() && this.timeScale(-this._rts || (value ? -_tinyNum : 0)); // in case timeScale is zero, reversing would have no effect so we use _tinyNum.\n\n      return this;\n    }\n\n    return this._rts < 0;\n  };\n\n  _proto.invalidate = function invalidate() {\n    this._initted = this._act = 0;\n    this._zTime = -_tinyNum;\n    return this;\n  };\n\n  _proto.isActive = function isActive() {\n    var parent = this.parent || this._dp,\n        start = this._start,\n        rawTime;\n    return !!(!parent || this._ts && this._initted && parent.isActive() && (rawTime = parent.rawTime(true)) >= start && rawTime < this.endTime(true) - _tinyNum);\n  };\n\n  _proto.eventCallback = function eventCallback(type, callback, params) {\n    var vars = this.vars;\n\n    if (arguments.length > 1) {\n      if (!callback) {\n        delete vars[type];\n      } else {\n        vars[type] = callback;\n        params && (vars[type + \"Params\"] = params);\n        type === \"onUpdate\" && (this._onUpdate = callback);\n      }\n\n      return this;\n    }\n\n    return vars[type];\n  };\n\n  _proto.then = function then(onFulfilled) {\n    var self = this;\n    return new Promise(function (resolve) {\n      var f = _isFunction(onFulfilled) ? onFulfilled : _passThrough,\n          _resolve = function _resolve() {\n        var _then = self.then;\n        self.then = null; // temporarily null the then() method to avoid an infinite loop (see https://github.com/greensock/GSAP/issues/322)\n\n        _isFunction(f) && (f = f(self)) && (f.then || f === self) && (self.then = _then);\n        resolve(f);\n        self.then = _then;\n      };\n\n      if (self._initted && self.totalProgress() === 1 && self._ts >= 0 || !self._tTime && self._ts < 0) {\n        _resolve();\n      } else {\n        self._prom = _resolve;\n      }\n    });\n  };\n\n  _proto.kill = function kill() {\n    _interrupt(this);\n  };\n\n  return Animation;\n}();\n\n_setDefaults(Animation.prototype, {\n  _time: 0,\n  _start: 0,\n  _end: 0,\n  _tTime: 0,\n  _tDur: 0,\n  _dirty: 0,\n  _repeat: 0,\n  _yoyo: false,\n  parent: null,\n  _initted: false,\n  _rDelay: 0,\n  _ts: 1,\n  _dp: 0,\n  ratio: 0,\n  _zTime: -_tinyNum,\n  _prom: 0,\n  _ps: false,\n  _rts: 1\n});\n/*\n * -------------------------------------------------\n * TIMELINE\n * -------------------------------------------------\n */\n\n\nexport var Timeline = /*#__PURE__*/function (_Animation) {\n  _inheritsLoose(Timeline, _Animation);\n\n  function Timeline(vars, position) {\n    var _this;\n\n    if (vars === void 0) {\n      vars = {};\n    }\n\n    _this = _Animation.call(this, vars) || this;\n    _this.labels = {};\n    _this.smoothChildTiming = !!vars.smoothChildTiming;\n    _this.autoRemoveChildren = !!vars.autoRemoveChildren;\n    _this._sort = _isNotFalse(vars.sortChildren);\n    _globalTimeline && _addToTimeline(vars.parent || _globalTimeline, _assertThisInitialized(_this), position);\n    vars.reversed && _this.reverse();\n    vars.paused && _this.paused(true);\n    vars.scrollTrigger && _scrollTrigger(_assertThisInitialized(_this), vars.scrollTrigger);\n    return _this;\n  }\n\n  var _proto2 = Timeline.prototype;\n\n  _proto2.to = function to(targets, vars, position) {\n    _createTweenType(0, arguments, this);\n\n    return this;\n  };\n\n  _proto2.from = function from(targets, vars, position) {\n    _createTweenType(1, arguments, this);\n\n    return this;\n  };\n\n  _proto2.fromTo = function fromTo(targets, fromVars, toVars, position) {\n    _createTweenType(2, arguments, this);\n\n    return this;\n  };\n\n  _proto2.set = function set(targets, vars, position) {\n    vars.duration = 0;\n    vars.parent = this;\n    _inheritDefaults(vars).repeatDelay || (vars.repeat = 0);\n    vars.immediateRender = !!vars.immediateRender;\n    new Tween(targets, vars, _parsePosition(this, position), 1);\n    return this;\n  };\n\n  _proto2.call = function call(callback, params, position) {\n    return _addToTimeline(this, Tween.delayedCall(0, callback, params), position);\n  } //ONLY for backward compatibility! Maybe delete?\n  ;\n\n  _proto2.staggerTo = function staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    vars.duration = duration;\n    vars.stagger = vars.stagger || stagger;\n    vars.onComplete = onCompleteAll;\n    vars.onCompleteParams = onCompleteAllParams;\n    vars.parent = this;\n    new Tween(targets, vars, _parsePosition(this, position));\n    return this;\n  };\n\n  _proto2.staggerFrom = function staggerFrom(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    vars.runBackwards = 1;\n    _inheritDefaults(vars).immediateRender = _isNotFalse(vars.immediateRender);\n    return this.staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams);\n  };\n\n  _proto2.staggerFromTo = function staggerFromTo(targets, duration, fromVars, toVars, stagger, position, onCompleteAll, onCompleteAllParams) {\n    toVars.startAt = fromVars;\n    _inheritDefaults(toVars).immediateRender = _isNotFalse(toVars.immediateRender);\n    return this.staggerTo(targets, duration, toVars, stagger, position, onCompleteAll, onCompleteAllParams);\n  };\n\n  _proto2.render = function render(totalTime, suppressEvents, force) {\n    var prevTime = this._time,\n        tDur = this._dirty ? this.totalDuration() : this._tDur,\n        dur = this._dur,\n        tTime = totalTime <= 0 ? 0 : _roundPrecise(totalTime),\n        // if a paused timeline is resumed (or its _start is updated for another reason...which rounds it), that could result in the playhead shifting a **tiny** amount and a zero-duration child at that spot may get rendered at a different ratio, like its totalTime in render() may be 1e-17 instead of 0, for example.\n    crossingStart = this._zTime < 0 !== totalTime < 0 && (this._initted || !dur),\n        time,\n        child,\n        next,\n        iteration,\n        cycleDuration,\n        prevPaused,\n        pauseTween,\n        timeScale,\n        prevStart,\n        prevIteration,\n        yoyo,\n        isYoyo;\n    this !== _globalTimeline && tTime > tDur && totalTime >= 0 && (tTime = tDur);\n\n    if (tTime !== this._tTime || force || crossingStart) {\n      if (prevTime !== this._time && dur) {\n        //if totalDuration() finds a child with a negative startTime and smoothChildTiming is true, things get shifted around internally so we need to adjust the time accordingly. For example, if a tween starts at -30 we must shift EVERYTHING forward 30 seconds and move this timeline's startTime backward by 30 seconds so that things align with the playhead (no jump).\n        tTime += this._time - prevTime;\n        totalTime += this._time - prevTime;\n      }\n\n      time = tTime;\n      prevStart = this._start;\n      timeScale = this._ts;\n      prevPaused = !timeScale;\n\n      if (crossingStart) {\n        dur || (prevTime = this._zTime); //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration timeline, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect.\n\n        (totalTime || !suppressEvents) && (this._zTime = totalTime);\n      }\n\n      if (this._repeat) {\n        //adjust the time for repeats and yoyos\n        yoyo = this._yoyo;\n        cycleDuration = dur + this._rDelay;\n\n        if (this._repeat < -1 && totalTime < 0) {\n          return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);\n        }\n\n        time = _roundPrecise(tTime % cycleDuration); //round to avoid floating point errors. (4 % 0.8 should be 0 but some browsers report it as 0.79999999!)\n\n        if (tTime === tDur) {\n          // the tDur === tTime is for edge cases where there's a lengthy decimal on the duration and it may reach the very end but the time is rendered as not-quite-there (remember, tDur is rounded to 4 decimals whereas dur isn't)\n          iteration = this._repeat;\n          time = dur;\n        } else {\n          iteration = ~~(tTime / cycleDuration);\n\n          if (iteration && iteration === tTime / cycleDuration) {\n            time = dur;\n            iteration--;\n          }\n\n          time > dur && (time = dur);\n        }\n\n        prevIteration = _animationCycle(this._tTime, cycleDuration);\n        !prevTime && this._tTime && prevIteration !== iteration && (prevIteration = iteration); // edge case - if someone does addPause() at the very beginning of a repeating timeline, that pause is technically at the same spot as the end which causes this._time to get set to 0 when the totalTime would normally place the playhead at the end. See https://greensock.com/forums/topic/23823-closing-nav-animation-not-working-on-ie-and-iphone-6-maybe-other-older-browser/?tab=comments#comment-113005\n\n        if (yoyo && iteration & 1) {\n          time = dur - time;\n          isYoyo = 1;\n        }\n        /*\n        make sure children at the end/beginning of the timeline are rendered properly. If, for example,\n        a 3-second long timeline rendered at 2.9 seconds previously, and now renders at 3.2 seconds (which\n        would get translated to 2.8 seconds if the timeline yoyos or 0.2 seconds if it just repeats), there\n        could be a callback or a short tween that's at 2.95 or 3 seconds in which wouldn't render. So\n        we need to push the timeline to the end (and/or beginning depending on its yoyo value). Also we must\n        ensure that zero-duration tweens at the very beginning or end of the Timeline work.\n        */\n\n\n        if (iteration !== prevIteration && !this._lock) {\n          var rewinding = yoyo && prevIteration & 1,\n              doesWrap = rewinding === (yoyo && iteration & 1);\n          iteration < prevIteration && (rewinding = !rewinding);\n          prevTime = rewinding ? 0 : dur;\n          this._lock = 1;\n          this.render(prevTime || (isYoyo ? 0 : _roundPrecise(iteration * cycleDuration)), suppressEvents, !dur)._lock = 0;\n          this._tTime = tTime; // if a user gets the iteration() inside the onRepeat, for example, it should be accurate.\n\n          !suppressEvents && this.parent && _callback(this, \"onRepeat\");\n          this.vars.repeatRefresh && !isYoyo && (this.invalidate()._lock = 1);\n\n          if (prevTime && prevTime !== this._time || prevPaused !== !this._ts || this.vars.onRepeat && !this.parent && !this._act) {\n            // if prevTime is 0 and we render at the very end, _time will be the end, thus won't match. So in this edge case, prevTime won't match _time but that's okay. If it gets killed in the onRepeat, eject as well.\n            return this;\n          }\n\n          dur = this._dur; // in case the duration changed in the onRepeat\n\n          tDur = this._tDur;\n\n          if (doesWrap) {\n            this._lock = 2;\n            prevTime = rewinding ? dur : -0.0001;\n            this.render(prevTime, true);\n            this.vars.repeatRefresh && !isYoyo && this.invalidate();\n          }\n\n          this._lock = 0;\n\n          if (!this._ts && !prevPaused) {\n            return this;\n          } //in order for yoyoEase to work properly when there's a stagger, we must swap out the ease in each sub-tween.\n\n\n          _propagateYoyoEase(this, isYoyo);\n        }\n      }\n\n      if (this._hasPause && !this._forcing && this._lock < 2) {\n        pauseTween = _findNextPauseTween(this, _roundPrecise(prevTime), _roundPrecise(time));\n\n        if (pauseTween) {\n          tTime -= time - (time = pauseTween._start);\n        }\n      }\n\n      this._tTime = tTime;\n      this._time = time;\n      this._act = !timeScale; //as long as it's not paused, force it to be active so that if the user renders independent of the parent timeline, it'll be forced to re-render on the next tick.\n\n      if (!this._initted) {\n        this._onUpdate = this.vars.onUpdate;\n        this._initted = 1;\n        this._zTime = totalTime;\n        prevTime = 0; // upon init, the playhead should always go forward; someone could invalidate() a completed timeline and then if they restart(), that would make child tweens render in reverse order which could lock in the wrong starting values if they build on each other, like tl.to(obj, {x: 100}).to(obj, {x: 0}).\n      }\n\n      if (!prevTime && time && !suppressEvents) {\n        _callback(this, \"onStart\");\n\n        if (this._tTime !== tTime) {\n          // in case the onStart triggered a render at a different spot, eject. Like if someone did animation.pause(0.5) or something inside the onStart.\n          return this;\n        }\n      }\n\n      if (time >= prevTime && totalTime >= 0) {\n        child = this._first;\n\n        while (child) {\n          next = child._next;\n\n          if ((child._act || time >= child._start) && child._ts && pauseTween !== child) {\n            if (child.parent !== this) {\n              // an extreme edge case - the child's render could do something like kill() the \"next\" one in the linked list, or reparent it. In that case we must re-initiate the whole render to be safe.\n              return this.render(totalTime, suppressEvents, force);\n            }\n\n            child.render(child._ts > 0 ? (time - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (time - child._start) * child._ts, suppressEvents, force);\n\n            if (time !== this._time || !this._ts && !prevPaused) {\n              //in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete\n              pauseTween = 0;\n              next && (tTime += this._zTime = -_tinyNum); // it didn't finish rendering, so flag zTime as negative so that so that the next time render() is called it'll be forced (to render any remaining children)\n\n              break;\n            }\n          }\n\n          child = next;\n        }\n      } else {\n        force = force || _reverting; // if reverting, we should always force renders. If, for example, a .fromTo() tween with a stagger (which creates an internal timeline) gets reverted BEFORE some of its child tweens render for the first time, it may not properly trigger them to revert.\n\n        child = this._last;\n        var adjustedTime = totalTime < 0 ? totalTime : time; //when the playhead goes backward beyond the start of this timeline, we must pass that information down to the child animations so that zero-duration tweens know whether to render their starting or ending values.\n\n        while (child) {\n          next = child._prev;\n\n          if ((child._act || adjustedTime <= child._end) && child._ts && pauseTween !== child) {\n            if (child.parent !== this) {\n              // an extreme edge case - the child's render could do something like kill() the \"next\" one in the linked list, or reparent it. In that case we must re-initiate the whole render to be safe.\n              return this.render(totalTime, suppressEvents, force);\n            }\n\n            child.render(child._ts > 0 ? (adjustedTime - child._start) * child._ts : (child._dirty ? child.totalDuration() : child._tDur) + (adjustedTime - child._start) * child._ts, suppressEvents, force);\n\n            if (time !== this._time || !this._ts && !prevPaused) {\n              //in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete\n              pauseTween = 0;\n              next && (tTime += this._zTime = adjustedTime ? -_tinyNum : _tinyNum); // it didn't finish rendering, so adjust zTime so that so that the next time render() is called it'll be forced (to render any remaining children)\n\n              break;\n            }\n          }\n\n          child = next;\n        }\n      }\n\n      if (pauseTween && !suppressEvents) {\n        this.pause();\n        pauseTween.render(time >= prevTime ? 0 : -_tinyNum)._zTime = time >= prevTime ? 1 : -1;\n\n        if (this._ts) {\n          //the callback resumed playback! So since we may have held back the playhead due to where the pause is positioned, go ahead and jump to where it's SUPPOSED to be (if no pause happened).\n          this._start = prevStart; //if the pause was at an earlier time and the user resumed in the callback, it could reposition the timeline (changing its startTime), throwing things off slightly, so we make sure the _start doesn't shift.\n\n          _setEnd(this);\n\n          return this.render(totalTime, suppressEvents, force);\n        }\n      }\n\n      this._onUpdate && !suppressEvents && _callback(this, \"onUpdate\", true);\n      if (tTime === tDur && this._tTime >= this.totalDuration() || !tTime && prevTime) if (prevStart === this._start || Math.abs(timeScale) !== Math.abs(this._ts)) if (!this._lock) {\n        // remember, a child's callback may alter this timeline's playhead or timeScale which is why we need to add some of these checks.\n        (totalTime || !dur) && (tTime === tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1); // don't remove if the timeline is reversed and the playhead isn't at 0, otherwise tl.progress(1).reverse() won't work. Only remove if the playhead is at the end and timeScale is positive, or if the playhead is at 0 and the timeScale is negative.\n\n        if (!suppressEvents && !(totalTime < 0 && !prevTime) && (tTime || prevTime || !tDur)) {\n          _callback(this, tTime === tDur && totalTime >= 0 ? \"onComplete\" : \"onReverseComplete\", true);\n\n          this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto2.add = function add(child, position) {\n    var _this2 = this;\n\n    _isNumber(position) || (position = _parsePosition(this, position, child));\n\n    if (!(child instanceof Animation)) {\n      if (_isArray(child)) {\n        child.forEach(function (obj) {\n          return _this2.add(obj, position);\n        });\n        return this;\n      }\n\n      if (_isString(child)) {\n        return this.addLabel(child, position);\n      }\n\n      if (_isFunction(child)) {\n        child = Tween.delayedCall(0, child);\n      } else {\n        return this;\n      }\n    }\n\n    return this !== child ? _addToTimeline(this, child, position) : this; //don't allow a timeline to be added to itself as a child!\n  };\n\n  _proto2.getChildren = function getChildren(nested, tweens, timelines, ignoreBeforeTime) {\n    if (nested === void 0) {\n      nested = true;\n    }\n\n    if (tweens === void 0) {\n      tweens = true;\n    }\n\n    if (timelines === void 0) {\n      timelines = true;\n    }\n\n    if (ignoreBeforeTime === void 0) {\n      ignoreBeforeTime = -_bigNum;\n    }\n\n    var a = [],\n        child = this._first;\n\n    while (child) {\n      if (child._start >= ignoreBeforeTime) {\n        if (child instanceof Tween) {\n          tweens && a.push(child);\n        } else {\n          timelines && a.push(child);\n          nested && a.push.apply(a, child.getChildren(true, tweens, timelines));\n        }\n      }\n\n      child = child._next;\n    }\n\n    return a;\n  };\n\n  _proto2.getById = function getById(id) {\n    var animations = this.getChildren(1, 1, 1),\n        i = animations.length;\n\n    while (i--) {\n      if (animations[i].vars.id === id) {\n        return animations[i];\n      }\n    }\n  };\n\n  _proto2.remove = function remove(child) {\n    if (_isString(child)) {\n      return this.removeLabel(child);\n    }\n\n    if (_isFunction(child)) {\n      return this.killTweensOf(child);\n    }\n\n    _removeLinkedListItem(this, child);\n\n    if (child === this._recent) {\n      this._recent = this._last;\n    }\n\n    return _uncache(this);\n  };\n\n  _proto2.totalTime = function totalTime(_totalTime2, suppressEvents) {\n    if (!arguments.length) {\n      return this._tTime;\n    }\n\n    this._forcing = 1;\n\n    if (!this._dp && this._ts) {\n      //special case for the global timeline (or any other that has no parent or detached parent).\n      this._start = _roundPrecise(_ticker.time - (this._ts > 0 ? _totalTime2 / this._ts : (this.totalDuration() - _totalTime2) / -this._ts));\n    }\n\n    _Animation.prototype.totalTime.call(this, _totalTime2, suppressEvents);\n\n    this._forcing = 0;\n    return this;\n  };\n\n  _proto2.addLabel = function addLabel(label, position) {\n    this.labels[label] = _parsePosition(this, position);\n    return this;\n  };\n\n  _proto2.removeLabel = function removeLabel(label) {\n    delete this.labels[label];\n    return this;\n  };\n\n  _proto2.addPause = function addPause(position, callback, params) {\n    var t = Tween.delayedCall(0, callback || _emptyFunc, params);\n    t.data = \"isPause\";\n    this._hasPause = 1;\n    return _addToTimeline(this, t, _parsePosition(this, position));\n  };\n\n  _proto2.removePause = function removePause(position) {\n    var child = this._first;\n    position = _parsePosition(this, position);\n\n    while (child) {\n      if (child._start === position && child.data === \"isPause\") {\n        _removeFromParent(child);\n      }\n\n      child = child._next;\n    }\n  };\n\n  _proto2.killTweensOf = function killTweensOf(targets, props, onlyActive) {\n    var tweens = this.getTweensOf(targets, onlyActive),\n        i = tweens.length;\n\n    while (i--) {\n      _overwritingTween !== tweens[i] && tweens[i].kill(targets, props);\n    }\n\n    return this;\n  };\n\n  _proto2.getTweensOf = function getTweensOf(targets, onlyActive) {\n    var a = [],\n        parsedTargets = toArray(targets),\n        child = this._first,\n        isGlobalTime = _isNumber(onlyActive),\n        // a number is interpreted as a global time. If the animation spans\n    children;\n\n    while (child) {\n      if (child instanceof Tween) {\n        if (_arrayContainsAny(child._targets, parsedTargets) && (isGlobalTime ? (!_overwritingTween || child._initted && child._ts) && child.globalTime(0) <= onlyActive && child.globalTime(child.totalDuration()) > onlyActive : !onlyActive || child.isActive())) {\n          // note: if this is for overwriting, it should only be for tweens that aren't paused and are initted.\n          a.push(child);\n        }\n      } else if ((children = child.getTweensOf(parsedTargets, onlyActive)).length) {\n        a.push.apply(a, children);\n      }\n\n      child = child._next;\n    }\n\n    return a;\n  } // potential future feature - targets() on timelines\n  // targets() {\n  // \tlet result = [];\n  // \tthis.getChildren(true, true, false).forEach(t => result.push(...t.targets()));\n  // \treturn result.filter((v, i) => result.indexOf(v) === i);\n  // }\n  ;\n\n  _proto2.tweenTo = function tweenTo(position, vars) {\n    vars = vars || {};\n\n    var tl = this,\n        endTime = _parsePosition(tl, position),\n        _vars = vars,\n        startAt = _vars.startAt,\n        _onStart = _vars.onStart,\n        onStartParams = _vars.onStartParams,\n        immediateRender = _vars.immediateRender,\n        initted,\n        tween = Tween.to(tl, _setDefaults({\n      ease: vars.ease || \"none\",\n      lazy: false,\n      immediateRender: false,\n      time: endTime,\n      overwrite: \"auto\",\n      duration: vars.duration || Math.abs((endTime - (startAt && \"time\" in startAt ? startAt.time : tl._time)) / tl.timeScale()) || _tinyNum,\n      onStart: function onStart() {\n        tl.pause();\n\n        if (!initted) {\n          var duration = vars.duration || Math.abs((endTime - (startAt && \"time\" in startAt ? startAt.time : tl._time)) / tl.timeScale());\n          tween._dur !== duration && _setDuration(tween, duration, 0, 1).render(tween._time, true, true);\n          initted = 1;\n        }\n\n        _onStart && _onStart.apply(tween, onStartParams || []); //in case the user had an onStart in the vars - we don't want to overwrite it.\n      }\n    }, vars));\n\n    return immediateRender ? tween.render(0) : tween;\n  };\n\n  _proto2.tweenFromTo = function tweenFromTo(fromPosition, toPosition, vars) {\n    return this.tweenTo(toPosition, _setDefaults({\n      startAt: {\n        time: _parsePosition(this, fromPosition)\n      }\n    }, vars));\n  };\n\n  _proto2.recent = function recent() {\n    return this._recent;\n  };\n\n  _proto2.nextLabel = function nextLabel(afterTime) {\n    if (afterTime === void 0) {\n      afterTime = this._time;\n    }\n\n    return _getLabelInDirection(this, _parsePosition(this, afterTime));\n  };\n\n  _proto2.previousLabel = function previousLabel(beforeTime) {\n    if (beforeTime === void 0) {\n      beforeTime = this._time;\n    }\n\n    return _getLabelInDirection(this, _parsePosition(this, beforeTime), 1);\n  };\n\n  _proto2.currentLabel = function currentLabel(value) {\n    return arguments.length ? this.seek(value, true) : this.previousLabel(this._time + _tinyNum);\n  };\n\n  _proto2.shiftChildren = function shiftChildren(amount, adjustLabels, ignoreBeforeTime) {\n    if (ignoreBeforeTime === void 0) {\n      ignoreBeforeTime = 0;\n    }\n\n    var child = this._first,\n        labels = this.labels,\n        p;\n\n    while (child) {\n      if (child._start >= ignoreBeforeTime) {\n        child._start += amount;\n        child._end += amount;\n      }\n\n      child = child._next;\n    }\n\n    if (adjustLabels) {\n      for (p in labels) {\n        if (labels[p] >= ignoreBeforeTime) {\n          labels[p] += amount;\n        }\n      }\n    }\n\n    return _uncache(this);\n  };\n\n  _proto2.invalidate = function invalidate() {\n    var child = this._first;\n    this._lock = 0;\n\n    while (child) {\n      child.invalidate();\n      child = child._next;\n    }\n\n    return _Animation.prototype.invalidate.call(this);\n  };\n\n  _proto2.clear = function clear(includeLabels) {\n    if (includeLabels === void 0) {\n      includeLabels = true;\n    }\n\n    var child = this._first,\n        next;\n\n    while (child) {\n      next = child._next;\n      this.remove(child);\n      child = next;\n    }\n\n    this._dp && (this._time = this._tTime = this._pTime = 0);\n    includeLabels && (this.labels = {});\n    return _uncache(this);\n  };\n\n  _proto2.totalDuration = function totalDuration(value) {\n    var max = 0,\n        self = this,\n        child = self._last,\n        prevStart = _bigNum,\n        prev,\n        start,\n        parent;\n\n    if (arguments.length) {\n      return self.timeScale((self._repeat < 0 ? self.duration() : self.totalDuration()) / (self.reversed() ? -value : value));\n    }\n\n    if (self._dirty) {\n      parent = self.parent;\n\n      while (child) {\n        prev = child._prev; //record it here in case the tween changes position in the sequence...\n\n        child._dirty && child.totalDuration(); //could change the tween._startTime, so make sure the animation's cache is clean before analyzing it.\n\n        start = child._start;\n\n        if (start > prevStart && self._sort && child._ts && !self._lock) {\n          //in case one of the tweens shifted out of order, it needs to be re-inserted into the correct position in the sequence\n          self._lock = 1; //prevent endless recursive calls - there are methods that get triggered that check duration/totalDuration when we add().\n\n          _addToTimeline(self, child, start - child._delay, 1)._lock = 0;\n        } else {\n          prevStart = start;\n        }\n\n        if (start < 0 && child._ts) {\n          //children aren't allowed to have negative startTimes unless smoothChildTiming is true, so adjust here if one is found.\n          max -= start;\n\n          if (!parent && !self._dp || parent && parent.smoothChildTiming) {\n            self._start += start / self._ts;\n            self._time -= start;\n            self._tTime -= start;\n          }\n\n          self.shiftChildren(-start, false, -1e999);\n          prevStart = 0;\n        }\n\n        child._end > max && child._ts && (max = child._end);\n        child = prev;\n      }\n\n      _setDuration(self, self === _globalTimeline && self._time > max ? self._time : max, 1, 1);\n\n      self._dirty = 0;\n    }\n\n    return self._tDur;\n  };\n\n  Timeline.updateRoot = function updateRoot(time) {\n    if (_globalTimeline._ts) {\n      _lazySafeRender(_globalTimeline, _parentToChildTotalTime(time, _globalTimeline));\n\n      _lastRenderedFrame = _ticker.frame;\n    }\n\n    if (_ticker.frame >= _nextGCFrame) {\n      _nextGCFrame += _config.autoSleep || 120;\n      var child = _globalTimeline._first;\n      if (!child || !child._ts) if (_config.autoSleep && _ticker._listeners.length < 2) {\n        while (child && !child._ts) {\n          child = child._next;\n        }\n\n        child || _ticker.sleep();\n      }\n    }\n  };\n\n  return Timeline;\n}(Animation);\n\n_setDefaults(Timeline.prototype, {\n  _lock: 0,\n  _hasPause: 0,\n  _forcing: 0\n});\n\nvar _addComplexStringPropTween = function _addComplexStringPropTween(target, prop, start, end, setter, stringFilter, funcParam) {\n  //note: we call _addComplexStringPropTween.call(tweenInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n  var pt = new PropTween(this._pt, target, prop, 0, 1, _renderComplexString, null, setter),\n      index = 0,\n      matchIndex = 0,\n      result,\n      startNums,\n      color,\n      endNum,\n      chunk,\n      startNum,\n      hasRandom,\n      a;\n  pt.b = start;\n  pt.e = end;\n  start += \"\"; //ensure values are strings\n\n  end += \"\";\n\n  if (hasRandom = ~end.indexOf(\"random(\")) {\n    end = _replaceRandom(end);\n  }\n\n  if (stringFilter) {\n    a = [start, end];\n    stringFilter(a, target, prop); //pass an array with the starting and ending values and let the filter do whatever it needs to the values.\n\n    start = a[0];\n    end = a[1];\n  }\n\n  startNums = start.match(_complexStringNumExp) || [];\n\n  while (result = _complexStringNumExp.exec(end)) {\n    endNum = result[0];\n    chunk = end.substring(index, result.index);\n\n    if (color) {\n      color = (color + 1) % 5;\n    } else if (chunk.substr(-5) === \"rgba(\") {\n      color = 1;\n    }\n\n    if (endNum !== startNums[matchIndex++]) {\n      startNum = parseFloat(startNums[matchIndex - 1]) || 0; //these nested PropTweens are handled in a special way - we'll never actually call a render or setter method on them. We'll just loop through them in the parent complex string PropTween's render method.\n\n      pt._pt = {\n        _next: pt._pt,\n        p: chunk || matchIndex === 1 ? chunk : \",\",\n        //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.\n        s: startNum,\n        c: endNum.charAt(1) === \"=\" ? _parseRelative(startNum, endNum) - startNum : parseFloat(endNum) - startNum,\n        m: color && color < 4 ? Math.round : 0\n      };\n      index = _complexStringNumExp.lastIndex;\n    }\n  }\n\n  pt.c = index < end.length ? end.substring(index, end.length) : \"\"; //we use the \"c\" of the PropTween to store the final part of the string (after the last number)\n\n  pt.fp = funcParam;\n\n  if (_relExp.test(end) || hasRandom) {\n    pt.e = 0; //if the end string contains relative values or dynamic random(...) values, delete the end it so that on the final render we don't actually set it to the string with += or -= characters (forces it to use the calculated value).\n  }\n\n  this._pt = pt; //start the linked list with this new PropTween. Remember, we call _addComplexStringPropTween.call(tweenInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n\n  return pt;\n},\n    _addPropTween = function _addPropTween(target, prop, start, end, index, targets, modifier, stringFilter, funcParam, optional) {\n  _isFunction(end) && (end = end(index || 0, target, targets));\n  var currentValue = target[prop],\n      parsedStart = start !== \"get\" ? start : !_isFunction(currentValue) ? currentValue : funcParam ? target[prop.indexOf(\"set\") || !_isFunction(target[\"get\" + prop.substr(3)]) ? prop : \"get\" + prop.substr(3)](funcParam) : target[prop](),\n      setter = !_isFunction(currentValue) ? _setterPlain : funcParam ? _setterFuncWithParam : _setterFunc,\n      pt;\n\n  if (_isString(end)) {\n    if (~end.indexOf(\"random(\")) {\n      end = _replaceRandom(end);\n    }\n\n    if (end.charAt(1) === \"=\") {\n      pt = _parseRelative(parsedStart, end) + (getUnit(parsedStart) || 0);\n\n      if (pt || pt === 0) {\n        // to avoid isNaN, like if someone passes in a value like \"!= whatever\"\n        end = pt;\n      }\n    }\n  }\n\n  if (!optional || parsedStart !== end || _forceAllPropTweens) {\n    if (!isNaN(parsedStart * end) && end !== \"\") {\n      // fun fact: any number multiplied by \"\" is evaluated as the number 0!\n      pt = new PropTween(this._pt, target, prop, +parsedStart || 0, end - (parsedStart || 0), typeof currentValue === \"boolean\" ? _renderBoolean : _renderPlain, 0, setter);\n      funcParam && (pt.fp = funcParam);\n      modifier && pt.modifier(modifier, this, target);\n      return this._pt = pt;\n    }\n\n    !currentValue && !(prop in target) && _missingPlugin(prop, end);\n    return _addComplexStringPropTween.call(this, target, prop, parsedStart, end, setter, stringFilter || _config.stringFilter, funcParam);\n  }\n},\n    //creates a copy of the vars object and processes any function-based values (putting the resulting values directly into the copy) as well as strings with \"random()\" in them. It does NOT process relative values.\n_processVars = function _processVars(vars, index, target, targets, tween) {\n  _isFunction(vars) && (vars = _parseFuncOrString(vars, tween, index, target, targets));\n\n  if (!_isObject(vars) || vars.style && vars.nodeType || _isArray(vars) || _isTypedArray(vars)) {\n    return _isString(vars) ? _parseFuncOrString(vars, tween, index, target, targets) : vars;\n  }\n\n  var copy = {},\n      p;\n\n  for (p in vars) {\n    copy[p] = _parseFuncOrString(vars[p], tween, index, target, targets);\n  }\n\n  return copy;\n},\n    _checkPlugin = function _checkPlugin(property, vars, tween, index, target, targets) {\n  var plugin, pt, ptLookup, i;\n\n  if (_plugins[property] && (plugin = new _plugins[property]()).init(target, plugin.rawVars ? vars[property] : _processVars(vars[property], index, target, targets, tween), tween, index, targets) !== false) {\n    tween._pt = pt = new PropTween(tween._pt, target, property, 0, 1, plugin.render, plugin, 0, plugin.priority);\n\n    if (tween !== _quickTween) {\n      ptLookup = tween._ptLookup[tween._targets.indexOf(target)]; //note: we can't use tween._ptLookup[index] because for staggered tweens, the index from the fullTargets array won't match what it is in each individual tween that spawns from the stagger.\n\n      i = plugin._props.length;\n\n      while (i--) {\n        ptLookup[plugin._props[i]] = pt;\n      }\n    }\n  }\n\n  return plugin;\n},\n    _overwritingTween,\n    //store a reference temporarily so we can avoid overwriting itself.\n_forceAllPropTweens,\n    _initTween = function _initTween(tween, time) {\n  var vars = tween.vars,\n      ease = vars.ease,\n      startAt = vars.startAt,\n      immediateRender = vars.immediateRender,\n      lazy = vars.lazy,\n      onUpdate = vars.onUpdate,\n      onUpdateParams = vars.onUpdateParams,\n      callbackScope = vars.callbackScope,\n      runBackwards = vars.runBackwards,\n      yoyoEase = vars.yoyoEase,\n      keyframes = vars.keyframes,\n      autoRevert = vars.autoRevert,\n      dur = tween._dur,\n      prevStartAt = tween._startAt,\n      targets = tween._targets,\n      parent = tween.parent,\n      fullTargets = parent && parent.data === \"nested\" ? parent.vars.targets : targets,\n      autoOverwrite = tween._overwrite === \"auto\" && !_suppressOverwrites,\n      tl = tween.timeline,\n      cleanVars,\n      i,\n      p,\n      pt,\n      target,\n      hasPriority,\n      gsData,\n      harness,\n      plugin,\n      ptLookup,\n      index,\n      harnessVars,\n      overwritten;\n  tl && (!keyframes || !ease) && (ease = \"none\");\n  tween._ease = _parseEase(ease, _defaults.ease);\n  tween._yEase = yoyoEase ? _invertEase(_parseEase(yoyoEase === true ? ease : yoyoEase, _defaults.ease)) : 0;\n\n  if (yoyoEase && tween._yoyo && !tween._repeat) {\n    //there must have been a parent timeline with yoyo:true that is currently in its yoyo phase, so flip the eases.\n    yoyoEase = tween._yEase;\n    tween._yEase = tween._ease;\n    tween._ease = yoyoEase;\n  }\n\n  tween._from = !tl && !!vars.runBackwards; //nested timelines should never run backwards - the backwards-ness is in the child tweens.\n\n  if (!tl || keyframes && !vars.stagger) {\n    //if there's an internal timeline, skip all the parsing because we passed that task down the chain.\n    harness = targets[0] ? _getCache(targets[0]).harness : 0;\n    harnessVars = harness && vars[harness.prop]; //someone may need to specify CSS-specific values AND non-CSS values, like if the element has an \"x\" property plus it's a standard DOM element. We allow people to distinguish by wrapping plugin-specific stuff in a css:{} object for example.\n\n    cleanVars = _copyExcluding(vars, _reservedProps);\n\n    if (prevStartAt) {\n      time < 0 && runBackwards && immediateRender && !autoRevert ? prevStartAt.render(-1, true) : prevStartAt.revert(runBackwards && dur ? _revertConfig : _startAtRevertConfig); // if it's a \"startAt\" (not \"from()\" or runBackwards: true), we only need to do a shallow revert (keep transforms cached in CSSPlugin)\n      // don't just _removeFromParent(prevStartAt.render(-1, true)) because that'll leave inline styles. We're creating a new _startAt for \"startAt\" tweens that re-capture things to ensure that if the pre-tween values changed since the tween was created, they're recorded.\n\n      prevStartAt._lazy = 0;\n    }\n\n    if (startAt) {\n      _removeFromParent(tween._startAt = Tween.set(targets, _setDefaults({\n        data: \"isStart\",\n        overwrite: false,\n        parent: parent,\n        immediateRender: true,\n        lazy: _isNotFalse(lazy),\n        startAt: null,\n        delay: 0,\n        onUpdate: onUpdate,\n        onUpdateParams: onUpdateParams,\n        callbackScope: callbackScope,\n        stagger: 0\n      }, startAt))); //copy the properties/values into a new object to avoid collisions, like var to = {x:0}, from = {x:500}; timeline.fromTo(e, from, to).fromTo(e, to, from);\n\n\n      time < 0 && (_reverting || !immediateRender && !autoRevert) && tween._startAt.revert(_revertConfig); // rare edge case, like if a render is forced in the negative direction of a non-initted tween.\n\n      if (immediateRender) {\n        if (dur && time <= 0) {\n          time && (tween._zTime = time);\n          return; //we skip initialization here so that overwriting doesn't occur until the tween actually begins. Otherwise, if you create several immediateRender:true tweens of the same target/properties to drop into a Timeline, the last one created would overwrite the first ones because they didn't get placed into the timeline yet before the first render occurs and kicks in overwriting.\n        }\n      }\n    } else if (runBackwards && dur) {\n      //from() tweens must be handled uniquely: their beginning values must be rendered but we don't want overwriting to occur yet (when time is still 0). Wait until the tween actually begins before doing all the routines like overwriting. At that time, we should render at the END of the tween to ensure that things initialize correctly (remember, from() tweens go backwards)\n      if (!prevStartAt) {\n        time && (immediateRender = false); //in rare cases (like if a from() tween runs and then is invalidate()-ed), immediateRender could be true but the initial forced-render gets skipped, so there's no need to force the render in this context when the _time is greater than 0\n\n        p = _setDefaults({\n          overwrite: false,\n          data: \"isFromStart\",\n          //we tag the tween with as \"isFromStart\" so that if [inside a plugin] we need to only do something at the very END of a tween, we have a way of identifying this tween as merely the one that's setting the beginning values for a \"from()\" tween. For example, clearProps in CSSPlugin should only get applied at the very END of a tween and without this tag, from(...{height:100, clearProps:\"height\", delay:1}) would wipe the height at the beginning of the tween and after 1 second, it'd kick back in.\n          lazy: immediateRender && _isNotFalse(lazy),\n          immediateRender: immediateRender,\n          //zero-duration tweens render immediately by default, but if we're not specifically instructed to render this tween immediately, we should skip this and merely _init() to record the starting values (rendering them immediately would push them to completion which is wasteful in that case - we'd have to render(-1) immediately after)\n          stagger: 0,\n          parent: parent //ensures that nested tweens that had a stagger are handled properly, like gsap.from(\".class\", {y:gsap.utils.wrap([-100,100])})\n\n        }, cleanVars);\n        harnessVars && (p[harness.prop] = harnessVars); // in case someone does something like .from(..., {css:{}})\n\n        _removeFromParent(tween._startAt = Tween.set(targets, p));\n\n        time < 0 && (_reverting ? tween._startAt.revert(_revertConfig) : tween._startAt.render(-1, true));\n        tween._zTime = time;\n\n        if (!immediateRender) {\n          _initTween(tween._startAt, _tinyNum); //ensures that the initial values are recorded\n\n        } else if (!time) {\n          return;\n        }\n      }\n    }\n\n    tween._pt = tween._ptCache = 0;\n    lazy = dur && _isNotFalse(lazy) || lazy && !dur;\n\n    for (i = 0; i < targets.length; i++) {\n      target = targets[i];\n      gsData = target._gsap || _harness(targets)[i]._gsap;\n      tween._ptLookup[i] = ptLookup = {};\n      _lazyLookup[gsData.id] && _lazyTweens.length && _lazyRender(); //if other tweens of the same target have recently initted but haven't rendered yet, we've got to force the render so that the starting values are correct (imagine populating a timeline with a bunch of sequential tweens and then jumping to the end)\n\n      index = fullTargets === targets ? i : fullTargets.indexOf(target);\n\n      if (harness && (plugin = new harness()).init(target, harnessVars || cleanVars, tween, index, fullTargets) !== false) {\n        tween._pt = pt = new PropTween(tween._pt, target, plugin.name, 0, 1, plugin.render, plugin, 0, plugin.priority);\n\n        plugin._props.forEach(function (name) {\n          ptLookup[name] = pt;\n        });\n\n        plugin.priority && (hasPriority = 1);\n      }\n\n      if (!harness || harnessVars) {\n        for (p in cleanVars) {\n          if (_plugins[p] && (plugin = _checkPlugin(p, cleanVars, tween, index, target, fullTargets))) {\n            plugin.priority && (hasPriority = 1);\n          } else {\n            ptLookup[p] = pt = _addPropTween.call(tween, target, p, \"get\", cleanVars[p], index, fullTargets, 0, vars.stringFilter);\n          }\n        }\n      }\n\n      tween._op && tween._op[i] && tween.kill(target, tween._op[i]);\n\n      if (autoOverwrite && tween._pt) {\n        _overwritingTween = tween;\n\n        _globalTimeline.killTweensOf(target, ptLookup, tween.globalTime(time)); // make sure the overwriting doesn't overwrite THIS tween!!!\n\n\n        overwritten = !tween.parent;\n        _overwritingTween = 0;\n      }\n\n      tween._pt && lazy && (_lazyLookup[gsData.id] = 1);\n    }\n\n    hasPriority && _sortPropTweensByPriority(tween);\n    tween._onInit && tween._onInit(tween); //plugins like RoundProps must wait until ALL of the PropTweens are instantiated. In the plugin's init() function, it sets the _onInit on the tween instance. May not be pretty/intuitive, but it's fast and keeps file size down.\n  }\n\n  tween._onUpdate = onUpdate;\n  tween._initted = (!tween._op || tween._pt) && !overwritten; // if overwrittenProps resulted in the entire tween being killed, do NOT flag it as initted or else it may render for one tick.\n\n  keyframes && time <= 0 && tl.render(_bigNum, true, true); // if there's a 0% keyframe, it'll render in the \"before\" state for any staggered/delayed animations thus when the following tween initializes, it'll use the \"before\" state instead of the \"after\" state as the initial values.\n},\n    _updatePropTweens = function _updatePropTweens(tween, property, value, start, startIsRelative, ratio, time) {\n  var ptCache = (tween._pt && tween._ptCache || (tween._ptCache = {}))[property],\n      pt,\n      rootPT,\n      lookup,\n      i;\n\n  if (!ptCache) {\n    ptCache = tween._ptCache[property] = [];\n    lookup = tween._ptLookup;\n    i = tween._targets.length;\n\n    while (i--) {\n      pt = lookup[i][property];\n\n      if (pt && pt.d && pt.d._pt) {\n        // it's a plugin, so find the nested PropTween\n        pt = pt.d._pt;\n\n        while (pt && pt.p !== property && pt.fp !== property) {\n          // \"fp\" is functionParam for things like setting CSS variables which require .setProperty(\"--var-name\", value)\n          pt = pt._next;\n        }\n      }\n\n      if (!pt) {\n        // there is no PropTween associated with that property, so we must FORCE one to be created and ditch out of this\n        // if the tween has other properties that already rendered at new positions, we'd normally have to rewind to put them back like tween.render(0, true) before forcing an _initTween(), but that can create another edge case like tweening a timeline's progress would trigger onUpdates to fire which could move other things around. It's better to just inform users that .resetTo() should ONLY be used for tweens that already have that property. For example, you can't gsap.to(...{ y: 0 }) and then tween.restTo(\"x\", 200) for example.\n        _forceAllPropTweens = 1; // otherwise, when we _addPropTween() and it finds no change between the start and end values, it skips creating a PropTween (for efficiency...why tween when there's no difference?) but in this case we NEED that PropTween created so we can edit it.\n\n        tween.vars[property] = \"+=0\";\n\n        _initTween(tween, time);\n\n        _forceAllPropTweens = 0;\n        return 1;\n      }\n\n      ptCache.push(pt);\n    }\n  }\n\n  i = ptCache.length;\n\n  while (i--) {\n    rootPT = ptCache[i];\n    pt = rootPT._pt || rootPT; // complex values may have nested PropTweens. We only accommodate the FIRST value.\n\n    pt.s = (start || start === 0) && !startIsRelative ? start : pt.s + (start || 0) + ratio * pt.c;\n    pt.c = value - pt.s;\n    rootPT.e && (rootPT.e = _round(value) + getUnit(rootPT.e)); // mainly for CSSPlugin (end value)\n\n    rootPT.b && (rootPT.b = pt.s + getUnit(rootPT.b)); // (beginning value)\n  }\n},\n    _addAliasesToVars = function _addAliasesToVars(targets, vars) {\n  var harness = targets[0] ? _getCache(targets[0]).harness : 0,\n      propertyAliases = harness && harness.aliases,\n      copy,\n      p,\n      i,\n      aliases;\n\n  if (!propertyAliases) {\n    return vars;\n  }\n\n  copy = _merge({}, vars);\n\n  for (p in propertyAliases) {\n    if (p in copy) {\n      aliases = propertyAliases[p].split(\",\");\n      i = aliases.length;\n\n      while (i--) {\n        copy[aliases[i]] = copy[p];\n      }\n    }\n  }\n\n  return copy;\n},\n    // parses multiple formats, like {\"0%\": {x: 100}, {\"50%\": {x: -20}} and { x: {\"0%\": 100, \"50%\": -20} }, and an \"ease\" can be set on any object. We populate an \"allProps\" object with an Array for each property, like {x: [{}, {}], y:[{}, {}]} with data for each property tween. The objects have a \"t\" (time), \"v\", (value), and \"e\" (ease) property. This allows us to piece together a timeline later.\n_parseKeyframe = function _parseKeyframe(prop, obj, allProps, easeEach) {\n  var ease = obj.ease || easeEach || \"power1.inOut\",\n      p,\n      a;\n\n  if (_isArray(obj)) {\n    a = allProps[prop] || (allProps[prop] = []); // t = time (out of 100), v = value, e = ease\n\n    obj.forEach(function (value, i) {\n      return a.push({\n        t: i / (obj.length - 1) * 100,\n        v: value,\n        e: ease\n      });\n    });\n  } else {\n    for (p in obj) {\n      a = allProps[p] || (allProps[p] = []);\n      p === \"ease\" || a.push({\n        t: parseFloat(prop),\n        v: obj[p],\n        e: ease\n      });\n    }\n  }\n},\n    _parseFuncOrString = function _parseFuncOrString(value, tween, i, target, targets) {\n  return _isFunction(value) ? value.call(tween, i, target, targets) : _isString(value) && ~value.indexOf(\"random(\") ? _replaceRandom(value) : value;\n},\n    _staggerTweenProps = _callbackNames + \"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert\",\n    _staggerPropsToSkip = {};\n\n_forEachName(_staggerTweenProps + \",id,stagger,delay,duration,paused,scrollTrigger\", function (name) {\n  return _staggerPropsToSkip[name] = 1;\n});\n/*\n * --------------------------------------------------------------------------------------\n * TWEEN\n * --------------------------------------------------------------------------------------\n */\n\n\nexport var Tween = /*#__PURE__*/function (_Animation2) {\n  _inheritsLoose(Tween, _Animation2);\n\n  function Tween(targets, vars, position, skipInherit) {\n    var _this3;\n\n    if (typeof vars === \"number\") {\n      position.duration = vars;\n      vars = position;\n      position = null;\n    }\n\n    _this3 = _Animation2.call(this, skipInherit ? vars : _inheritDefaults(vars)) || this;\n    var _this3$vars = _this3.vars,\n        duration = _this3$vars.duration,\n        delay = _this3$vars.delay,\n        immediateRender = _this3$vars.immediateRender,\n        stagger = _this3$vars.stagger,\n        overwrite = _this3$vars.overwrite,\n        keyframes = _this3$vars.keyframes,\n        defaults = _this3$vars.defaults,\n        scrollTrigger = _this3$vars.scrollTrigger,\n        yoyoEase = _this3$vars.yoyoEase,\n        parent = vars.parent || _globalTimeline,\n        parsedTargets = (_isArray(targets) || _isTypedArray(targets) ? _isNumber(targets[0]) : \"length\" in vars) ? [targets] : toArray(targets),\n        tl,\n        i,\n        copy,\n        l,\n        p,\n        curTarget,\n        staggerFunc,\n        staggerVarsToMerge;\n    _this3._targets = parsedTargets.length ? _harness(parsedTargets) : _warn(\"GSAP target \" + targets + \" not found. https://greensock.com\", !_config.nullTargetWarn) || [];\n    _this3._ptLookup = []; //PropTween lookup. An array containing an object for each target, having keys for each tweening property\n\n    _this3._overwrite = overwrite;\n\n    if (keyframes || stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {\n      vars = _this3.vars;\n      tl = _this3.timeline = new Timeline({\n        data: \"nested\",\n        defaults: defaults || {},\n        targets: parent && parent.data === \"nested\" ? parent.vars.targets : parsedTargets\n      }); // we need to store the targets because for staggers and keyframes, we end up creating an individual tween for each but function-based values need to know the index and the whole Array of targets.\n\n      tl.kill();\n      tl.parent = tl._dp = _assertThisInitialized(_this3);\n      tl._start = 0;\n\n      if (stagger || _isFuncOrString(duration) || _isFuncOrString(delay)) {\n        l = parsedTargets.length;\n        staggerFunc = stagger && distribute(stagger);\n\n        if (_isObject(stagger)) {\n          //users can pass in callbacks like onStart/onComplete in the stagger object. These should fire with each individual tween.\n          for (p in stagger) {\n            if (~_staggerTweenProps.indexOf(p)) {\n              staggerVarsToMerge || (staggerVarsToMerge = {});\n              staggerVarsToMerge[p] = stagger[p];\n            }\n          }\n        }\n\n        for (i = 0; i < l; i++) {\n          copy = _copyExcluding(vars, _staggerPropsToSkip);\n          copy.stagger = 0;\n          yoyoEase && (copy.yoyoEase = yoyoEase);\n          staggerVarsToMerge && _merge(copy, staggerVarsToMerge);\n          curTarget = parsedTargets[i]; //don't just copy duration or delay because if they're a string or function, we'd end up in an infinite loop because _isFuncOrString() would evaluate as true in the child tweens, entering this loop, etc. So we parse the value straight from vars and default to 0.\n\n          copy.duration = +_parseFuncOrString(duration, _assertThisInitialized(_this3), i, curTarget, parsedTargets);\n          copy.delay = (+_parseFuncOrString(delay, _assertThisInitialized(_this3), i, curTarget, parsedTargets) || 0) - _this3._delay;\n\n          if (!stagger && l === 1 && copy.delay) {\n            // if someone does delay:\"random(1, 5)\", repeat:-1, for example, the delay shouldn't be inside the repeat.\n            _this3._delay = delay = copy.delay;\n            _this3._start += delay;\n            copy.delay = 0;\n          }\n\n          tl.to(curTarget, copy, staggerFunc ? staggerFunc(i, curTarget, parsedTargets) : 0);\n          tl._ease = _easeMap.none;\n        }\n\n        tl.duration() ? duration = delay = 0 : _this3.timeline = 0; // if the timeline's duration is 0, we don't need a timeline internally!\n      } else if (keyframes) {\n        _inheritDefaults(_setDefaults(tl.vars.defaults, {\n          ease: \"none\"\n        }));\n\n        tl._ease = _parseEase(keyframes.ease || vars.ease || \"none\");\n        var time = 0,\n            a,\n            kf,\n            v;\n\n        if (_isArray(keyframes)) {\n          keyframes.forEach(function (frame) {\n            return tl.to(parsedTargets, frame, \">\");\n          });\n          tl.duration(); // to ensure tl._dur is cached because we tap into it for performance purposes in the render() method.\n        } else {\n          copy = {};\n\n          for (p in keyframes) {\n            p === \"ease\" || p === \"easeEach\" || _parseKeyframe(p, keyframes[p], copy, keyframes.easeEach);\n          }\n\n          for (p in copy) {\n            a = copy[p].sort(function (a, b) {\n              return a.t - b.t;\n            });\n            time = 0;\n\n            for (i = 0; i < a.length; i++) {\n              kf = a[i];\n              v = {\n                ease: kf.e,\n                duration: (kf.t - (i ? a[i - 1].t : 0)) / 100 * duration\n              };\n              v[p] = kf.v;\n              tl.to(parsedTargets, v, time);\n              time += v.duration;\n            }\n          }\n\n          tl.duration() < duration && tl.to({}, {\n            duration: duration - tl.duration()\n          }); // in case keyframes didn't go to 100%\n        }\n      }\n\n      duration || _this3.duration(duration = tl.duration());\n    } else {\n      _this3.timeline = 0; //speed optimization, faster lookups (no going up the prototype chain)\n    }\n\n    if (overwrite === true && !_suppressOverwrites) {\n      _overwritingTween = _assertThisInitialized(_this3);\n\n      _globalTimeline.killTweensOf(parsedTargets);\n\n      _overwritingTween = 0;\n    }\n\n    _addToTimeline(parent, _assertThisInitialized(_this3), position);\n\n    vars.reversed && _this3.reverse();\n    vars.paused && _this3.paused(true);\n\n    if (immediateRender || !duration && !keyframes && _this3._start === _roundPrecise(parent._time) && _isNotFalse(immediateRender) && _hasNoPausedAncestors(_assertThisInitialized(_this3)) && parent.data !== \"nested\") {\n      _this3._tTime = -_tinyNum; //forces a render without having to set the render() \"force\" parameter to true because we want to allow lazying by default (using the \"force\" parameter always forces an immediate full render)\n\n      _this3.render(Math.max(0, -delay)); //in case delay is negative\n\n    }\n\n    scrollTrigger && _scrollTrigger(_assertThisInitialized(_this3), scrollTrigger);\n    return _this3;\n  }\n\n  var _proto3 = Tween.prototype;\n\n  _proto3.render = function render(totalTime, suppressEvents, force) {\n    var prevTime = this._time,\n        tDur = this._tDur,\n        dur = this._dur,\n        isNegative = totalTime < 0,\n        tTime = totalTime > tDur - _tinyNum && !isNegative ? tDur : totalTime < _tinyNum ? 0 : totalTime,\n        time,\n        pt,\n        iteration,\n        cycleDuration,\n        prevIteration,\n        isYoyo,\n        ratio,\n        timeline,\n        yoyoEase;\n\n    if (!dur) {\n      _renderZeroDurationTween(this, totalTime, suppressEvents, force);\n    } else if (tTime !== this._tTime || !totalTime || force || !this._initted && this._tTime || this._startAt && this._zTime < 0 !== isNegative) {\n      //this senses if we're crossing over the start time, in which case we must record _zTime and force the render, but we do it in this lengthy conditional way for performance reasons (usually we can skip the calculations): this._initted && (this._zTime < 0) !== (totalTime < 0)\n      time = tTime;\n      timeline = this.timeline;\n\n      if (this._repeat) {\n        //adjust the time for repeats and yoyos\n        cycleDuration = dur + this._rDelay;\n\n        if (this._repeat < -1 && isNegative) {\n          return this.totalTime(cycleDuration * 100 + totalTime, suppressEvents, force);\n        }\n\n        time = _roundPrecise(tTime % cycleDuration); //round to avoid floating point errors. (4 % 0.8 should be 0 but some browsers report it as 0.79999999!)\n\n        if (tTime === tDur) {\n          // the tDur === tTime is for edge cases where there's a lengthy decimal on the duration and it may reach the very end but the time is rendered as not-quite-there (remember, tDur is rounded to 4 decimals whereas dur isn't)\n          iteration = this._repeat;\n          time = dur;\n        } else {\n          iteration = ~~(tTime / cycleDuration);\n\n          if (iteration && iteration === tTime / cycleDuration) {\n            time = dur;\n            iteration--;\n          }\n\n          time > dur && (time = dur);\n        }\n\n        isYoyo = this._yoyo && iteration & 1;\n\n        if (isYoyo) {\n          yoyoEase = this._yEase;\n          time = dur - time;\n        }\n\n        prevIteration = _animationCycle(this._tTime, cycleDuration);\n\n        if (time === prevTime && !force && this._initted) {\n          //could be during the repeatDelay part. No need to render and fire callbacks.\n          this._tTime = tTime;\n          return this;\n        }\n\n        if (iteration !== prevIteration) {\n          timeline && this._yEase && _propagateYoyoEase(timeline, isYoyo); //repeatRefresh functionality\n\n          if (this.vars.repeatRefresh && !isYoyo && !this._lock) {\n            this._lock = force = 1; //force, otherwise if lazy is true, the _attemptInitTween() will return and we'll jump out and get caught bouncing on each tick.\n\n            this.render(_roundPrecise(cycleDuration * iteration), true).invalidate()._lock = 0;\n          }\n        }\n      }\n\n      if (!this._initted) {\n        if (_attemptInitTween(this, isNegative ? totalTime : time, force, suppressEvents)) {\n          this._tTime = 0; // in constructor if immediateRender is true, we set _tTime to -_tinyNum to have the playhead cross the starting point but we can't leave _tTime as a negative number.\n\n          return this;\n        }\n\n        if (prevTime !== this._time) {\n          // rare edge case - during initialization, an onUpdate in the _startAt (.fromTo()) might force this tween to render at a different spot in which case we should ditch this render() call so that it doesn't revert the values.\n          return this;\n        }\n\n        if (dur !== this._dur) {\n          // while initting, a plugin like InertiaPlugin might alter the duration, so rerun from the start to ensure everything renders as it should.\n          return this.render(totalTime, suppressEvents, force);\n        }\n      }\n\n      this._tTime = tTime;\n      this._time = time;\n\n      if (!this._act && this._ts) {\n        this._act = 1; //as long as it's not paused, force it to be active so that if the user renders independent of the parent timeline, it'll be forced to re-render on the next tick.\n\n        this._lazy = 0;\n      }\n\n      this.ratio = ratio = (yoyoEase || this._ease)(time / dur);\n\n      if (this._from) {\n        this.ratio = ratio = 1 - ratio;\n      }\n\n      if (time && !prevTime && !suppressEvents) {\n        _callback(this, \"onStart\");\n\n        if (this._tTime !== tTime) {\n          // in case the onStart triggered a render at a different spot, eject. Like if someone did animation.pause(0.5) or something inside the onStart.\n          return this;\n        }\n      }\n\n      pt = this._pt;\n\n      while (pt) {\n        pt.r(ratio, pt.d);\n        pt = pt._next;\n      }\n\n      timeline && timeline.render(totalTime < 0 ? totalTime : !time && isYoyo ? -_tinyNum : timeline._dur * timeline._ease(time / this._dur), suppressEvents, force) || this._startAt && (this._zTime = totalTime);\n\n      if (this._onUpdate && !suppressEvents) {\n        isNegative && _rewindStartAt(this, totalTime, suppressEvents, force); //note: for performance reasons, we tuck this conditional logic inside less traveled areas (most tweens don't have an onUpdate). We'd just have it at the end before the onComplete, but the values should be updated before any onUpdate is called, so we ALSO put it here and then if it's not called, we do so later near the onComplete.\n\n        _callback(this, \"onUpdate\");\n      }\n\n      this._repeat && iteration !== prevIteration && this.vars.onRepeat && !suppressEvents && this.parent && _callback(this, \"onRepeat\");\n\n      if ((tTime === this._tDur || !tTime) && this._tTime === tTime) {\n        isNegative && !this._onUpdate && _rewindStartAt(this, totalTime, true, true);\n        (totalTime || !dur) && (tTime === this._tDur && this._ts > 0 || !tTime && this._ts < 0) && _removeFromParent(this, 1); // don't remove if we're rendering at exactly a time of 0, as there could be autoRevert values that should get set on the next tick (if the playhead goes backward beyond the startTime, negative totalTime). Don't remove if the timeline is reversed and the playhead isn't at 0, otherwise tl.progress(1).reverse() won't work. Only remove if the playhead is at the end and timeScale is positive, or if the playhead is at 0 and the timeScale is negative.\n\n        if (!suppressEvents && !(isNegative && !prevTime) && (tTime || prevTime)) {\n          // if prevTime and tTime are zero, we shouldn't fire the onReverseComplete. This could happen if you gsap.to(... {paused:true}).play();\n          _callback(this, tTime === tDur ? \"onComplete\" : \"onReverseComplete\", true);\n\n          this._prom && !(tTime < tDur && this.timeScale() > 0) && this._prom();\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto3.targets = function targets() {\n    return this._targets;\n  };\n\n  _proto3.invalidate = function invalidate() {\n    this._pt = this._op = this._startAt = this._onUpdate = this._lazy = this.ratio = 0;\n    this._ptLookup = [];\n    this.timeline && this.timeline.invalidate();\n    return _Animation2.prototype.invalidate.call(this);\n  };\n\n  _proto3.resetTo = function resetTo(property, value, start, startIsRelative) {\n    _tickerActive || _ticker.wake();\n    this._ts || this.play();\n    var time = Math.min(this._dur, (this._dp._time - this._start) * this._ts),\n        ratio;\n    this._initted || _initTween(this, time);\n    ratio = this._ease(time / this._dur); // don't just get tween.ratio because it may not have rendered yet.\n    // possible future addition to allow an object with multiple values to update, like tween.resetTo({x: 100, y: 200}); At this point, it doesn't seem worth the added kb given the fact that most users will likely opt for the convenient gsap.quickTo() way of interacting with this method.\n    // if (_isObject(property)) { // performance optimization\n    // \tfor (p in property) {\n    // \t\tif (_updatePropTweens(this, p, property[p], value ? value[p] : null, start, ratio, time)) {\n    // \t\t\treturn this.resetTo(property, value, start, startIsRelative); // if a PropTween wasn't found for the property, it'll get forced with a re-initialization so we need to jump out and start over again.\n    // \t\t}\n    // \t}\n    // } else {\n\n    if (_updatePropTweens(this, property, value, start, startIsRelative, ratio, time)) {\n      return this.resetTo(property, value, start, startIsRelative); // if a PropTween wasn't found for the property, it'll get forced with a re-initialization so we need to jump out and start over again.\n    } //}\n\n\n    _alignPlayhead(this, 0);\n\n    this.parent || _addLinkedListItem(this._dp, this, \"_first\", \"_last\", this._dp._sort ? \"_start\" : 0);\n    return this.render(0);\n  };\n\n  _proto3.kill = function kill(targets, vars) {\n    if (vars === void 0) {\n      vars = \"all\";\n    }\n\n    if (!targets && (!vars || vars === \"all\")) {\n      this._lazy = this._pt = 0;\n      return this.parent ? _interrupt(this) : this;\n    }\n\n    if (this.timeline) {\n      var tDur = this.timeline.totalDuration();\n      this.timeline.killTweensOf(targets, vars, _overwritingTween && _overwritingTween.vars.overwrite !== true)._first || _interrupt(this); // if nothing is left tweening, interrupt.\n\n      this.parent && tDur !== this.timeline.totalDuration() && _setDuration(this, this._dur * this.timeline._tDur / tDur, 0, 1); // if a nested tween is killed that changes the duration, it should affect this tween's duration. We must use the ratio, though, because sometimes the internal timeline is stretched like for keyframes where they don't all add up to whatever the parent tween's duration was set to.\n\n      return this;\n    }\n\n    var parsedTargets = this._targets,\n        killingTargets = targets ? toArray(targets) : parsedTargets,\n        propTweenLookup = this._ptLookup,\n        firstPT = this._pt,\n        overwrittenProps,\n        curLookup,\n        curOverwriteProps,\n        props,\n        p,\n        pt,\n        i;\n\n    if ((!vars || vars === \"all\") && _arraysMatch(parsedTargets, killingTargets)) {\n      vars === \"all\" && (this._pt = 0);\n      return _interrupt(this);\n    }\n\n    overwrittenProps = this._op = this._op || [];\n\n    if (vars !== \"all\") {\n      //so people can pass in a comma-delimited list of property names\n      if (_isString(vars)) {\n        p = {};\n\n        _forEachName(vars, function (name) {\n          return p[name] = 1;\n        });\n\n        vars = p;\n      }\n\n      vars = _addAliasesToVars(parsedTargets, vars);\n    }\n\n    i = parsedTargets.length;\n\n    while (i--) {\n      if (~killingTargets.indexOf(parsedTargets[i])) {\n        curLookup = propTweenLookup[i];\n\n        if (vars === \"all\") {\n          overwrittenProps[i] = vars;\n          props = curLookup;\n          curOverwriteProps = {};\n        } else {\n          curOverwriteProps = overwrittenProps[i] = overwrittenProps[i] || {};\n          props = vars;\n        }\n\n        for (p in props) {\n          pt = curLookup && curLookup[p];\n\n          if (pt) {\n            if (!(\"kill\" in pt.d) || pt.d.kill(p) === true) {\n              _removeLinkedListItem(this, pt, \"_pt\");\n            }\n\n            delete curLookup[p];\n          }\n\n          if (curOverwriteProps !== \"all\") {\n            curOverwriteProps[p] = 1;\n          }\n        }\n      }\n    }\n\n    this._initted && !this._pt && firstPT && _interrupt(this); //if all tweening properties are killed, kill the tween. Without this line, if there's a tween with multiple targets and then you killTweensOf() each target individually, the tween would technically still remain active and fire its onComplete even though there aren't any more properties tweening.\n\n    return this;\n  };\n\n  Tween.to = function to(targets, vars) {\n    return new Tween(targets, vars, arguments[2]);\n  };\n\n  Tween.from = function from(targets, vars) {\n    return _createTweenType(1, arguments);\n  };\n\n  Tween.delayedCall = function delayedCall(delay, callback, params, scope) {\n    return new Tween(callback, 0, {\n      immediateRender: false,\n      lazy: false,\n      overwrite: false,\n      delay: delay,\n      onComplete: callback,\n      onReverseComplete: callback,\n      onCompleteParams: params,\n      onReverseCompleteParams: params,\n      callbackScope: scope\n    }); // we must use onReverseComplete too for things like timeline.add(() => {...}) which should be triggered in BOTH directions (forward and reverse)\n  };\n\n  Tween.fromTo = function fromTo(targets, fromVars, toVars) {\n    return _createTweenType(2, arguments);\n  };\n\n  Tween.set = function set(targets, vars) {\n    vars.duration = 0;\n    vars.repeatDelay || (vars.repeat = 0);\n    return new Tween(targets, vars);\n  };\n\n  Tween.killTweensOf = function killTweensOf(targets, props, onlyActive) {\n    return _globalTimeline.killTweensOf(targets, props, onlyActive);\n  };\n\n  return Tween;\n}(Animation);\n\n_setDefaults(Tween.prototype, {\n  _targets: [],\n  _lazy: 0,\n  _startAt: 0,\n  _op: 0,\n  _onInit: 0\n}); //add the pertinent timeline methods to Tween instances so that users can chain conveniently and create a timeline automatically. (removed due to concerns that it'd ultimately add to more confusion especially for beginners)\n// _forEachName(\"to,from,fromTo,set,call,add,addLabel,addPause\", name => {\n// \tTween.prototype[name] = function() {\n// \t\tlet tl = new Timeline();\n// \t\treturn _addToTimeline(tl, this)[name].apply(tl, toArray(arguments));\n// \t}\n// });\n//for backward compatibility. Leverage the timeline calls.\n\n\n_forEachName(\"staggerTo,staggerFrom,staggerFromTo\", function (name) {\n  Tween[name] = function () {\n    var tl = new Timeline(),\n        params = _slice.call(arguments, 0);\n\n    params.splice(name === \"staggerFromTo\" ? 5 : 4, 0, 0);\n    return tl[name].apply(tl, params);\n  };\n});\n/*\n * --------------------------------------------------------------------------------------\n * PROPTWEEN\n * --------------------------------------------------------------------------------------\n */\n\n\nvar _setterPlain = function _setterPlain(target, property, value) {\n  return target[property] = value;\n},\n    _setterFunc = function _setterFunc(target, property, value) {\n  return target[property](value);\n},\n    _setterFuncWithParam = function _setterFuncWithParam(target, property, value, data) {\n  return target[property](data.fp, value);\n},\n    _setterAttribute = function _setterAttribute(target, property, value) {\n  return target.setAttribute(property, value);\n},\n    _getSetter = function _getSetter(target, property) {\n  return _isFunction(target[property]) ? _setterFunc : _isUndefined(target[property]) && target.setAttribute ? _setterAttribute : _setterPlain;\n},\n    _renderPlain = function _renderPlain(ratio, data) {\n  return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 1000000) / 1000000, data);\n},\n    _renderBoolean = function _renderBoolean(ratio, data) {\n  return data.set(data.t, data.p, !!(data.s + data.c * ratio), data);\n},\n    _renderComplexString = function _renderComplexString(ratio, data) {\n  var pt = data._pt,\n      s = \"\";\n\n  if (!ratio && data.b) {\n    //b = beginning string\n    s = data.b;\n  } else if (ratio === 1 && data.e) {\n    //e = ending string\n    s = data.e;\n  } else {\n    while (pt) {\n      s = pt.p + (pt.m ? pt.m(pt.s + pt.c * ratio) : Math.round((pt.s + pt.c * ratio) * 10000) / 10000) + s; //we use the \"p\" property for the text inbetween (like a suffix). And in the context of a complex string, the modifier (m) is typically just Math.round(), like for RGB colors.\n\n      pt = pt._next;\n    }\n\n    s += data.c; //we use the \"c\" of the PropTween to store the final chunk of non-numeric text.\n  }\n\n  data.set(data.t, data.p, s, data);\n},\n    _renderPropTweens = function _renderPropTweens(ratio, data) {\n  var pt = data._pt;\n\n  while (pt) {\n    pt.r(ratio, pt.d);\n    pt = pt._next;\n  }\n},\n    _addPluginModifier = function _addPluginModifier(modifier, tween, target, property) {\n  var pt = this._pt,\n      next;\n\n  while (pt) {\n    next = pt._next;\n    pt.p === property && pt.modifier(modifier, tween, target);\n    pt = next;\n  }\n},\n    _killPropTweensOf = function _killPropTweensOf(property) {\n  var pt = this._pt,\n      hasNonDependentRemaining,\n      next;\n\n  while (pt) {\n    next = pt._next;\n\n    if (pt.p === property && !pt.op || pt.op === property) {\n      _removeLinkedListItem(this, pt, \"_pt\");\n    } else if (!pt.dep) {\n      hasNonDependentRemaining = 1;\n    }\n\n    pt = next;\n  }\n\n  return !hasNonDependentRemaining;\n},\n    _setterWithModifier = function _setterWithModifier(target, property, value, data) {\n  data.mSet(target, property, data.m.call(data.tween, value, data.mt), data);\n},\n    _sortPropTweensByPriority = function _sortPropTweensByPriority(parent) {\n  var pt = parent._pt,\n      next,\n      pt2,\n      first,\n      last; //sorts the PropTween linked list in order of priority because some plugins need to do their work after ALL of the PropTweens were created (like RoundPropsPlugin and ModifiersPlugin)\n\n  while (pt) {\n    next = pt._next;\n    pt2 = first;\n\n    while (pt2 && pt2.pr > pt.pr) {\n      pt2 = pt2._next;\n    }\n\n    if (pt._prev = pt2 ? pt2._prev : last) {\n      pt._prev._next = pt;\n    } else {\n      first = pt;\n    }\n\n    if (pt._next = pt2) {\n      pt2._prev = pt;\n    } else {\n      last = pt;\n    }\n\n    pt = next;\n  }\n\n  parent._pt = first;\n}; //PropTween key: t = target, p = prop, r = renderer, d = data, s = start, c = change, op = overwriteProperty (ONLY populated when it's different than p), pr = priority, _next/_prev for the linked list siblings, set = setter, m = modifier, mSet = modifierSetter (the original setter, before a modifier was added)\n\n\nexport var PropTween = /*#__PURE__*/function () {\n  function PropTween(next, target, prop, start, change, renderer, data, setter, priority) {\n    this.t = target;\n    this.s = start;\n    this.c = change;\n    this.p = prop;\n    this.r = renderer || _renderPlain;\n    this.d = data || this;\n    this.set = setter || _setterPlain;\n    this.pr = priority || 0;\n    this._next = next;\n\n    if (next) {\n      next._prev = this;\n    }\n  }\n\n  var _proto4 = PropTween.prototype;\n\n  _proto4.modifier = function modifier(func, tween, target) {\n    this.mSet = this.mSet || this.set; //in case it was already set (a PropTween can only have one modifier)\n\n    this.set = _setterWithModifier;\n    this.m = func;\n    this.mt = target; //modifier target\n\n    this.tween = tween;\n  };\n\n  return PropTween;\n}(); //Initialization tasks\n\n_forEachName(_callbackNames + \"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger\", function (name) {\n  return _reservedProps[name] = 1;\n});\n\n_globals.TweenMax = _globals.TweenLite = Tween;\n_globals.TimelineLite = _globals.TimelineMax = Timeline;\n_globalTimeline = new Timeline({\n  sortChildren: false,\n  defaults: _defaults,\n  autoRemoveChildren: true,\n  id: \"root\",\n  smoothChildTiming: true\n});\n_config.stringFilter = _colorStringFilter;\n\nvar _media = [],\n    _listeners = {},\n    _emptyArray = [],\n    _lastMediaTime = 0,\n    _dispatch = function _dispatch(type) {\n  return (_listeners[type] || _emptyArray).map(function (f) {\n    return f();\n  });\n},\n    _onMediaChange = function _onMediaChange() {\n  var time = Date.now(),\n      matches = [];\n\n  if (time - _lastMediaTime > 2) {\n    _dispatch(\"matchMediaInit\");\n\n    _media.forEach(function (c) {\n      var queries = c.queries,\n          conditions = c.conditions,\n          match,\n          p,\n          anyMatch,\n          toggled;\n\n      for (p in queries) {\n        match = _win.matchMedia(queries[p]).matches; // Firefox doesn't update the \"matches\" property of the MediaQueryList object correctly - it only does so as it calls its change handler - so we must re-create a media query here to ensure it's accurate.\n\n        match && (anyMatch = 1);\n\n        if (match !== conditions[p]) {\n          conditions[p] = match;\n          toggled = 1;\n        }\n      }\n\n      if (toggled) {\n        c.revert();\n        anyMatch && matches.push(c);\n      }\n    });\n\n    _dispatch(\"matchMediaRevert\");\n\n    matches.forEach(function (c) {\n      return c.onMatch(c);\n    });\n    _lastMediaTime = time;\n\n    _dispatch(\"matchMedia\");\n  }\n};\n\nvar Context = /*#__PURE__*/function () {\n  function Context(func, scope) {\n    this.selector = scope && selector(scope);\n    this.data = [];\n    this._r = []; // returned/cleanup functions\n\n    this.isReverted = false;\n    func && this.add(func);\n  }\n\n  var _proto5 = Context.prototype;\n\n  _proto5.add = function add(name, func, scope) {\n    if (_isFunction(name)) {\n      scope = func;\n      func = name;\n      name = _isFunction;\n    }\n\n    var self = this,\n        f = function f() {\n      var prev = _context,\n          prevSelector = self.selector,\n          result;\n      prev && prev !== self && prev.data.push(self);\n      scope && (self.selector = selector(scope));\n      _context = self;\n      result = func.apply(self, arguments);\n      _isFunction(result) && self._r.push(result);\n      _context = prev;\n      self.selector = prevSelector;\n      self.isReverted = false;\n      return result;\n    };\n\n    self.last = f;\n    return name === _isFunction ? f(self) : name ? self[name] = f : f;\n  };\n\n  _proto5.ignore = function ignore(func) {\n    var prev = _context;\n    _context = null;\n    func(this);\n    _context = prev;\n  };\n\n  _proto5.getTweens = function getTweens() {\n    var a = [];\n    this.data.forEach(function (e) {\n      return e instanceof Context ? a.push.apply(a, e.getTweens()) : e instanceof Tween && a.push(e);\n    });\n    return a;\n  };\n\n  _proto5.clear = function clear() {\n    this._r.length = this.data.length = 0;\n  };\n\n  _proto5.kill = function kill(revert, matchMedia) {\n    var _this4 = this;\n\n    if (revert) {\n      // save as an object so that we can cache the globalTime for each tween to optimize performance during the sort\n      this.getTweens().map(function (t) {\n        return {\n          g: t.globalTime(0),\n          t: t\n        };\n      }).sort(function (a, b) {\n        return b.g - a.g || -1;\n      }).forEach(function (o) {\n        return o.t.revert(revert);\n      }); // note: all of the _startAt tweens should be reverted in reverse order that thy were created, and they'll all have the same globalTime (-1) so the \" || -1\" in the sort keeps the order properly.\n\n      this.data.forEach(function (e) {\n        return !(e instanceof Animation) && e.revert && e.revert(revert);\n      });\n\n      this._r.forEach(function (f) {\n        return f(revert, _this4);\n      });\n\n      this.isReverted = true;\n    } else {\n      this.data.forEach(function (e) {\n        return e.kill && e.kill();\n      });\n    }\n\n    this.clear();\n\n    if (matchMedia) {\n      var i = _media.indexOf(this);\n\n      !!~i && _media.splice(i, 1);\n    }\n  };\n\n  _proto5.revert = function revert(config) {\n    this.kill(config || {});\n  };\n\n  return Context;\n}();\n\nvar MatchMedia = /*#__PURE__*/function () {\n  function MatchMedia(scope) {\n    this.contexts = [];\n    this.scope = scope;\n  }\n\n  var _proto6 = MatchMedia.prototype;\n\n  _proto6.add = function add(conditions, func, scope) {\n    _isObject(conditions) || (conditions = {\n      matches: conditions\n    });\n    var context = new Context(0, scope || this.scope),\n        cond = context.conditions = {},\n        mq,\n        p,\n        active;\n    this.contexts.push(context);\n    func = context.add(\"onMatch\", func);\n    context.queries = conditions;\n\n    for (p in conditions) {\n      if (p === \"all\") {\n        active = 1;\n      } else {\n        mq = _win.matchMedia(conditions[p]);\n\n        if (mq) {\n          _media.indexOf(context) < 0 && _media.push(context);\n          (cond[p] = mq.matches) && (active = 1);\n          mq.addListener ? mq.addListener(_onMediaChange) : mq.addEventListener(\"change\", _onMediaChange);\n        }\n      }\n    }\n\n    active && func(context);\n    return this;\n  } // refresh() {\n  // \tlet time = _lastMediaTime,\n  // \t\tmedia = _media;\n  // \t_lastMediaTime = -1;\n  // \t_media = this.contexts;\n  // \t_onMediaChange();\n  // \t_lastMediaTime = time;\n  // \t_media = media;\n  // }\n  ;\n\n  _proto6.revert = function revert(config) {\n    this.kill(config || {});\n  };\n\n  _proto6.kill = function kill(revert) {\n    this.contexts.forEach(function (c) {\n      return c.kill(revert, true);\n    });\n  };\n\n  return MatchMedia;\n}();\n/*\n * --------------------------------------------------------------------------------------\n * GSAP\n * --------------------------------------------------------------------------------------\n */\n\n\nvar _gsap = {\n  registerPlugin: function registerPlugin() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args.forEach(function (config) {\n      return _createPlugin(config);\n    });\n  },\n  timeline: function timeline(vars) {\n    return new Timeline(vars);\n  },\n  getTweensOf: function getTweensOf(targets, onlyActive) {\n    return _globalTimeline.getTweensOf(targets, onlyActive);\n  },\n  getProperty: function getProperty(target, property, unit, uncache) {\n    _isString(target) && (target = toArray(target)[0]); //in case selector text or an array is passed in\n\n    var getter = _getCache(target || {}).get,\n        format = unit ? _passThrough : _numericIfPossible;\n\n    unit === \"native\" && (unit = \"\");\n    return !target ? target : !property ? function (property, unit, uncache) {\n      return format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));\n    } : format((_plugins[property] && _plugins[property].get || getter)(target, property, unit, uncache));\n  },\n  quickSetter: function quickSetter(target, property, unit) {\n    target = toArray(target);\n\n    if (target.length > 1) {\n      var setters = target.map(function (t) {\n        return gsap.quickSetter(t, property, unit);\n      }),\n          l = setters.length;\n      return function (value) {\n        var i = l;\n\n        while (i--) {\n          setters[i](value);\n        }\n      };\n    }\n\n    target = target[0] || {};\n\n    var Plugin = _plugins[property],\n        cache = _getCache(target),\n        p = cache.harness && (cache.harness.aliases || {})[property] || property,\n        // in case it's an alias, like \"rotate\" for \"rotation\".\n    setter = Plugin ? function (value) {\n      var p = new Plugin();\n      _quickTween._pt = 0;\n      p.init(target, unit ? value + unit : value, _quickTween, 0, [target]);\n      p.render(1, p);\n      _quickTween._pt && _renderPropTweens(1, _quickTween);\n    } : cache.set(target, p);\n\n    return Plugin ? setter : function (value) {\n      return setter(target, p, unit ? value + unit : value, cache, 1);\n    };\n  },\n  quickTo: function quickTo(target, property, vars) {\n    var _merge2;\n\n    var tween = gsap.to(target, _merge((_merge2 = {}, _merge2[property] = \"+=0.1\", _merge2.paused = true, _merge2), vars || {})),\n        func = function func(value, start, startIsRelative) {\n      return tween.resetTo(property, value, start, startIsRelative);\n    };\n\n    func.tween = tween;\n    return func;\n  },\n  isTweening: function isTweening(targets) {\n    return _globalTimeline.getTweensOf(targets, true).length > 0;\n  },\n  defaults: function defaults(value) {\n    value && value.ease && (value.ease = _parseEase(value.ease, _defaults.ease));\n    return _mergeDeep(_defaults, value || {});\n  },\n  config: function config(value) {\n    return _mergeDeep(_config, value || {});\n  },\n  registerEffect: function registerEffect(_ref3) {\n    var name = _ref3.name,\n        effect = _ref3.effect,\n        plugins = _ref3.plugins,\n        defaults = _ref3.defaults,\n        extendTimeline = _ref3.extendTimeline;\n    (plugins || \"\").split(\",\").forEach(function (pluginName) {\n      return pluginName && !_plugins[pluginName] && !_globals[pluginName] && _warn(name + \" effect requires \" + pluginName + \" plugin.\");\n    });\n\n    _effects[name] = function (targets, vars, tl) {\n      return effect(toArray(targets), _setDefaults(vars || {}, defaults), tl);\n    };\n\n    if (extendTimeline) {\n      Timeline.prototype[name] = function (targets, vars, position) {\n        return this.add(_effects[name](targets, _isObject(vars) ? vars : (position = vars) && {}, this), position);\n      };\n    }\n  },\n  registerEase: function registerEase(name, ease) {\n    _easeMap[name] = _parseEase(ease);\n  },\n  parseEase: function parseEase(ease, defaultEase) {\n    return arguments.length ? _parseEase(ease, defaultEase) : _easeMap;\n  },\n  getById: function getById(id) {\n    return _globalTimeline.getById(id);\n  },\n  exportRoot: function exportRoot(vars, includeDelayedCalls) {\n    if (vars === void 0) {\n      vars = {};\n    }\n\n    var tl = new Timeline(vars),\n        child,\n        next;\n    tl.smoothChildTiming = _isNotFalse(vars.smoothChildTiming);\n\n    _globalTimeline.remove(tl);\n\n    tl._dp = 0; //otherwise it'll get re-activated when adding children and be re-introduced into _globalTimeline's linked list (then added to itself).\n\n    tl._time = tl._tTime = _globalTimeline._time;\n    child = _globalTimeline._first;\n\n    while (child) {\n      next = child._next;\n\n      if (includeDelayedCalls || !(!child._dur && child instanceof Tween && child.vars.onComplete === child._targets[0])) {\n        _addToTimeline(tl, child, child._start - child._delay);\n      }\n\n      child = next;\n    }\n\n    _addToTimeline(_globalTimeline, tl, 0);\n\n    return tl;\n  },\n  context: function context(func, scope) {\n    return func ? new Context(func, scope) : _context;\n  },\n  matchMedia: function matchMedia(scope) {\n    return new MatchMedia(scope);\n  },\n  matchMediaRefresh: function matchMediaRefresh() {\n    return _media.forEach(function (c) {\n      var cond = c.conditions,\n          found,\n          p;\n\n      for (p in cond) {\n        if (cond[p]) {\n          cond[p] = false;\n          found = 1;\n        }\n      }\n\n      found && c.revert();\n    }) || _onMediaChange();\n  },\n  addEventListener: function addEventListener(type, callback) {\n    var a = _listeners[type] || (_listeners[type] = []);\n    ~a.indexOf(callback) || a.push(callback);\n  },\n  removeEventListener: function removeEventListener(type, callback) {\n    var a = _listeners[type],\n        i = a && a.indexOf(callback);\n    i >= 0 && a.splice(i, 1);\n  },\n  utils: {\n    wrap: wrap,\n    wrapYoyo: wrapYoyo,\n    distribute: distribute,\n    random: random,\n    snap: snap,\n    normalize: normalize,\n    getUnit: getUnit,\n    clamp: clamp,\n    splitColor: splitColor,\n    toArray: toArray,\n    selector: selector,\n    mapRange: mapRange,\n    pipe: pipe,\n    unitize: unitize,\n    interpolate: interpolate,\n    shuffle: shuffle\n  },\n  install: _install,\n  effects: _effects,\n  ticker: _ticker,\n  updateRoot: Timeline.updateRoot,\n  plugins: _plugins,\n  globalTimeline: _globalTimeline,\n  core: {\n    PropTween: PropTween,\n    globals: _addGlobal,\n    Tween: Tween,\n    Timeline: Timeline,\n    Animation: Animation,\n    getCache: _getCache,\n    _removeLinkedListItem: _removeLinkedListItem,\n    reverting: function reverting() {\n      return _reverting;\n    },\n    context: function context(toAdd) {\n      if (toAdd && _context) {\n        _context.data.push(toAdd);\n\n        toAdd._ctx = _context;\n      }\n\n      return _context;\n    },\n    suppressOverwrites: function suppressOverwrites(value) {\n      return _suppressOverwrites = value;\n    }\n  }\n};\n\n_forEachName(\"to,from,fromTo,delayedCall,set,killTweensOf\", function (name) {\n  return _gsap[name] = Tween[name];\n});\n\n_ticker.add(Timeline.updateRoot);\n\n_quickTween = _gsap.to({}, {\n  duration: 0\n}); // ---- EXTRA PLUGINS --------------------------------------------------------\n\nvar _getPluginPropTween = function _getPluginPropTween(plugin, prop) {\n  var pt = plugin._pt;\n\n  while (pt && pt.p !== prop && pt.op !== prop && pt.fp !== prop) {\n    pt = pt._next;\n  }\n\n  return pt;\n},\n    _addModifiers = function _addModifiers(tween, modifiers) {\n  var targets = tween._targets,\n      p,\n      i,\n      pt;\n\n  for (p in modifiers) {\n    i = targets.length;\n\n    while (i--) {\n      pt = tween._ptLookup[i][p];\n\n      if (pt && (pt = pt.d)) {\n        if (pt._pt) {\n          // is a plugin\n          pt = _getPluginPropTween(pt, p);\n        }\n\n        pt && pt.modifier && pt.modifier(modifiers[p], tween, targets[i], p);\n      }\n    }\n  }\n},\n    _buildModifierPlugin = function _buildModifierPlugin(name, modifier) {\n  return {\n    name: name,\n    rawVars: 1,\n    //don't pre-process function-based values or \"random()\" strings.\n    init: function init(target, vars, tween) {\n      tween._onInit = function (tween) {\n        var temp, p;\n\n        if (_isString(vars)) {\n          temp = {};\n\n          _forEachName(vars, function (name) {\n            return temp[name] = 1;\n          }); //if the user passes in a comma-delimited list of property names to roundProps, like \"x,y\", we round to whole numbers.\n\n\n          vars = temp;\n        }\n\n        if (modifier) {\n          temp = {};\n\n          for (p in vars) {\n            temp[p] = modifier(vars[p]);\n          }\n\n          vars = temp;\n        }\n\n        _addModifiers(tween, vars);\n      };\n    }\n  };\n}; //register core plugins\n\n\nexport var gsap = _gsap.registerPlugin({\n  name: \"attr\",\n  init: function init(target, vars, tween, index, targets) {\n    var p, pt, v;\n    this.tween = tween;\n\n    for (p in vars) {\n      v = target.getAttribute(p) || \"\";\n      pt = this.add(target, \"setAttribute\", (v || 0) + \"\", vars[p], index, targets, 0, 0, p);\n      pt.op = p;\n      pt.b = v; // record the beginning value so we can revert()\n\n      this._props.push(p);\n    }\n  },\n  render: function render(ratio, data) {\n    var pt = data._pt;\n\n    while (pt) {\n      _reverting ? pt.set(pt.t, pt.p, pt.b, pt) : pt.r(ratio, pt.d); // if reverting, go back to the original (pt.b)\n\n      pt = pt._next;\n    }\n  }\n}, {\n  name: \"endArray\",\n  init: function init(target, value) {\n    var i = value.length;\n\n    while (i--) {\n      this.add(target, i, target[i] || 0, value[i], 0, 0, 0, 0, 0, 1);\n    }\n  }\n}, _buildModifierPlugin(\"roundProps\", _roundModifier), _buildModifierPlugin(\"modifiers\"), _buildModifierPlugin(\"snap\", snap)) || _gsap; //to prevent the core plugins from being dropped via aggressive tree shaking, we must include them in the variable declaration in this way.\n\nTween.version = Timeline.version = gsap.version = \"3.11.1\";\n_coreReady = 1;\n_windowExists() && _wake();\nvar Power0 = _easeMap.Power0,\n    Power1 = _easeMap.Power1,\n    Power2 = _easeMap.Power2,\n    Power3 = _easeMap.Power3,\n    Power4 = _easeMap.Power4,\n    Linear = _easeMap.Linear,\n    Quad = _easeMap.Quad,\n    Cubic = _easeMap.Cubic,\n    Quart = _easeMap.Quart,\n    Quint = _easeMap.Quint,\n    Strong = _easeMap.Strong,\n    Elastic = _easeMap.Elastic,\n    Back = _easeMap.Back,\n    SteppedEase = _easeMap.SteppedEase,\n    Bounce = _easeMap.Bounce,\n    Sine = _easeMap.Sine,\n    Expo = _easeMap.Expo,\n    Circ = _easeMap.Circ;\nexport { Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ };\nexport { Tween as TweenMax, Tween as TweenLite, Timeline as TimelineMax, Timeline as TimelineLite, gsap as default, wrap, wrapYoyo, distribute, random, snap, normalize, getUnit, clamp, splitColor, toArray, selector, mapRange, pipe, unitize, interpolate, shuffle }; //export some internal methods/orojects for use in CSSPlugin so that we can externalize that file and allow custom builds that exclude it.\n\nexport { _getProperty, _numExp, _numWithUnitExp, _isString, _isUndefined, _renderComplexString, _relExp, _setDefaults, _removeLinkedListItem, _forEachName, _sortPropTweensByPriority, _colorStringFilter, _replaceRandom, _checkPlugin, _plugins, _ticker, _config, _roundModifier, _round, _missingPlugin, _getSetter, _getCache, _colorExp, _parseRelative };","/*!\n * CSSPlugin 3.11.1\n * https://greensock.com\n *\n * Copyright 2008-2022, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { gsap, _getProperty, _numExp, _numWithUnitExp, getUnit, _isString, _isUndefined, _renderComplexString, _relExp, _forEachName, _sortPropTweensByPriority, _colorStringFilter, _checkPlugin, _replaceRandom, _plugins, GSCache, PropTween, _config, _ticker, _round, _missingPlugin, _getSetter, _getCache, _colorExp, _parseRelative, _setDefaults, _removeLinkedListItem //for the commented-out className feature.\n} from \"./gsap-core.js\";\n\nvar _win,\n    _doc,\n    _docElement,\n    _pluginInitted,\n    _tempDiv,\n    _tempDivStyler,\n    _recentSetterPlugin,\n    _reverting,\n    _windowExists = function _windowExists() {\n  return typeof window !== \"undefined\";\n},\n    _transformProps = {},\n    _RAD2DEG = 180 / Math.PI,\n    _DEG2RAD = Math.PI / 180,\n    _atan2 = Math.atan2,\n    _bigNum = 1e8,\n    _capsExp = /([A-Z])/g,\n    _horizontalExp = /(left|right|width|margin|padding|x)/i,\n    _complexExp = /[\\s,\\(]\\S/,\n    _propertyAliases = {\n  autoAlpha: \"opacity,visibility\",\n  scale: \"scaleX,scaleY\",\n  alpha: \"opacity\"\n},\n    _renderCSSProp = function _renderCSSProp(ratio, data) {\n  return data.set(data.t, data.p, Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderPropWithEnd = function _renderPropWithEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio === 1 ? data.e : Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u, data);\n},\n    _renderCSSPropWithBeginning = function _renderCSSPropWithBeginning(ratio, data) {\n  return data.set(data.t, data.p, ratio ? Math.round((data.s + data.c * ratio) * 10000) / 10000 + data.u : data.b, data);\n},\n    //if units change, we need a way to render the original unit/value when the tween goes all the way back to the beginning (ratio:0)\n_renderRoundedCSSProp = function _renderRoundedCSSProp(ratio, data) {\n  var value = data.s + data.c * ratio;\n  data.set(data.t, data.p, ~~(value + (value < 0 ? -.5 : .5)) + data.u, data);\n},\n    _renderNonTweeningValue = function _renderNonTweeningValue(ratio, data) {\n  return data.set(data.t, data.p, ratio ? data.e : data.b, data);\n},\n    _renderNonTweeningValueOnlyAtEnd = function _renderNonTweeningValueOnlyAtEnd(ratio, data) {\n  return data.set(data.t, data.p, ratio !== 1 ? data.b : data.e, data);\n},\n    _setterCSSStyle = function _setterCSSStyle(target, property, value) {\n  return target.style[property] = value;\n},\n    _setterCSSProp = function _setterCSSProp(target, property, value) {\n  return target.style.setProperty(property, value);\n},\n    _setterTransform = function _setterTransform(target, property, value) {\n  return target._gsap[property] = value;\n},\n    _setterScale = function _setterScale(target, property, value) {\n  return target._gsap.scaleX = target._gsap.scaleY = value;\n},\n    _setterScaleWithRender = function _setterScaleWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache.scaleX = cache.scaleY = value;\n  cache.renderTransform(ratio, cache);\n},\n    _setterTransformWithRender = function _setterTransformWithRender(target, property, value, data, ratio) {\n  var cache = target._gsap;\n  cache[property] = value;\n  cache.renderTransform(ratio, cache);\n},\n    _transformProp = \"transform\",\n    _transformOriginProp = _transformProp + \"Origin\",\n    _saveStyle = function _saveStyle(property) {\n  var _this = this;\n\n  var target = this.target,\n      style = target.style;\n\n  if (property in _transformProps) {\n    this.tfm = this.tfm || {};\n\n    if (property !== \"transform\") {\n      property = _propertyAliases[property] || property;\n      ~property.indexOf(\",\") ? property.split(\",\").forEach(function (a) {\n        return _this.tfm[a] = _get(target, a);\n      }) : this.tfm[property] = target._gsap.x ? target._gsap[property] : _get(target, property); // note: scale would map to \"scaleX,scaleY\", thus we loop and apply them both.\n    }\n\n    if (this.props.indexOf(_transformProp) >= 0) {\n      return;\n    }\n\n    if (target._gsap.svg) {\n      this.svgo = target.getAttribute(\"data-svg-origin\");\n      this.props.push(_transformOriginProp, \"\");\n    }\n\n    property = _transformProp;\n  }\n\n  style && this.props.push(property, style[property]);\n},\n    _removeIndependentTransforms = function _removeIndependentTransforms(style) {\n  if (style.translate) {\n    style.removeProperty(\"translate\");\n    style.removeProperty(\"scale\");\n    style.removeProperty(\"rotate\");\n  }\n},\n    _revertStyle = function _revertStyle() {\n  var props = this.props,\n      target = this.target,\n      style = target.style,\n      cache = target._gsap,\n      i,\n      p;\n\n  for (i = 0; i < props.length; i += 2) {\n    props[i + 1] ? style[props[i]] = props[i + 1] : style.removeProperty(props[i].replace(_capsExp, \"-$1\").toLowerCase());\n  }\n\n  if (this.tfm) {\n    for (p in this.tfm) {\n      cache[p] = this.tfm[p];\n    }\n\n    if (cache.svg) {\n      cache.renderTransform();\n      target.setAttribute(\"data-svg-origin\", this.svgo || \"\");\n    }\n\n    i = _reverting();\n\n    if (i && !i.isStart && !style[_transformProp]) {\n      _removeIndependentTransforms(style);\n\n      cache.uncache = 1; // if it's a startAt that's being reverted in the _initTween() of the core, we don't need to uncache transforms. This is purely a performance optimization.\n    }\n  }\n},\n    _getStyleSaver = function _getStyleSaver(target, properties) {\n  var saver = {\n    target: target,\n    props: [],\n    revert: _revertStyle,\n    save: _saveStyle\n  };\n  properties && properties.split(\",\").forEach(function (p) {\n    return saver.save(p);\n  });\n  return saver;\n},\n    _supports3D,\n    _createElement = function _createElement(type, ns) {\n  var e = _doc.createElementNS ? _doc.createElementNS((ns || \"http://www.w3.org/1999/xhtml\").replace(/^https/, \"http\"), type) : _doc.createElement(type); //some servers swap in https for http in the namespace which can break things, making \"style\" inaccessible.\n\n  return e.style ? e : _doc.createElement(type); //some environments won't allow access to the element's style when created with a namespace in which case we default to the standard createElement() to work around the issue. Also note that when GSAP is embedded directly inside an SVG file, createElement() won't allow access to the style object in Firefox (see https://greensock.com/forums/topic/20215-problem-using-tweenmax-in-standalone-self-containing-svg-file-err-cannot-set-property-csstext-of-undefined/).\n},\n    _getComputedProperty = function _getComputedProperty(target, property, skipPrefixFallback) {\n  var cs = getComputedStyle(target);\n  return cs[property] || cs.getPropertyValue(property.replace(_capsExp, \"-$1\").toLowerCase()) || cs.getPropertyValue(property) || !skipPrefixFallback && _getComputedProperty(target, _checkPropPrefix(property) || property, 1) || \"\"; //css variables may not need caps swapped out for dashes and lowercase.\n},\n    _prefixes = \"O,Moz,ms,Ms,Webkit\".split(\",\"),\n    _checkPropPrefix = function _checkPropPrefix(property, element, preferPrefix) {\n  var e = element || _tempDiv,\n      s = e.style,\n      i = 5;\n\n  if (property in s && !preferPrefix) {\n    return property;\n  }\n\n  property = property.charAt(0).toUpperCase() + property.substr(1);\n\n  while (i-- && !(_prefixes[i] + property in s)) {}\n\n  return i < 0 ? null : (i === 3 ? \"ms\" : i >= 0 ? _prefixes[i] : \"\") + property;\n},\n    _initCore = function _initCore() {\n  if (_windowExists() && window.document) {\n    _win = window;\n    _doc = _win.document;\n    _docElement = _doc.documentElement;\n    _tempDiv = _createElement(\"div\") || {\n      style: {}\n    };\n    _tempDivStyler = _createElement(\"div\");\n    _transformProp = _checkPropPrefix(_transformProp);\n    _transformOriginProp = _transformProp + \"Origin\";\n    _tempDiv.style.cssText = \"border-width:0;line-height:0;position:absolute;padding:0\"; //make sure to override certain properties that may contaminate measurements, in case the user has overreaching style sheets.\n\n    _supports3D = !!_checkPropPrefix(\"perspective\");\n    _reverting = gsap.core.reverting;\n    _pluginInitted = 1;\n  }\n},\n    _getBBoxHack = function _getBBoxHack(swapIfPossible) {\n  //works around issues in some browsers (like Firefox) that don't correctly report getBBox() on SVG elements inside a <defs> element and/or <mask>. We try creating an SVG, adding it to the documentElement and toss the element in there so that it's definitely part of the rendering tree, then grab the bbox and if it works, we actually swap out the original getBBox() method for our own that does these extra steps whenever getBBox is needed. This helps ensure that performance is optimal (only do all these extra steps when absolutely necessary...most elements don't need it).\n  var svg = _createElement(\"svg\", this.ownerSVGElement && this.ownerSVGElement.getAttribute(\"xmlns\") || \"http://www.w3.org/2000/svg\"),\n      oldParent = this.parentNode,\n      oldSibling = this.nextSibling,\n      oldCSS = this.style.cssText,\n      bbox;\n\n  _docElement.appendChild(svg);\n\n  svg.appendChild(this);\n  this.style.display = \"block\";\n\n  if (swapIfPossible) {\n    try {\n      bbox = this.getBBox();\n      this._gsapBBox = this.getBBox; //store the original\n\n      this.getBBox = _getBBoxHack;\n    } catch (e) {}\n  } else if (this._gsapBBox) {\n    bbox = this._gsapBBox();\n  }\n\n  if (oldParent) {\n    if (oldSibling) {\n      oldParent.insertBefore(this, oldSibling);\n    } else {\n      oldParent.appendChild(this);\n    }\n  }\n\n  _docElement.removeChild(svg);\n\n  this.style.cssText = oldCSS;\n  return bbox;\n},\n    _getAttributeFallbacks = function _getAttributeFallbacks(target, attributesArray) {\n  var i = attributesArray.length;\n\n  while (i--) {\n    if (target.hasAttribute(attributesArray[i])) {\n      return target.getAttribute(attributesArray[i]);\n    }\n  }\n},\n    _getBBox = function _getBBox(target) {\n  var bounds;\n\n  try {\n    bounds = target.getBBox(); //Firefox throws errors if you try calling getBBox() on an SVG element that's not rendered (like in a <symbol> or <defs>). https://bugzilla.mozilla.org/show_bug.cgi?id=612118\n  } catch (error) {\n    bounds = _getBBoxHack.call(target, true);\n  }\n\n  bounds && (bounds.width || bounds.height) || target.getBBox === _getBBoxHack || (bounds = _getBBoxHack.call(target, true)); //some browsers (like Firefox) misreport the bounds if the element has zero width and height (it just assumes it's at x:0, y:0), thus we need to manually grab the position in that case.\n\n  return bounds && !bounds.width && !bounds.x && !bounds.y ? {\n    x: +_getAttributeFallbacks(target, [\"x\", \"cx\", \"x1\"]) || 0,\n    y: +_getAttributeFallbacks(target, [\"y\", \"cy\", \"y1\"]) || 0,\n    width: 0,\n    height: 0\n  } : bounds;\n},\n    _isSVG = function _isSVG(e) {\n  return !!(e.getCTM && (!e.parentNode || e.ownerSVGElement) && _getBBox(e));\n},\n    //reports if the element is an SVG on which getBBox() actually works\n_removeProperty = function _removeProperty(target, property) {\n  if (property) {\n    var style = target.style;\n\n    if (property in _transformProps && property !== _transformOriginProp) {\n      property = _transformProp;\n    }\n\n    if (style.removeProperty) {\n      if (property.substr(0, 2) === \"ms\" || property.substr(0, 6) === \"webkit\") {\n        //Microsoft and some Webkit browsers don't conform to the standard of capitalizing the first prefix character, so we adjust so that when we prefix the caps with a dash, it's correct (otherwise it'd be \"ms-transform\" instead of \"-ms-transform\" for IE9, for example)\n        property = \"-\" + property;\n      }\n\n      style.removeProperty(property.replace(_capsExp, \"-$1\").toLowerCase());\n    } else {\n      //note: old versions of IE use \"removeAttribute()\" instead of \"removeProperty()\"\n      style.removeAttribute(property);\n    }\n  }\n},\n    _addNonTweeningPT = function _addNonTweeningPT(plugin, target, property, beginning, end, onlySetAtEnd) {\n  var pt = new PropTween(plugin._pt, target, property, 0, 1, onlySetAtEnd ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue);\n  plugin._pt = pt;\n  pt.b = beginning;\n  pt.e = end;\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _nonConvertibleUnits = {\n  deg: 1,\n  rad: 1,\n  turn: 1\n},\n    _nonStandardLayouts = {\n  grid: 1,\n  flex: 1\n},\n    //takes a single value like 20px and converts it to the unit specified, like \"%\", returning only the numeric amount.\n_convertToUnit = function _convertToUnit(target, property, value, unit) {\n  var curValue = parseFloat(value) || 0,\n      curUnit = (value + \"\").trim().substr((curValue + \"\").length) || \"px\",\n      // some browsers leave extra whitespace at the beginning of CSS variables, hence the need to trim()\n  style = _tempDiv.style,\n      horizontal = _horizontalExp.test(property),\n      isRootSVG = target.tagName.toLowerCase() === \"svg\",\n      measureProperty = (isRootSVG ? \"client\" : \"offset\") + (horizontal ? \"Width\" : \"Height\"),\n      amount = 100,\n      toPixels = unit === \"px\",\n      toPercent = unit === \"%\",\n      px,\n      parent,\n      cache,\n      isSVG;\n\n  if (unit === curUnit || !curValue || _nonConvertibleUnits[unit] || _nonConvertibleUnits[curUnit]) {\n    return curValue;\n  }\n\n  curUnit !== \"px\" && !toPixels && (curValue = _convertToUnit(target, property, value, \"px\"));\n  isSVG = target.getCTM && _isSVG(target);\n\n  if ((toPercent || curUnit === \"%\") && (_transformProps[property] || ~property.indexOf(\"adius\"))) {\n    px = isSVG ? target.getBBox()[horizontal ? \"width\" : \"height\"] : target[measureProperty];\n    return _round(toPercent ? curValue / px * amount : curValue / 100 * px);\n  }\n\n  style[horizontal ? \"width\" : \"height\"] = amount + (toPixels ? curUnit : unit);\n  parent = ~property.indexOf(\"adius\") || unit === \"em\" && target.appendChild && !isRootSVG ? target : target.parentNode;\n\n  if (isSVG) {\n    parent = (target.ownerSVGElement || {}).parentNode;\n  }\n\n  if (!parent || parent === _doc || !parent.appendChild) {\n    parent = _doc.body;\n  }\n\n  cache = parent._gsap;\n\n  if (cache && toPercent && cache.width && horizontal && cache.time === _ticker.time && !cache.uncache) {\n    return _round(curValue / cache.width * amount);\n  } else {\n    (toPercent || curUnit === \"%\") && !_nonStandardLayouts[_getComputedProperty(parent, \"display\")] && (style.position = _getComputedProperty(target, \"position\"));\n    parent === target && (style.position = \"static\"); // like for borderRadius, if it's a % we must have it relative to the target itself but that may not have position: relative or position: absolute in which case it'd go up the chain until it finds its offsetParent (bad). position: static protects against that.\n\n    parent.appendChild(_tempDiv);\n    px = _tempDiv[measureProperty];\n    parent.removeChild(_tempDiv);\n    style.position = \"absolute\";\n\n    if (horizontal && toPercent) {\n      cache = _getCache(parent);\n      cache.time = _ticker.time;\n      cache.width = parent[measureProperty];\n    }\n  }\n\n  return _round(toPixels ? px * curValue / amount : px && curValue ? amount / px * curValue : 0);\n},\n    _get = function _get(target, property, unit, uncache) {\n  var value;\n  _pluginInitted || _initCore();\n\n  if (property in _propertyAliases && property !== \"transform\") {\n    property = _propertyAliases[property];\n\n    if (~property.indexOf(\",\")) {\n      property = property.split(\",\")[0];\n    }\n  }\n\n  if (_transformProps[property] && property !== \"transform\") {\n    value = _parseTransform(target, uncache);\n    value = property !== \"transformOrigin\" ? value[property] : value.svg ? value.origin : _firstTwoOnly(_getComputedProperty(target, _transformOriginProp)) + \" \" + value.zOrigin + \"px\";\n  } else {\n    value = target.style[property];\n\n    if (!value || value === \"auto\" || uncache || ~(value + \"\").indexOf(\"calc(\")) {\n      value = _specialProps[property] && _specialProps[property](target, property, unit) || _getComputedProperty(target, property) || _getProperty(target, property) || (property === \"opacity\" ? 1 : 0); // note: some browsers, like Firefox, don't report borderRadius correctly! Instead, it only reports every corner like  borderTopLeftRadius\n    }\n  }\n\n  return unit && !~(value + \"\").trim().indexOf(\" \") ? _convertToUnit(target, property, value, unit) + unit : value;\n},\n    _tweenComplexCSSString = function _tweenComplexCSSString(target, prop, start, end) {\n  // note: we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within a plugin too, thus \"this\" would refer to the plugin.\n  if (!start || start === \"none\") {\n    // some browsers like Safari actually PREFER the prefixed property and mis-report the unprefixed value like clipPath (BUG). In other words, even though clipPath exists in the style (\"clipPath\" in target.style) and it's set in the CSS properly (along with -webkit-clip-path), Safari reports clipPath as \"none\" whereas WebkitClipPath reports accurately like \"ellipse(100% 0% at 50% 0%)\", so in this case we must SWITCH to using the prefixed property instead. See https://greensock.com/forums/topic/18310-clippath-doesnt-work-on-ios/\n    var p = _checkPropPrefix(prop, target, 1),\n        s = p && _getComputedProperty(target, p, 1);\n\n    if (s && s !== start) {\n      prop = p;\n      start = s;\n    } else if (prop === \"borderColor\") {\n      start = _getComputedProperty(target, \"borderTopColor\"); // Firefox bug: always reports \"borderColor\" as \"\", so we must fall back to borderTopColor. See https://greensock.com/forums/topic/24583-how-to-return-colors-that-i-had-after-reverse/\n    }\n  }\n\n  var pt = new PropTween(this._pt, target.style, prop, 0, 1, _renderComplexString),\n      index = 0,\n      matchIndex = 0,\n      a,\n      result,\n      startValues,\n      startNum,\n      color,\n      startValue,\n      endValue,\n      endNum,\n      chunk,\n      endUnit,\n      startUnit,\n      endValues;\n  pt.b = start;\n  pt.e = end;\n  start += \"\"; // ensure values are strings\n\n  end += \"\";\n\n  if (end === \"auto\") {\n    target.style[prop] = end;\n    end = _getComputedProperty(target, prop) || end;\n    target.style[prop] = start;\n  }\n\n  a = [start, end];\n\n  _colorStringFilter(a); // pass an array with the starting and ending values and let the filter do whatever it needs to the values. If colors are found, it returns true and then we must match where the color shows up order-wise because for things like boxShadow, sometimes the browser provides the computed values with the color FIRST, but the user provides it with the color LAST, so flip them if necessary. Same for drop-shadow().\n\n\n  start = a[0];\n  end = a[1];\n  startValues = start.match(_numWithUnitExp) || [];\n  endValues = end.match(_numWithUnitExp) || [];\n\n  if (endValues.length) {\n    while (result = _numWithUnitExp.exec(end)) {\n      endValue = result[0];\n      chunk = end.substring(index, result.index);\n\n      if (color) {\n        color = (color + 1) % 5;\n      } else if (chunk.substr(-5) === \"rgba(\" || chunk.substr(-5) === \"hsla(\") {\n        color = 1;\n      }\n\n      if (endValue !== (startValue = startValues[matchIndex++] || \"\")) {\n        startNum = parseFloat(startValue) || 0;\n        startUnit = startValue.substr((startNum + \"\").length);\n        endValue.charAt(1) === \"=\" && (endValue = _parseRelative(startNum, endValue) + startUnit);\n        endNum = parseFloat(endValue);\n        endUnit = endValue.substr((endNum + \"\").length);\n        index = _numWithUnitExp.lastIndex - endUnit.length;\n\n        if (!endUnit) {\n          //if something like \"perspective:300\" is passed in and we must add a unit to the end\n          endUnit = endUnit || _config.units[prop] || startUnit;\n\n          if (index === end.length) {\n            end += endUnit;\n            pt.e += endUnit;\n          }\n        }\n\n        if (startUnit !== endUnit) {\n          startNum = _convertToUnit(target, prop, startValue, endUnit) || 0;\n        } // these nested PropTweens are handled in a special way - we'll never actually call a render or setter method on them. We'll just loop through them in the parent complex string PropTween's render method.\n\n\n        pt._pt = {\n          _next: pt._pt,\n          p: chunk || matchIndex === 1 ? chunk : \",\",\n          //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.\n          s: startNum,\n          c: endNum - startNum,\n          m: color && color < 4 || prop === \"zIndex\" ? Math.round : 0\n        };\n      }\n    }\n\n    pt.c = index < end.length ? end.substring(index, end.length) : \"\"; //we use the \"c\" of the PropTween to store the final part of the string (after the last number)\n  } else {\n    pt.r = prop === \"display\" && end === \"none\" ? _renderNonTweeningValueOnlyAtEnd : _renderNonTweeningValue;\n  }\n\n  _relExp.test(end) && (pt.e = 0); //if the end string contains relative values or dynamic random(...) values, delete the end it so that on the final render we don't actually set it to the string with += or -= characters (forces it to use the calculated value).\n\n  this._pt = pt; //start the linked list with this new PropTween. Remember, we call _tweenComplexCSSString.call(pluginInstance...) to ensure that it's scoped properly. We may call it from within another plugin too, thus \"this\" would refer to the plugin.\n\n  return pt;\n},\n    _keywordToPercent = {\n  top: \"0%\",\n  bottom: \"100%\",\n  left: \"0%\",\n  right: \"100%\",\n  center: \"50%\"\n},\n    _convertKeywordsToPercentages = function _convertKeywordsToPercentages(value) {\n  var split = value.split(\" \"),\n      x = split[0],\n      y = split[1] || \"50%\";\n\n  if (x === \"top\" || x === \"bottom\" || y === \"left\" || y === \"right\") {\n    //the user provided them in the wrong order, so flip them\n    value = x;\n    x = y;\n    y = value;\n  }\n\n  split[0] = _keywordToPercent[x] || x;\n  split[1] = _keywordToPercent[y] || y;\n  return split.join(\" \");\n},\n    _renderClearProps = function _renderClearProps(ratio, data) {\n  if (data.tween && data.tween._time === data.tween._dur) {\n    var target = data.t,\n        style = target.style,\n        props = data.u,\n        cache = target._gsap,\n        prop,\n        clearTransforms,\n        i;\n\n    if (props === \"all\" || props === true) {\n      style.cssText = \"\";\n      clearTransforms = 1;\n    } else {\n      props = props.split(\",\");\n      i = props.length;\n\n      while (--i > -1) {\n        prop = props[i];\n\n        if (_transformProps[prop]) {\n          clearTransforms = 1;\n          prop = prop === \"transformOrigin\" ? _transformOriginProp : _transformProp;\n        }\n\n        _removeProperty(target, prop);\n      }\n    }\n\n    if (clearTransforms) {\n      _removeProperty(target, _transformProp);\n\n      if (cache) {\n        cache.svg && target.removeAttribute(\"transform\");\n\n        _parseTransform(target, 1); // force all the cached values back to \"normal\"/identity, otherwise if there's another tween that's already set to render transforms on this element, it could display the wrong values.\n\n\n        cache.uncache = 1;\n\n        _removeIndependentTransforms(style);\n      }\n    }\n  }\n},\n    // note: specialProps should return 1 if (and only if) they have a non-zero priority. It indicates we need to sort the linked list.\n_specialProps = {\n  clearProps: function clearProps(plugin, target, property, endValue, tween) {\n    if (tween.data !== \"isFromStart\") {\n      var pt = plugin._pt = new PropTween(plugin._pt, target, property, 0, 0, _renderClearProps);\n      pt.u = endValue;\n      pt.pr = -10;\n      pt.tween = tween;\n\n      plugin._props.push(property);\n\n      return 1;\n    }\n  }\n  /* className feature (about 0.4kb gzipped).\n  , className(plugin, target, property, endValue, tween) {\n  \tlet _renderClassName = (ratio, data) => {\n  \t\t\tdata.css.render(ratio, data.css);\n  \t\t\tif (!ratio || ratio === 1) {\n  \t\t\t\tlet inline = data.rmv,\n  \t\t\t\t\ttarget = data.t,\n  \t\t\t\t\tp;\n  \t\t\t\ttarget.setAttribute(\"class\", ratio ? data.e : data.b);\n  \t\t\t\tfor (p in inline) {\n  \t\t\t\t\t_removeProperty(target, p);\n  \t\t\t\t}\n  \t\t\t}\n  \t\t},\n  \t\t_getAllStyles = (target) => {\n  \t\t\tlet styles = {},\n  \t\t\t\tcomputed = getComputedStyle(target),\n  \t\t\t\tp;\n  \t\t\tfor (p in computed) {\n  \t\t\t\tif (isNaN(p) && p !== \"cssText\" && p !== \"length\") {\n  \t\t\t\t\tstyles[p] = computed[p];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t\t_setDefaults(styles, _parseTransform(target, 1));\n  \t\t\treturn styles;\n  \t\t},\n  \t\tstartClassList = target.getAttribute(\"class\"),\n  \t\tstyle = target.style,\n  \t\tcssText = style.cssText,\n  \t\tcache = target._gsap,\n  \t\tclassPT = cache.classPT,\n  \t\tinlineToRemoveAtEnd = {},\n  \t\tdata = {t:target, plugin:plugin, rmv:inlineToRemoveAtEnd, b:startClassList, e:(endValue.charAt(1) !== \"=\") ? endValue : startClassList.replace(new RegExp(\"(?:\\\\s|^)\" + endValue.substr(2) + \"(?![\\\\w-])\"), \"\") + ((endValue.charAt(0) === \"+\") ? \" \" + endValue.substr(2) : \"\")},\n  \t\tchangingVars = {},\n  \t\tstartVars = _getAllStyles(target),\n  \t\ttransformRelated = /(transform|perspective)/i,\n  \t\tendVars, p;\n  \tif (classPT) {\n  \t\tclassPT.r(1, classPT.d);\n  \t\t_removeLinkedListItem(classPT.d.plugin, classPT, \"_pt\");\n  \t}\n  \ttarget.setAttribute(\"class\", data.e);\n  \tendVars = _getAllStyles(target, true);\n  \ttarget.setAttribute(\"class\", startClassList);\n  \tfor (p in endVars) {\n  \t\tif (endVars[p] !== startVars[p] && !transformRelated.test(p)) {\n  \t\t\tchangingVars[p] = endVars[p];\n  \t\t\tif (!style[p] && style[p] !== \"0\") {\n  \t\t\t\tinlineToRemoveAtEnd[p] = 1;\n  \t\t\t}\n  \t\t}\n  \t}\n  \tcache.classPT = plugin._pt = new PropTween(plugin._pt, target, \"className\", 0, 0, _renderClassName, data, 0, -11);\n  \tif (style.cssText !== cssText) { //only apply if things change. Otherwise, in cases like a background-image that's pulled dynamically, it could cause a refresh. See https://greensock.com/forums/topic/20368-possible-gsap-bug-switching-classnames-in-chrome/.\n  \t\tstyle.cssText = cssText; //we recorded cssText before we swapped classes and ran _getAllStyles() because in cases when a className tween is overwritten, we remove all the related tweening properties from that class change (otherwise class-specific stuff can't override properties we've directly set on the target's style object due to specificity).\n  \t}\n  \t_parseTransform(target, true); //to clear the caching of transforms\n  \tdata.css = new gsap.plugins.css();\n  \tdata.css.init(target, changingVars, tween);\n  \tplugin._props.push(...data.css._props);\n  \treturn 1;\n  }\n  */\n\n},\n\n/*\n * --------------------------------------------------------------------------------------\n * TRANSFORMS\n * --------------------------------------------------------------------------------------\n */\n_identity2DMatrix = [1, 0, 0, 1, 0, 0],\n    _rotationalProperties = {},\n    _isNullTransform = function _isNullTransform(value) {\n  return value === \"matrix(1, 0, 0, 1, 0, 0)\" || value === \"none\" || !value;\n},\n    _getComputedTransformMatrixAsArray = function _getComputedTransformMatrixAsArray(target) {\n  var matrixString = _getComputedProperty(target, _transformProp);\n\n  return _isNullTransform(matrixString) ? _identity2DMatrix : matrixString.substr(7).match(_numExp).map(_round);\n},\n    _getMatrix = function _getMatrix(target, force2D) {\n  var cache = target._gsap || _getCache(target),\n      style = target.style,\n      matrix = _getComputedTransformMatrixAsArray(target),\n      parent,\n      nextSibling,\n      temp,\n      addedToDOM;\n\n  if (cache.svg && target.getAttribute(\"transform\")) {\n    temp = target.transform.baseVal.consolidate().matrix; //ensures that even complex values like \"translate(50,60) rotate(135,0,0)\" are parsed because it mashes it into a matrix.\n\n    matrix = [temp.a, temp.b, temp.c, temp.d, temp.e, temp.f];\n    return matrix.join(\",\") === \"1,0,0,1,0,0\" ? _identity2DMatrix : matrix;\n  } else if (matrix === _identity2DMatrix && !target.offsetParent && target !== _docElement && !cache.svg) {\n    //note: if offsetParent is null, that means the element isn't in the normal document flow, like if it has display:none or one of its ancestors has display:none). Firefox returns null for getComputedStyle() if the element is in an iframe that has display:none. https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    //browsers don't report transforms accurately unless the element is in the DOM and has a display value that's not \"none\". Firefox and Microsoft browsers have a partial bug where they'll report transforms even if display:none BUT not any percentage-based values like translate(-50%, 8px) will be reported as if it's translate(0, 8px).\n    temp = style.display;\n    style.display = \"block\";\n    parent = target.parentNode;\n\n    if (!parent || !target.offsetParent) {\n      // note: in 3.3.0 we switched target.offsetParent to _doc.body.contains(target) to avoid [sometimes unnecessary] MutationObserver calls but that wasn't adequate because there are edge cases where nested position: fixed elements need to get reparented to accurately sense transforms. See https://github.com/greensock/GSAP/issues/388 and https://github.com/greensock/GSAP/issues/375\n      addedToDOM = 1; //flag\n\n      nextSibling = target.nextElementSibling;\n\n      _docElement.appendChild(target); //we must add it to the DOM in order to get values properly\n\n    }\n\n    matrix = _getComputedTransformMatrixAsArray(target);\n    temp ? style.display = temp : _removeProperty(target, \"display\");\n\n    if (addedToDOM) {\n      nextSibling ? parent.insertBefore(target, nextSibling) : parent ? parent.appendChild(target) : _docElement.removeChild(target);\n    }\n  }\n\n  return force2D && matrix.length > 6 ? [matrix[0], matrix[1], matrix[4], matrix[5], matrix[12], matrix[13]] : matrix;\n},\n    _applySVGOrigin = function _applySVGOrigin(target, origin, originIsAbsolute, smooth, matrixArray, pluginToAddPropTweensTo) {\n  var cache = target._gsap,\n      matrix = matrixArray || _getMatrix(target, true),\n      xOriginOld = cache.xOrigin || 0,\n      yOriginOld = cache.yOrigin || 0,\n      xOffsetOld = cache.xOffset || 0,\n      yOffsetOld = cache.yOffset || 0,\n      a = matrix[0],\n      b = matrix[1],\n      c = matrix[2],\n      d = matrix[3],\n      tx = matrix[4],\n      ty = matrix[5],\n      originSplit = origin.split(\" \"),\n      xOrigin = parseFloat(originSplit[0]) || 0,\n      yOrigin = parseFloat(originSplit[1]) || 0,\n      bounds,\n      determinant,\n      x,\n      y;\n\n  if (!originIsAbsolute) {\n    bounds = _getBBox(target);\n    xOrigin = bounds.x + (~originSplit[0].indexOf(\"%\") ? xOrigin / 100 * bounds.width : xOrigin);\n    yOrigin = bounds.y + (~(originSplit[1] || originSplit[0]).indexOf(\"%\") ? yOrigin / 100 * bounds.height : yOrigin);\n  } else if (matrix !== _identity2DMatrix && (determinant = a * d - b * c)) {\n    //if it's zero (like if scaleX and scaleY are zero), skip it to avoid errors with dividing by zero.\n    x = xOrigin * (d / determinant) + yOrigin * (-c / determinant) + (c * ty - d * tx) / determinant;\n    y = xOrigin * (-b / determinant) + yOrigin * (a / determinant) - (a * ty - b * tx) / determinant;\n    xOrigin = x;\n    yOrigin = y;\n  }\n\n  if (smooth || smooth !== false && cache.smooth) {\n    tx = xOrigin - xOriginOld;\n    ty = yOrigin - yOriginOld;\n    cache.xOffset = xOffsetOld + (tx * a + ty * c) - tx;\n    cache.yOffset = yOffsetOld + (tx * b + ty * d) - ty;\n  } else {\n    cache.xOffset = cache.yOffset = 0;\n  }\n\n  cache.xOrigin = xOrigin;\n  cache.yOrigin = yOrigin;\n  cache.smooth = !!smooth;\n  cache.origin = origin;\n  cache.originIsAbsolute = !!originIsAbsolute;\n  target.style[_transformOriginProp] = \"0px 0px\"; //otherwise, if someone sets  an origin via CSS, it will likely interfere with the SVG transform attribute ones (because remember, we're baking the origin into the matrix() value).\n\n  if (pluginToAddPropTweensTo) {\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOrigin\", xOriginOld, xOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOrigin\", yOriginOld, yOrigin);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"xOffset\", xOffsetOld, cache.xOffset);\n\n    _addNonTweeningPT(pluginToAddPropTweensTo, cache, \"yOffset\", yOffsetOld, cache.yOffset);\n  }\n\n  target.setAttribute(\"data-svg-origin\", xOrigin + \" \" + yOrigin);\n},\n    _parseTransform = function _parseTransform(target, uncache) {\n  var cache = target._gsap || new GSCache(target);\n\n  if (\"x\" in cache && !uncache && !cache.uncache) {\n    return cache;\n  }\n\n  var style = target.style,\n      invertedScaleX = cache.scaleX < 0,\n      px = \"px\",\n      deg = \"deg\",\n      cs = getComputedStyle(target),\n      origin = _getComputedProperty(target, _transformOriginProp) || \"0\",\n      x,\n      y,\n      z,\n      scaleX,\n      scaleY,\n      rotation,\n      rotationX,\n      rotationY,\n      skewX,\n      skewY,\n      perspective,\n      xOrigin,\n      yOrigin,\n      matrix,\n      angle,\n      cos,\n      sin,\n      a,\n      b,\n      c,\n      d,\n      a12,\n      a22,\n      t1,\n      t2,\n      t3,\n      a13,\n      a23,\n      a33,\n      a42,\n      a43,\n      a32;\n  x = y = z = rotation = rotationX = rotationY = skewX = skewY = perspective = 0;\n  scaleX = scaleY = 1;\n  cache.svg = !!(target.getCTM && _isSVG(target));\n\n  if (cs.translate) {\n    // accommodate independent transforms by combining them into normal ones.\n    if (cs.translate !== \"none\" || cs.scale !== \"none\" || cs.rotate !== \"none\") {\n      style[_transformProp] = (cs.translate !== \"none\" ? \"translate3d(\" + (cs.translate + \" 0 0\").split(\" \").slice(0, 3).join(\", \") + \") \" : \"\") + (cs.rotate !== \"none\" ? \"rotate(\" + cs.rotate + \") \" : \"\") + (cs.scale !== \"none\" ? \"scale(\" + cs.scale.split(\" \").join(\",\") + \") \" : \"\") + cs[_transformProp];\n    }\n\n    style.scale = style.rotate = style.translate = \"none\";\n  }\n\n  matrix = _getMatrix(target, cache.svg);\n\n  if (cache.svg) {\n    if (cache.uncache) {\n      // if cache.uncache is true (and maybe if origin is 0,0), we need to set element.style.transformOrigin = (cache.xOrigin - bbox.x) + \"px \" + (cache.yOrigin - bbox.y) + \"px\". Previously we let the data-svg-origin stay instead, but when introducing revert(), it complicated things.\n      t2 = target.getBBox();\n      origin = cache.xOrigin - t2.x + \"px \" + (cache.yOrigin - t2.y) + \"px\";\n      t1 = \"\";\n    } else {\n      t1 = !uncache && target.getAttribute(\"data-svg-origin\"); //  Remember, to work around browser inconsistencies we always force SVG elements' transformOrigin to 0,0 and offset the translation accordingly.\n    }\n\n    _applySVGOrigin(target, t1 || origin, !!t1 || cache.originIsAbsolute, cache.smooth !== false, matrix);\n  }\n\n  xOrigin = cache.xOrigin || 0;\n  yOrigin = cache.yOrigin || 0;\n\n  if (matrix !== _identity2DMatrix) {\n    a = matrix[0]; //a11\n\n    b = matrix[1]; //a21\n\n    c = matrix[2]; //a31\n\n    d = matrix[3]; //a41\n\n    x = a12 = matrix[4];\n    y = a22 = matrix[5]; //2D matrix\n\n    if (matrix.length === 6) {\n      scaleX = Math.sqrt(a * a + b * b);\n      scaleY = Math.sqrt(d * d + c * c);\n      rotation = a || b ? _atan2(b, a) * _RAD2DEG : 0; //note: if scaleX is 0, we cannot accurately measure rotation. Same for skewX with a scaleY of 0. Therefore, we default to the previously recorded value (or zero if that doesn't exist).\n\n      skewX = c || d ? _atan2(c, d) * _RAD2DEG + rotation : 0;\n      skewX && (scaleY *= Math.abs(Math.cos(skewX * _DEG2RAD)));\n\n      if (cache.svg) {\n        x -= xOrigin - (xOrigin * a + yOrigin * c);\n        y -= yOrigin - (xOrigin * b + yOrigin * d);\n      } //3D matrix\n\n    } else {\n      a32 = matrix[6];\n      a42 = matrix[7];\n      a13 = matrix[8];\n      a23 = matrix[9];\n      a33 = matrix[10];\n      a43 = matrix[11];\n      x = matrix[12];\n      y = matrix[13];\n      z = matrix[14];\n      angle = _atan2(a32, a33);\n      rotationX = angle * _RAD2DEG; //rotationX\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a12 * cos + a13 * sin;\n        t2 = a22 * cos + a23 * sin;\n        t3 = a32 * cos + a33 * sin;\n        a13 = a12 * -sin + a13 * cos;\n        a23 = a22 * -sin + a23 * cos;\n        a33 = a32 * -sin + a33 * cos;\n        a43 = a42 * -sin + a43 * cos;\n        a12 = t1;\n        a22 = t2;\n        a32 = t3;\n      } //rotationY\n\n\n      angle = _atan2(-c, a33);\n      rotationY = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(-angle);\n        sin = Math.sin(-angle);\n        t1 = a * cos - a13 * sin;\n        t2 = b * cos - a23 * sin;\n        t3 = c * cos - a33 * sin;\n        a43 = d * sin + a43 * cos;\n        a = t1;\n        b = t2;\n        c = t3;\n      } //rotationZ\n\n\n      angle = _atan2(b, a);\n      rotation = angle * _RAD2DEG;\n\n      if (angle) {\n        cos = Math.cos(angle);\n        sin = Math.sin(angle);\n        t1 = a * cos + b * sin;\n        t2 = a12 * cos + a22 * sin;\n        b = b * cos - a * sin;\n        a22 = a22 * cos - a12 * sin;\n        a = t1;\n        a12 = t2;\n      }\n\n      if (rotationX && Math.abs(rotationX) + Math.abs(rotation) > 359.9) {\n        //when rotationY is set, it will often be parsed as 180 degrees different than it should be, and rotationX and rotation both being 180 (it looks the same), so we adjust for that here.\n        rotationX = rotation = 0;\n        rotationY = 180 - rotationY;\n      }\n\n      scaleX = _round(Math.sqrt(a * a + b * b + c * c));\n      scaleY = _round(Math.sqrt(a22 * a22 + a32 * a32));\n      angle = _atan2(a12, a22);\n      skewX = Math.abs(angle) > 0.0002 ? angle * _RAD2DEG : 0;\n      perspective = a43 ? 1 / (a43 < 0 ? -a43 : a43) : 0;\n    }\n\n    if (cache.svg) {\n      //sense if there are CSS transforms applied on an SVG element in which case we must overwrite them when rendering. The transform attribute is more reliable cross-browser, but we can't just remove the CSS ones because they may be applied in a CSS rule somewhere (not just inline).\n      t1 = target.getAttribute(\"transform\");\n      cache.forceCSS = target.setAttribute(\"transform\", \"\") || !_isNullTransform(_getComputedProperty(target, _transformProp));\n      t1 && target.setAttribute(\"transform\", t1);\n    }\n  }\n\n  if (Math.abs(skewX) > 90 && Math.abs(skewX) < 270) {\n    if (invertedScaleX) {\n      scaleX *= -1;\n      skewX += rotation <= 0 ? 180 : -180;\n      rotation += rotation <= 0 ? 180 : -180;\n    } else {\n      scaleY *= -1;\n      skewX += skewX <= 0 ? 180 : -180;\n    }\n  }\n\n  uncache = uncache || cache.uncache;\n  cache.x = x - ((cache.xPercent = x && (!uncache && cache.xPercent || (Math.round(target.offsetWidth / 2) === Math.round(-x) ? -50 : 0))) ? target.offsetWidth * cache.xPercent / 100 : 0) + px;\n  cache.y = y - ((cache.yPercent = y && (!uncache && cache.yPercent || (Math.round(target.offsetHeight / 2) === Math.round(-y) ? -50 : 0))) ? target.offsetHeight * cache.yPercent / 100 : 0) + px;\n  cache.z = z + px;\n  cache.scaleX = _round(scaleX);\n  cache.scaleY = _round(scaleY);\n  cache.rotation = _round(rotation) + deg;\n  cache.rotationX = _round(rotationX) + deg;\n  cache.rotationY = _round(rotationY) + deg;\n  cache.skewX = skewX + deg;\n  cache.skewY = skewY + deg;\n  cache.transformPerspective = perspective + px;\n\n  if (cache.zOrigin = parseFloat(origin.split(\" \")[2]) || 0) {\n    style[_transformOriginProp] = _firstTwoOnly(origin);\n  }\n\n  cache.xOffset = cache.yOffset = 0;\n  cache.force3D = _config.force3D;\n  cache.renderTransform = cache.svg ? _renderSVGTransforms : _supports3D ? _renderCSSTransforms : _renderNon3DTransforms;\n  cache.uncache = 0;\n  return cache;\n},\n    _firstTwoOnly = function _firstTwoOnly(value) {\n  return (value = value.split(\" \"))[0] + \" \" + value[1];\n},\n    //for handling transformOrigin values, stripping out the 3rd dimension\n_addPxTranslate = function _addPxTranslate(target, start, value) {\n  var unit = getUnit(start);\n  return _round(parseFloat(start) + parseFloat(_convertToUnit(target, \"x\", value + \"px\", unit))) + unit;\n},\n    _renderNon3DTransforms = function _renderNon3DTransforms(ratio, cache) {\n  cache.z = \"0px\";\n  cache.rotationY = cache.rotationX = \"0deg\";\n  cache.force3D = 0;\n\n  _renderCSSTransforms(ratio, cache);\n},\n    _zeroDeg = \"0deg\",\n    _zeroPx = \"0px\",\n    _endParenthesis = \") \",\n    _renderCSSTransforms = function _renderCSSTransforms(ratio, cache) {\n  var _ref = cache || this,\n      xPercent = _ref.xPercent,\n      yPercent = _ref.yPercent,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      rotation = _ref.rotation,\n      rotationY = _ref.rotationY,\n      rotationX = _ref.rotationX,\n      skewX = _ref.skewX,\n      skewY = _ref.skewY,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      transformPerspective = _ref.transformPerspective,\n      force3D = _ref.force3D,\n      target = _ref.target,\n      zOrigin = _ref.zOrigin,\n      transforms = \"\",\n      use3D = force3D === \"auto\" && ratio && ratio !== 1 || force3D === true; // Safari has a bug that causes it not to render 3D transform-origin values properly, so we force the z origin to 0, record it in the cache, and then do the math here to offset the translate values accordingly (basically do the 3D transform-origin part manually)\n\n\n  if (zOrigin && (rotationX !== _zeroDeg || rotationY !== _zeroDeg)) {\n    var angle = parseFloat(rotationY) * _DEG2RAD,\n        a13 = Math.sin(angle),\n        a33 = Math.cos(angle),\n        cos;\n\n    angle = parseFloat(rotationX) * _DEG2RAD;\n    cos = Math.cos(angle);\n    x = _addPxTranslate(target, x, a13 * cos * -zOrigin);\n    y = _addPxTranslate(target, y, -Math.sin(angle) * -zOrigin);\n    z = _addPxTranslate(target, z, a33 * cos * -zOrigin + zOrigin);\n  }\n\n  if (transformPerspective !== _zeroPx) {\n    transforms += \"perspective(\" + transformPerspective + _endParenthesis;\n  }\n\n  if (xPercent || yPercent) {\n    transforms += \"translate(\" + xPercent + \"%, \" + yPercent + \"%) \";\n  }\n\n  if (use3D || x !== _zeroPx || y !== _zeroPx || z !== _zeroPx) {\n    transforms += z !== _zeroPx || use3D ? \"translate3d(\" + x + \", \" + y + \", \" + z + \") \" : \"translate(\" + x + \", \" + y + _endParenthesis;\n  }\n\n  if (rotation !== _zeroDeg) {\n    transforms += \"rotate(\" + rotation + _endParenthesis;\n  }\n\n  if (rotationY !== _zeroDeg) {\n    transforms += \"rotateY(\" + rotationY + _endParenthesis;\n  }\n\n  if (rotationX !== _zeroDeg) {\n    transforms += \"rotateX(\" + rotationX + _endParenthesis;\n  }\n\n  if (skewX !== _zeroDeg || skewY !== _zeroDeg) {\n    transforms += \"skew(\" + skewX + \", \" + skewY + _endParenthesis;\n  }\n\n  if (scaleX !== 1 || scaleY !== 1) {\n    transforms += \"scale(\" + scaleX + \", \" + scaleY + _endParenthesis;\n  }\n\n  target.style[_transformProp] = transforms || \"translate(0, 0)\";\n},\n    _renderSVGTransforms = function _renderSVGTransforms(ratio, cache) {\n  var _ref2 = cache || this,\n      xPercent = _ref2.xPercent,\n      yPercent = _ref2.yPercent,\n      x = _ref2.x,\n      y = _ref2.y,\n      rotation = _ref2.rotation,\n      skewX = _ref2.skewX,\n      skewY = _ref2.skewY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      target = _ref2.target,\n      xOrigin = _ref2.xOrigin,\n      yOrigin = _ref2.yOrigin,\n      xOffset = _ref2.xOffset,\n      yOffset = _ref2.yOffset,\n      forceCSS = _ref2.forceCSS,\n      tx = parseFloat(x),\n      ty = parseFloat(y),\n      a11,\n      a21,\n      a12,\n      a22,\n      temp;\n\n  rotation = parseFloat(rotation);\n  skewX = parseFloat(skewX);\n  skewY = parseFloat(skewY);\n\n  if (skewY) {\n    //for performance reasons, we combine all skewing into the skewX and rotation values. Remember, a skewY of 10 degrees looks the same as a rotation of 10 degrees plus a skewX of 10 degrees.\n    skewY = parseFloat(skewY);\n    skewX += skewY;\n    rotation += skewY;\n  }\n\n  if (rotation || skewX) {\n    rotation *= _DEG2RAD;\n    skewX *= _DEG2RAD;\n    a11 = Math.cos(rotation) * scaleX;\n    a21 = Math.sin(rotation) * scaleX;\n    a12 = Math.sin(rotation - skewX) * -scaleY;\n    a22 = Math.cos(rotation - skewX) * scaleY;\n\n    if (skewX) {\n      skewY *= _DEG2RAD;\n      temp = Math.tan(skewX - skewY);\n      temp = Math.sqrt(1 + temp * temp);\n      a12 *= temp;\n      a22 *= temp;\n\n      if (skewY) {\n        temp = Math.tan(skewY);\n        temp = Math.sqrt(1 + temp * temp);\n        a11 *= temp;\n        a21 *= temp;\n      }\n    }\n\n    a11 = _round(a11);\n    a21 = _round(a21);\n    a12 = _round(a12);\n    a22 = _round(a22);\n  } else {\n    a11 = scaleX;\n    a22 = scaleY;\n    a21 = a12 = 0;\n  }\n\n  if (tx && !~(x + \"\").indexOf(\"px\") || ty && !~(y + \"\").indexOf(\"px\")) {\n    tx = _convertToUnit(target, \"x\", x, \"px\");\n    ty = _convertToUnit(target, \"y\", y, \"px\");\n  }\n\n  if (xOrigin || yOrigin || xOffset || yOffset) {\n    tx = _round(tx + xOrigin - (xOrigin * a11 + yOrigin * a12) + xOffset);\n    ty = _round(ty + yOrigin - (xOrigin * a21 + yOrigin * a22) + yOffset);\n  }\n\n  if (xPercent || yPercent) {\n    //The SVG spec doesn't support percentage-based translation in the \"transform\" attribute, so we merge it into the translation to simulate it.\n    temp = target.getBBox();\n    tx = _round(tx + xPercent / 100 * temp.width);\n    ty = _round(ty + yPercent / 100 * temp.height);\n  }\n\n  temp = \"matrix(\" + a11 + \",\" + a21 + \",\" + a12 + \",\" + a22 + \",\" + tx + \",\" + ty + \")\";\n  target.setAttribute(\"transform\", temp);\n  forceCSS && (target.style[_transformProp] = temp); //some browsers prioritize CSS transforms over the transform attribute. When we sense that the user has CSS transforms applied, we must overwrite them this way (otherwise some browser simply won't render the transform attribute changes!)\n},\n    _addRotationalPropTween = function _addRotationalPropTween(plugin, target, property, startNum, endValue) {\n  var cap = 360,\n      isString = _isString(endValue),\n      endNum = parseFloat(endValue) * (isString && ~endValue.indexOf(\"rad\") ? _RAD2DEG : 1),\n      change = endNum - startNum,\n      finalValue = startNum + change + \"deg\",\n      direction,\n      pt;\n\n  if (isString) {\n    direction = endValue.split(\"_\")[1];\n\n    if (direction === \"short\") {\n      change %= cap;\n\n      if (change !== change % (cap / 2)) {\n        change += change < 0 ? cap : -cap;\n      }\n    }\n\n    if (direction === \"cw\" && change < 0) {\n      change = (change + cap * _bigNum) % cap - ~~(change / cap) * cap;\n    } else if (direction === \"ccw\" && change > 0) {\n      change = (change - cap * _bigNum) % cap - ~~(change / cap) * cap;\n    }\n  }\n\n  plugin._pt = pt = new PropTween(plugin._pt, target, property, startNum, change, _renderPropWithEnd);\n  pt.e = finalValue;\n  pt.u = \"deg\";\n\n  plugin._props.push(property);\n\n  return pt;\n},\n    _assign = function _assign(target, source) {\n  // Internet Explorer doesn't have Object.assign(), so we recreate it here.\n  for (var p in source) {\n    target[p] = source[p];\n  }\n\n  return target;\n},\n    _addRawTransformPTs = function _addRawTransformPTs(plugin, transforms, target) {\n  //for handling cases where someone passes in a whole transform string, like transform: \"scale(2, 3) rotate(20deg) translateY(30em)\"\n  var startCache = _assign({}, target._gsap),\n      exclude = \"perspective,force3D,transformOrigin,svgOrigin\",\n      style = target.style,\n      endCache,\n      p,\n      startValue,\n      endValue,\n      startNum,\n      endNum,\n      startUnit,\n      endUnit;\n\n  if (startCache.svg) {\n    startValue = target.getAttribute(\"transform\");\n    target.setAttribute(\"transform\", \"\");\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n\n    _removeProperty(target, _transformProp);\n\n    target.setAttribute(\"transform\", startValue);\n  } else {\n    startValue = getComputedStyle(target)[_transformProp];\n    style[_transformProp] = transforms;\n    endCache = _parseTransform(target, 1);\n    style[_transformProp] = startValue;\n  }\n\n  for (p in _transformProps) {\n    startValue = startCache[p];\n    endValue = endCache[p];\n\n    if (startValue !== endValue && exclude.indexOf(p) < 0) {\n      //tweening to no perspective gives very unintuitive results - just keep the same perspective in that case.\n      startUnit = getUnit(startValue);\n      endUnit = getUnit(endValue);\n      startNum = startUnit !== endUnit ? _convertToUnit(target, p, startValue, endUnit) : parseFloat(startValue);\n      endNum = parseFloat(endValue);\n      plugin._pt = new PropTween(plugin._pt, endCache, p, startNum, endNum - startNum, _renderCSSProp);\n      plugin._pt.u = endUnit || 0;\n\n      plugin._props.push(p);\n    }\n  }\n\n  _assign(endCache, startCache);\n}; // handle splitting apart padding, margin, borderWidth, and borderRadius into their 4 components. Firefox, for example, won't report borderRadius correctly - it will only do borderTopLeftRadius and the other corners. We also want to handle paddingTop, marginLeft, borderRightWidth, etc.\n\n\n_forEachName(\"padding,margin,Width,Radius\", function (name, index) {\n  var t = \"Top\",\n      r = \"Right\",\n      b = \"Bottom\",\n      l = \"Left\",\n      props = (index < 3 ? [t, r, b, l] : [t + l, t + r, b + r, b + l]).map(function (side) {\n    return index < 2 ? name + side : \"border\" + side + name;\n  });\n\n  _specialProps[index > 1 ? \"border\" + name : name] = function (plugin, target, property, endValue, tween) {\n    var a, vars;\n\n    if (arguments.length < 4) {\n      // getter, passed target, property, and unit (from _get())\n      a = props.map(function (prop) {\n        return _get(plugin, prop, property);\n      });\n      vars = a.join(\" \");\n      return vars.split(a[0]).length === 5 ? a[0] : vars;\n    }\n\n    a = (endValue + \"\").split(\" \");\n    vars = {};\n    props.forEach(function (prop, i) {\n      return vars[prop] = a[i] = a[i] || a[(i - 1) / 2 | 0];\n    });\n    plugin.init(target, vars, tween);\n  };\n});\n\nexport var CSSPlugin = {\n  name: \"css\",\n  register: _initCore,\n  targetTest: function targetTest(target) {\n    return target.style && target.nodeType;\n  },\n  init: function init(target, vars, tween, index, targets) {\n    var props = this._props,\n        style = target.style,\n        startAt = tween.vars.startAt,\n        startValue,\n        endValue,\n        endNum,\n        startNum,\n        type,\n        specialProp,\n        p,\n        startUnit,\n        endUnit,\n        relative,\n        isTransformRelated,\n        transformPropTween,\n        cache,\n        smooth,\n        hasPriority,\n        inlineProps;\n    _pluginInitted || _initCore(); // we may call init() multiple times on the same plugin instance, like when adding special properties, so make sure we don't overwrite the revert data or inlineProps\n\n    this.styles = this.styles || _getStyleSaver(target);\n    inlineProps = this.styles.props;\n    this.tween = tween;\n\n    for (p in vars) {\n      if (p === \"autoRound\") {\n        continue;\n      }\n\n      endValue = vars[p];\n\n      if (_plugins[p] && _checkPlugin(p, vars, tween, index, target, targets)) {\n        // plugins\n        continue;\n      }\n\n      type = typeof endValue;\n      specialProp = _specialProps[p];\n\n      if (type === \"function\") {\n        endValue = endValue.call(tween, index, target, targets);\n        type = typeof endValue;\n      }\n\n      if (type === \"string\" && ~endValue.indexOf(\"random(\")) {\n        endValue = _replaceRandom(endValue);\n      }\n\n      if (specialProp) {\n        specialProp(this, target, p, endValue, tween) && (hasPriority = 1);\n      } else if (p.substr(0, 2) === \"--\") {\n        //CSS variable\n        startValue = (getComputedStyle(target).getPropertyValue(p) + \"\").trim();\n        endValue += \"\";\n        _colorExp.lastIndex = 0;\n\n        if (!_colorExp.test(startValue)) {\n          // colors don't have units\n          startUnit = getUnit(startValue);\n          endUnit = getUnit(endValue);\n        }\n\n        endUnit ? startUnit !== endUnit && (startValue = _convertToUnit(target, p, startValue, endUnit) + endUnit) : startUnit && (endValue += startUnit);\n        this.add(style, \"setProperty\", startValue, endValue, index, targets, 0, 0, p);\n        props.push(p);\n        inlineProps.push(p, style[p]);\n      } else if (type !== \"undefined\") {\n        if (startAt && p in startAt) {\n          // in case someone hard-codes a complex value as the start, like top: \"calc(2vh / 2)\". Without this, it'd use the computed value (always in px)\n          startValue = typeof startAt[p] === \"function\" ? startAt[p].call(tween, index, target, targets) : startAt[p];\n          _isString(startValue) && ~startValue.indexOf(\"random(\") && (startValue = _replaceRandom(startValue));\n          getUnit(startValue + \"\") || (startValue += _config.units[p] || getUnit(_get(target, p)) || \"\"); // for cases when someone passes in a unitless value like {x: 100}; if we try setting translate(100, 0px) it won't work.\n\n          (startValue + \"\").charAt(1) === \"=\" && (startValue = _get(target, p)); // can't work with relative values\n        } else {\n          startValue = _get(target, p);\n        }\n\n        startNum = parseFloat(startValue);\n        relative = type === \"string\" && endValue.charAt(1) === \"=\" && endValue.substr(0, 2);\n        relative && (endValue = endValue.substr(2));\n        endNum = parseFloat(endValue);\n\n        if (p in _propertyAliases) {\n          if (p === \"autoAlpha\") {\n            //special case where we control the visibility along with opacity. We still allow the opacity value to pass through and get tweened.\n            if (startNum === 1 && _get(target, \"visibility\") === \"hidden\" && endNum) {\n              //if visibility is initially set to \"hidden\", we should interpret that as intent to make opacity 0 (a convenience)\n              startNum = 0;\n            }\n\n            inlineProps.push(\"visibility\", style.visibility);\n\n            _addNonTweeningPT(this, style, \"visibility\", startNum ? \"inherit\" : \"hidden\", endNum ? \"inherit\" : \"hidden\", !endNum);\n          }\n\n          if (p !== \"scale\" && p !== \"transform\") {\n            p = _propertyAliases[p];\n            ~p.indexOf(\",\") && (p = p.split(\",\")[0]);\n          }\n        }\n\n        isTransformRelated = p in _transformProps; //--- TRANSFORM-RELATED ---\n\n        if (isTransformRelated) {\n          this.styles.save(p);\n\n          if (!transformPropTween) {\n            cache = target._gsap;\n            cache.renderTransform && !vars.parseTransform || _parseTransform(target, vars.parseTransform); // if, for example, gsap.set(... {transform:\"translateX(50vw)\"}), the _get() call doesn't parse the transform, thus cache.renderTransform won't be set yet so force the parsing of the transform here.\n\n            smooth = vars.smoothOrigin !== false && cache.smooth;\n            transformPropTween = this._pt = new PropTween(this._pt, style, _transformProp, 0, 1, cache.renderTransform, cache, 0, -1); //the first time through, create the rendering PropTween so that it runs LAST (in the linked list, we keep adding to the beginning)\n\n            transformPropTween.dep = 1; //flag it as dependent so that if things get killed/overwritten and this is the only PropTween left, we can safely kill the whole tween.\n          }\n\n          if (p === \"scale\") {\n            this._pt = new PropTween(this._pt, cache, \"scaleY\", cache.scaleY, (relative ? _parseRelative(cache.scaleY, relative + endNum) : endNum) - cache.scaleY || 0, _renderCSSProp);\n            this._pt.u = 0;\n            props.push(\"scaleY\", p);\n            p += \"X\";\n          } else if (p === \"transformOrigin\") {\n            inlineProps.push(_transformOriginProp, style[_transformOriginProp]);\n            endValue = _convertKeywordsToPercentages(endValue); //in case something like \"left top\" or \"bottom right\" is passed in. Convert to percentages.\n\n            if (cache.svg) {\n              _applySVGOrigin(target, endValue, 0, smooth, 0, this);\n            } else {\n              endUnit = parseFloat(endValue.split(\" \")[2]) || 0; //handle the zOrigin separately!\n\n              endUnit !== cache.zOrigin && _addNonTweeningPT(this, cache, \"zOrigin\", cache.zOrigin, endUnit);\n\n              _addNonTweeningPT(this, style, p, _firstTwoOnly(startValue), _firstTwoOnly(endValue));\n            }\n\n            continue;\n          } else if (p === \"svgOrigin\") {\n            _applySVGOrigin(target, endValue, 1, smooth, 0, this);\n\n            continue;\n          } else if (p in _rotationalProperties) {\n            _addRotationalPropTween(this, cache, p, startNum, relative ? _parseRelative(startNum, relative + endValue) : endValue);\n\n            continue;\n          } else if (p === \"smoothOrigin\") {\n            _addNonTweeningPT(this, cache, \"smooth\", cache.smooth, endValue);\n\n            continue;\n          } else if (p === \"force3D\") {\n            cache[p] = endValue;\n            continue;\n          } else if (p === \"transform\") {\n            _addRawTransformPTs(this, endValue, target);\n\n            continue;\n          }\n        } else if (!(p in style)) {\n          p = _checkPropPrefix(p) || p;\n        }\n\n        if (isTransformRelated || (endNum || endNum === 0) && (startNum || startNum === 0) && !_complexExp.test(endValue) && p in style) {\n          startUnit = (startValue + \"\").substr((startNum + \"\").length);\n          endNum || (endNum = 0); // protect against NaN\n\n          endUnit = getUnit(endValue) || (p in _config.units ? _config.units[p] : startUnit);\n          startUnit !== endUnit && (startNum = _convertToUnit(target, p, startValue, endUnit));\n          this._pt = new PropTween(this._pt, isTransformRelated ? cache : style, p, startNum, (relative ? _parseRelative(startNum, relative + endNum) : endNum) - startNum, !isTransformRelated && (endUnit === \"px\" || p === \"zIndex\") && vars.autoRound !== false ? _renderRoundedCSSProp : _renderCSSProp);\n          this._pt.u = endUnit || 0;\n\n          if (startUnit !== endUnit && endUnit !== \"%\") {\n            //when the tween goes all the way back to the beginning, we need to revert it to the OLD/ORIGINAL value (with those units). We record that as a \"b\" (beginning) property and point to a render method that handles that. (performance optimization)\n            this._pt.b = startValue;\n            this._pt.r = _renderCSSPropWithBeginning;\n          }\n        } else if (!(p in style)) {\n          if (p in target) {\n            //maybe it's not a style - it could be a property added directly to an element in which case we'll try to animate that.\n            this.add(target, p, startValue || target[p], relative ? relative + endValue : endValue, index, targets);\n          } else {\n            _missingPlugin(p, endValue);\n\n            continue;\n          }\n        } else {\n          _tweenComplexCSSString.call(this, target, p, startValue, relative ? relative + endValue : endValue);\n        }\n\n        isTransformRelated || inlineProps.push(p, style[p]);\n        props.push(p);\n      }\n    }\n\n    hasPriority && _sortPropTweensByPriority(this);\n  },\n  render: function render(ratio, data) {\n    if (data.tween._time || !_reverting()) {\n      var pt = data._pt;\n\n      while (pt) {\n        pt.r(ratio, pt.d);\n        pt = pt._next;\n      }\n    } else {\n      data.styles.revert();\n    }\n  },\n  get: _get,\n  aliases: _propertyAliases,\n  getSetter: function getSetter(target, property, plugin) {\n    //returns a setter function that accepts target, property, value and applies it accordingly. Remember, properties like \"x\" aren't as simple as target.style.property = value because they've got to be applied to a proxy object and then merged into a transform string in a renderer.\n    var p = _propertyAliases[property];\n    p && p.indexOf(\",\") < 0 && (property = p);\n    return property in _transformProps && property !== _transformOriginProp && (target._gsap.x || _get(target, \"x\")) ? plugin && _recentSetterPlugin === plugin ? property === \"scale\" ? _setterScale : _setterTransform : (_recentSetterPlugin = plugin || {}) && (property === \"scale\" ? _setterScaleWithRender : _setterTransformWithRender) : target.style && !_isUndefined(target.style[property]) ? _setterCSSStyle : ~property.indexOf(\"-\") ? _setterCSSProp : _getSetter(target, property);\n  },\n  core: {\n    _removeProperty: _removeProperty,\n    _getMatrix: _getMatrix\n  }\n};\ngsap.utils.checkPrefix = _checkPropPrefix;\ngsap.core.getStyleSaver = _getStyleSaver;\n\n(function (positionAndScale, rotation, others, aliases) {\n  var all = _forEachName(positionAndScale + \",\" + rotation + \",\" + others, function (name) {\n    _transformProps[name] = 1;\n  });\n\n  _forEachName(rotation, function (name) {\n    _config.units[name] = \"deg\";\n    _rotationalProperties[name] = 1;\n  });\n\n  _propertyAliases[all[13]] = positionAndScale + \",\" + rotation;\n\n  _forEachName(aliases, function (name) {\n    var split = name.split(\":\");\n    _propertyAliases[split[1]] = all[split[0]];\n  });\n})(\"x,y,z,scale,scaleX,scaleY,xPercent,yPercent\", \"rotation,rotationX,rotationY,skewX,skewY\", \"transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective\", \"0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY\");\n\n_forEachName(\"x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective\", function (name) {\n  _config.units[name] = \"px\";\n});\n\ngsap.registerPlugin(CSSPlugin);\nexport { CSSPlugin as default, _getBBox, _createElement, _checkPropPrefix as checkPrefix };","import { gsap, Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ, TweenLite, TimelineLite, TimelineMax } from \"./gsap-core.js\";\nimport { CSSPlugin } from \"./CSSPlugin.js\";\nvar gsapWithCSS = gsap.registerPlugin(CSSPlugin) || gsap,\n    // to protect from tree shaking\nTweenMaxWithCSS = gsapWithCSS.core.Tween;\nexport { gsapWithCSS as gsap, gsapWithCSS as default, CSSPlugin, TweenMaxWithCSS as TweenMax, TweenLite, TimelineMax, TimelineLite, Power0, Power1, Power2, Power3, Power4, Linear, Quad, Cubic, Quart, Quint, Strong, Elastic, Back, SteppedEase, Bounce, Sine, Expo, Circ };","import { MeshBasicMaterial } from 'three'\n\nexport const MetalMaterial = new MeshBasicMaterial({\n  color: 0x1d1d1d\n})\n","import { MeshBasicMaterial } from 'three'\n\nexport const PipesMaterial = new MeshBasicMaterial({\n  color: 0xb91623\n})\n","import { MeshStandardMaterial } from 'three'\n\nexport const LightsMaterial = new MeshStandardMaterial({\n  emissive: 0xac540c,\n  color: 0xffffff,\n  emissiveIntensity: 1.37\n})\n","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec3 vWorldPosition;\\nvarying vec3 vWorldNormal;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\n  vUv = uv;\\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\\n  vWorldNormal = normalize(vec3(vec4(normal, 0.0) * modelMatrix));\\n}\\n\";","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec3 vWorldPosition;\\nvarying vec3 vWorldNormal;\\n\\nuniform float u_Progress1;\\nuniform float u_Progress2;\\nuniform float u_Progress3;\\nuniform float u_TransitionSmoothness;\\nuniform float u_Time;\\nuniform vec3 u_Color;\\nuniform float u_FresnelFalloff;\\nuniform sampler2D t_AlphaMap;\\n\\nfloat rand(vec2 n) {\\n\\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\\n}\\n\\nfloat noise(vec2 p){\\n\\tvec2 ip = floor(p);\\n\\tvec2 u = fract(p);\\n\\tu = u*u*(3.0-2.0*u);\\n\\n\\tfloat res = mix(\\n\\t\\tmix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\\n\\t\\tmix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\\n\\treturn res*res;\\n}\\n\\nfloat remap(float value, float low1, float high1, float low2, float high2) {\\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\\n}\\n\\nfloat fresnel(vec3 cameraPosition, vec3 worldPosition, vec3 worldNormal, float falloff) {\\n  vec3 viewDirection = normalize(cameraPosition - worldPosition);\\n\\n  float effect = dot(viewDirection, worldNormal);\\n  effect = clamp(1.0 - effect, 0., 1.0);\\n  effect = pow(effect, falloff);\\n\\n  return effect;\\n}\\n\\nfloat random(float n) {\\n  return fract(sin(n) * 43758.5453123);\\n}\\n\\nvoid main() {\\n  vec2 gv = floor(vUv * 35.0 - vec2(0.0, u_Time*1.5));\\n  float pattern = noise(gv);\\n\\n  // alpha map\\n  float alphaMapB = texture2D(t_AlphaMap, vUv * vec2(0.0, 0.8) + vec2(0.0, u_Time*0.03)).b;\\n\\n  // Noise\\n  float noisy = noise(floor(vUv*1300.) + floor(random(u_Time)*100.0));\\n  noisy *= alphaMapB;\\n\\n  // Fresnel\\n  float frn = fresnel(cameraPosition, vWorldPosition, vWorldNormal, u_FresnelFalloff);\\n\\n  /*\\n   * Colors\\n   */\\n  vec4 l1 = vec4(u_Color, 0.5);\\n\\n  vec4 l2 = vec4(u_Color, 1.0);\\n  l2 = l2 * clamp(alphaMapB, 0.1, 0.85);\\n  l2.a = clamp(noisy, 0.0, 0.35);\\n\\n  #if !defined(FLIP_SIDED)\\n    l2 = mix(l2, l1, frn);\\n  #endif\\n\\n  vec4 l3 = vec4(u_Color, 1.0);\\n  l3 = l3 * step(0.99, fract(vUv.y*4.6+u_Time*0.3));\\n\\n  // 01. Base layer\\n  float p1 = u_Progress1;\\n  p1 = remap(p1, 0.0, 1.0, -u_TransitionSmoothness, 1.0);\\n  p1 = smoothstep(p1, p1 + u_TransitionSmoothness, 1.0 - vUv.y);\\n\\n  float mix1 = 2.0*p1 - pattern;\\n  mix1 = clamp(mix1, 0.0, 1.0);\\n\\n  // 02. Wide bands layer\\n  float p2 = u_Progress2;\\n  p2 = remap(p2, 0.0, 1.0, -u_TransitionSmoothness, 1.0);\\n  p2 = smoothstep(p2, p2 + u_TransitionSmoothness, 1.0 - vUv.y);\\n\\n  float mix2 = 2.0*p2 - pattern;\\n  mix2 = clamp(mix2, 0.0, 1.0);\\n\\n  // 03. Thin bands layer\\n  float p3 = u_Progress3;\\n  p3 = remap(p3, 0.0, 1.0, -u_TransitionSmoothness, 1.0);\\n  p3 = smoothstep(p3, p3 + u_TransitionSmoothness, 1.0 - vUv.y);\\n\\n  float mix3 = 2.0*p3 - pattern;\\n  mix3 = clamp(mix3, 0.0, 1.0);\\n\\n  // Mix layers\\n  vec4 layer1 = mix(vec4(0.0), l1, 1.0 - mix1);\\n  vec4 layer2 = mix(layer1, l2, 1.0 - mix2);\\n  vec4 layer3 = mix(layer2, l3, l3.a*(1.0 - mix3));\\n\\n  vec4 color = layer3;\\n\\n  gl_FragColor = color;\\n\\n  // cool colors\\n  // gl_FragColor = vec4(vWorldPosition*vWorldNormal, 1.0);\\n}\\n\";","import { ShaderMaterial, DoubleSide, Color, AdditiveBlending } from 'three'\n\nexport const HoloMaterial = new ShaderMaterial({\n  vertexShader: require('./vertex.glsl'),\n  fragmentShader: require('./fragment.glsl'),\n  transparent: true,\n  side: DoubleSide,\n  blending: AdditiveBlending,\n  uniforms: {\n    u_Progress1: { value: 0 },\n    u_Progress2: { value: 0 },\n    u_Progress3: { value: 0 },\n    u_TransitionSmoothness: { value: 0.24 },\n    u_Color: { value: new Color(0x187cd9) },\n    u_Time: { value: 0 },\n    u_FresnelFalloff: { value: 1.13 },\n    t_AlphaMap: { value: null }\n  }\n})\n","import { MeshStandardMaterial } from 'three'\n\nexport const NeonMaterial = new MeshStandardMaterial({\n  emissive: 0x48b0ff,\n  color: 0x000000,\n  emissiveIntensity: 0.95\n})\n","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\n  vUv = uv;\\n}\\n\";","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nuniform float u_Time;\\nuniform float u_Opacity;\\nuniform vec3 u_Color;\\nuniform sampler2D t_AlphaMap;\\n\\nfloat rand(vec2 n) {\\n\\treturn fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\\n}\\n\\nfloat noise(vec2 p){\\n\\tvec2 ip = floor(p);\\n\\tvec2 u = fract(p);\\n\\tu = u*u*(3.0-2.0*u);\\n\\n\\tfloat res = mix(\\n\\t\\tmix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\\n\\t\\tmix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\\n\\treturn res*res;\\n}\\n\\nfloat remap(float value, float low1, float high1, float low2, float high2) {\\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\\n}\\n\\nfloat random(float n) {\\n  return fract(sin(n) * 43758.5453123);\\n}\\n\\nvoid main() {\\n  // Alpha map\\n  float alphaMapB = texture2D(t_AlphaMap, vUv * vec2(0.0, 0.8) + vec2(0.0, u_Time*0.03)).b;\\n\\n  // Noise\\n  float noisy = noise(floor(vUv*700.) + floor(random(u_Time)*100.0));\\n\\n  // Layer 1: colored noise\\n  vec4 l1 = vec4(u_Color, 0.15);\\n  l1 *= noisy;\\n\\n  // Layer 2: big bands\\n  vec4 l2 = vec4(u_Color, 0.6);\\n  l2 *= alphaMapB;\\n\\n  vec4 mix2 = mix(l1, l2, l2.a);\\n\\n  // Layer 3: small bands\\n  vec4 l3 = vec4(u_Color, 0.85);\\n  l3 *= step(0.98, fract(vUv.y*7.5+u_Time*0.3));\\n\\n  vec4 mix3 = mix(mix2, l3, l3.a);\\n\\n  // Layer 4: small bands\\n  vec4 l4 = vec4(u_Color, 1.0);\\n  l4 *= step(0.99, fract(vUv.y*3.43-u_Time*0.08));\\n\\n  vec4 mix4 = mix(mix3, l4, l4.a);\\n\\n  gl_FragColor = mix4*u_Opacity;\\n}\\n\";","import { ShaderMaterial, DoubleSide, Color } from 'three'\n\nexport const ScreenMaterial = new ShaderMaterial({\n  vertexShader: require('./vertex.glsl'),\n  fragmentShader: require('./fragment.glsl'),\n  transparent: true,\n  side: DoubleSide,\n  uniforms: {\n    u_Color: { value: new Color(0x0a2c60) },\n    u_Opacity: { value: 0 },\n    u_Time: { value: 0 },\n    t_AlphaMap: { value: null }\n  }\n})\n","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\n  vUv = uv;\\n}\\n\";","module.exports=\"#define GLSLIFY 1\\nuniform sampler2D t_aoMap;\\nuniform float u_aoMapIntensity;\\nuniform vec3 u_Color;\\nuniform float u_SpotlightRadius;\\nuniform float u_SpotlightBlur;\\n\\nvarying vec2 vUv;\\n\\nfloat Circle(in vec2 st, in float radius, in float blur){\\n  return 1. - smoothstep(radius - (radius*blur), radius+(radius*blur), dot(st,st) * 4.0);\\n}\\n\\nvoid main() {\\n  float spotlight = Circle((vUv - 0.5)*2.0, u_SpotlightRadius, u_SpotlightBlur);\\n\\n  float ambientOcclusion = (texture2D(t_aoMap, vUv).r - 1.0) * u_aoMapIntensity + 1.0;\\n\\n  vec3 color = u_Color * ambientOcclusion * spotlight;\\n\\n  gl_FragColor = vec4(color, 1.0)*spotlight;\\n}\\n\";","import { ShaderMaterial, Color } from 'three'\n\nexport const FloorMaterial = new ShaderMaterial({\n  vertexShader: require('./vertex.glsl'),\n  fragmentShader: require('./fragment.glsl'),\n  transparent: true,\n  uniforms: {\n    u_Color: { value: new Color(0x141d26) },\n    u_SpotlightRadius: { value: 1 },\n    u_SpotlightBlur: { value: 0.6 },\n    t_aoMap: { value: null },\n    u_aoMapIntensity: { value: 1 }\n  }\n})\n","/*! Tweakpane 3.1.0 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index) {\n            super(target);\n            this.index = index;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue),\n            });\n        }\n    }\n\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor() {\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            }\n            else {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s) => s === ev.sender);\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$6(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt,\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgbInt,\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        ];\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb'\n                ? constrainRange(components[0], 0, ms[0])\n                : loopRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode, type = 'int') {\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        static black(type = 'int') {\n            return new Color([0, 0, 0], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType),\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n\n    function equalsStringColorFormat(f1, f2) {\n        return (f1.alpha === f2.alpha &&\n            f1.mode === f2.mode &&\n            f1.notation === f2.notation &&\n            f1.type === f2.type);\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text) => {\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text) => {\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4]),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n            if (prev) {\n                return prev;\n            }\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) {\n            return null;\n        }\n        if (r.notation === 'hex' && type !== 'float') {\n            return Object.assign(Object.assign({}, r), { type: 'int' });\n        }\n        if (r.notation === 'func') {\n            return Object.assign(Object.assign({}, r), { type: type });\n        }\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int'),\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float'),\n        ],\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            if (typeof value !== 'string') {\n                return Color.black(type);\n            }\n            const result = parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            return parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n            if (prev) {\n                return prev;\n            }\n            return equalsStringColorFormat(fas.format, format)\n                ? fas.stringifier\n                : null;\n        }, null);\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new RangeConstraint({\n            min: 0,\n            max: max,\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType),\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 359);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value, opt_type);\n        }\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify\n            ? (target, value) => {\n                writePrimitive(target, stringify(value));\n            }\n            : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue) => {\n            if (supportsAlpha) {\n                writeRgbaColorObject(target, inValue, opt_type);\n            }\n            else {\n                writeRgbColorObject(target, inValue, opt_type);\n            }\n        };\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\n            return true;\n        }\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) {\n            return true;\n        }\n        if ('view' in params && params.view === 'color') {\n            return true;\n        }\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!isForColor(params)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value) => {\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value) => {\n            if (supportsAlpha) {\n                return colorToObjectRgbaString(value, type);\n            }\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\n        },\n        controller: (args) => {\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) {\n                return null;\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\n            equals: Color.equals,\n            writer: (args) => {\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) {\n                    throw TpError.shouldNeverHappen();\n                }\n                const writer = createColorStringWriter(format);\n                if (!writer) {\n                    throw TpError.notBindable();\n                }\n                return writer;\n            },\n        },\n        controller: (args) => {\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params,\n    initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) {\n            constraints.push(cs);\n        }\n        const rs = createRangeConstraint(params);\n        if (rs) {\n            constraints.push(rs);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        var _a, _b;\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs((_a = rc.minValue) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = rc.maxValue) !== null && _b !== void 0 ? _b : 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createConstraint$1(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label !== null && label !== void 0 ? label : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                document: document,\n                target: target,\n                params: params,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                document: document,\n                params: params,\n                target: target,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                document: document,\n                params: params,\n            }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n                controller: bc,\n                pool: this,\n            }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.1.0');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import { Pane } from 'tweakpane'\nimport { Color } from 'three'\n\nexport class Debugger {\n  constructor(app) {\n    this.app = app\n\n    this.#createPanel()\n    this.#createSceneConfig()\n    this.#createBloomConfig()\n    this.#createFXAAPassConfig()\n    this.#createFloorConfig()\n    this.#createBaseConfig()\n    this.#createPipesConfig()\n    this.#createPointLightsConfig()\n    this.#createRoundLightConfig()\n    this.#createHoloConfig()\n    this.#createScreenConfig()\n  }\n\n  refresh() {\n    this.pane.refresh()\n  }\n\n  #createPanel() {\n    this.pane = new Pane({\n      container: document.querySelector('#debug')\n    })\n  }\n\n  #createSceneConfig() {\n    const folder = this.pane.addFolder({ title: 'Scene' })\n    const params = {\n      background: { r: 0, g: 0, b: 0 },\n      holoAnimation: 0\n    }\n\n    folder.addInput(params, 'background', { label: 'Background Color' }).on('change', e => {\n      this.app.renderer.setClearColor(new Color(e.value.r / 255, e.value.g / 255, e.value.b / 255))\n    })\n\n    folder.addInput(params, 'holoAnimation', { label: 'Holo Animation Progress', min: 0, max: 1 }).on('change', e => {\n      this.app.holoAnimation.pause()\n      this.app.holoAnimation.progress(e.value)\n    })\n\n    folder.addButton({ title: 'Animate Holo' }).on('click', () => {\n      this.app.holoAnimation.restart()\n    })\n  }\n\n  #createBloomConfig() {\n    const folder = this.pane.addFolder({ title: 'Postprocess - Bloom', expanded: false })\n\n    folder.addInput(this.app.bloomPass, 'enabled', { label: 'Enabled' })\n    folder.addInput(this.app.bloomPass, 'threshold', { label: 'Threshold', min: 0, max: 1 })\n    folder.addInput(this.app.bloomPass, 'strength', { label: 'Strength', min: 0, max: 3 })\n    folder.addInput(this.app.bloomPass, 'radius', { label: 'Radius', min: 0, max: 1 })\n  }\n\n  #createFXAAPassConfig() {\n    const folder = this.pane.addFolder({ title: 'Postprocess - FXAA', expanded: false })\n\n    folder.addInput(this.app.fxaaPass, 'enabled', { label: 'Enabled' })\n  }\n\n  #createFloorConfig() {\n    const folder = this.pane.addFolder({ title: 'Floor', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Floor')\n\n    const color = mesh.material.uniforms.u_Color.value.clone().multiplyScalar(255)\n    const params = { color: { r: color.r, g: color.g, b: color.b } }\n    folder.addInput(params, 'color', { label: 'Color' }).on('change', e => {\n      mesh.material.uniforms.u_Color.value.setRGB(e.value.r, e.value.g, e.value.b).multiplyScalar(1 / 255)\n    })\n\n    folder.addInput(mesh.material.uniforms.u_aoMapIntensity, 'value', { label: 'AO Map Intensity', min: 0, max: 1 })\n    folder.addInput(mesh.material.uniforms.u_SpotlightRadius, 'value', { label: 'Spotlight Radius', min: 0, max: 1 })\n    folder.addInput(mesh.material.uniforms.u_SpotlightBlur, 'value', { label: 'Spotlight Blur', min: 0, max: 1 })\n  }\n\n  #createBaseConfig() {\n    const folder = this.pane.addFolder({ title: 'Base', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Base')\n\n    this.#createColorControl(mesh, folder)\n    folder.addInput(mesh.material, 'aoMapIntensity', { label: 'AO Map Intensity', min: 0, max: 1 })\n  }\n\n  #createPipesConfig() {\n    const folder = this.pane.addFolder({ title: 'Pipes', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Base_Pipes')\n\n    this.#createColorControl(mesh, folder)\n  }\n\n  #createPointLightsConfig() {\n    const folder = this.pane.addFolder({ title: 'Point Lights', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Base_PointLights')\n\n    this.#createEmissiveControl(mesh, folder)\n    this.#createEmissiveIntensityControl(mesh, folder)\n  }\n\n  #createRoundLightConfig() {\n    const folder = this.pane.addFolder({ title: 'Round Light', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Base_RoundLight')\n\n    this.#createEmissiveControl(mesh, folder)\n    this.#createEmissiveIntensityControl(mesh, folder)\n  }\n\n  #createHoloConfig() {\n    const folder = this.pane.addFolder({ title: 'Holo', expanded: false })\n    const mesh = this.app.scene.getObjectByName('Holo')\n\n    folder.addInput(mesh.material.uniforms.u_Progress1, 'value', { label: 'Progress 1', min: 0, max: 1 })\n    folder.addInput(mesh.material.uniforms.u_Progress2, 'value', { label: 'Progress 2', min: 0, max: 1 })\n    folder.addInput(mesh.material.uniforms.u_Progress3, 'value', { label: 'Progress 3', min: 0, max: 1 })\n    folder.addInput(mesh.material.uniforms.u_TransitionSmoothness, 'value', { label: 'Transition smoothness', min: 0, max: 1 })\n\n    const color = mesh.material.uniforms.u_Color.value.clone().multiplyScalar(255)\n    const params = { color: { r: color.r, g: color.g, b: color.b } }\n    folder.addInput(params, 'color', { label: 'Color' }).on('change', e => {\n      mesh.material.uniforms.u_Color.value.setRGB(e.value.r, e.value.g, e.value.b).multiplyScalar(1 / 255)\n    })\n\n    folder.addInput(mesh.material.uniforms.u_FresnelFalloff, 'value', { label: 'Fresnel falloff', min: 0.1, max: 6 })\n  }\n\n  #createScreenConfig() {\n    const folder = this.pane.addFolder({ title: 'Screen', expanded: false })\n    const border = this.app.scene.getObjectByName('Sign')\n\n    this.#createEmissiveControl(border, folder, 'Border color')\n    this.#createEmissiveIntensityControl(border, folder, 'Border intensity')\n\n    const screen = this.app.scene.getObjectByName('Sign_Screen')\n    const screenColor = screen.material.uniforms.u_Color.value.clone().multiplyScalar(255)\n    const params = { color: { r: screenColor.r, g: screenColor.g, b: screenColor.b } }\n    folder.addInput(params, 'color', { label: 'Color' }).on('change', e => {\n      screen.material.uniforms.u_Color.value.setRGB(e.value.r, e.value.g, e.value.b).multiplyScalar(1 / 255)\n    })\n  }\n\n  #createColorControl(mesh, folder) {\n    const baseColor255 = mesh.material.color.clone().multiplyScalar(255)\n    const params = { color: { r: baseColor255.r, g: baseColor255.g, b: baseColor255.b } }\n\n    folder.addInput(params, 'color', { label: 'Color' }).on('change', e => {\n      mesh.material.color.setRGB(e.value.r, e.value.g, e.value.b).multiplyScalar(1 / 255)\n    })\n  }\n\n  #createEmissiveControl(mesh, folder, label = 'Emissive') {\n    const baseColor255 = mesh.material.emissive.clone().multiplyScalar(255)\n    const params = { emissive: { r: baseColor255.r, g: baseColor255.g, b: baseColor255.b } }\n\n    folder.addInput(params, 'emissive', { label }).on('change', e => {\n      mesh.material.emissive.setRGB(e.value.r, e.value.g, e.value.b).multiplyScalar(1 / 255)\n    })\n  }\n\n  #createEmissiveIntensityControl(mesh, folder, label = 'Emissive Intensity') {\n    folder.addInput(mesh.material, 'emissiveIntensity', { label, min: 0, max: 3 })\n  }\n}\n","import {\n  Scene,\n  WebGLRenderer,\n  PerspectiveCamera,\n  Clock,\n  LoadingManager,\n  AmbientLight,\n  Vector2,\n  TextureLoader,\n  RepeatWrapping,\n  DoubleSide,\n  Vector3,\n} from 'three';\n\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\n// Remove this if you don't need to load any 3D model\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\n\nimport { gsap } from 'gsap';\n\nimport { MetalMaterial } from './materials/MetalMaterial';\nimport { PipesMaterial } from './materials/PipesMaterial';\nimport { LightsMaterial } from './materials/LightsMaterial';\nimport { HoloMaterial } from './materials/HoloMaterial';\nimport { NeonMaterial } from './materials/NeonMaterial';\nimport { ScreenMaterial } from './materials/ScreenMaterial';\nimport { FloorMaterial } from './materials/FloorMaterial';\n\nimport { Debugger } from './Debugger';\nimport { DirectionalLight } from 'three';\n\nclass App {\n  #resizeCallback = () => this.#onResize();\n\n  constructor(container) {\n    this.container = document.querySelector(container);\n    this.screen = new Vector2(\n      this.container.clientWidth,\n      this.container.clientHeight\n    );\n  }\n\n  async init() {\n    this.#createScene();\n    this.#createCamera();\n    this.#createRenderer();\n    this.#createClock();\n    this.#addListeners();\n    this.#createControls();\n    this.#createLoaders();\n    this.#createPostprocess();\n\n    await this.#loadTextures();\n\n    this.textures.Holo_Alpha.wrapT = RepeatWrapping;\n    this.textures.Floor_AO.flipY = false;\n\n    await this.#loadModel();\n    this.#createHoloAnimation();\n\n    this.debugger = new Debugger(this);\n\n    gsap.ticker.add(() => {\n      this.#update();\n      this.#render();\n    });\n\n    console.log(this);\n  }\n\n  destroy() {\n    this.renderer.dispose();\n    this.#removeListeners();\n  }\n\n  #update() {\n    const elapsed = this.clock.getElapsedTime();\n\n    this.controls.update();\n\n    // this.sign.rotation.y = elapsed * 0.35;\n    // this.sign.position.y =\n    //   this.sign.userData.defaultPosY + 0.2 + Math.sin(elapsed * 1.4) * 0.1;\n\n    this.holo.material.uniforms.u_Time.value = elapsed;\n    // this.fishMaterials[0].uniforms.u_Time.value = elapsed;\n  }\n\n  #render() {\n    this.composer.render();\n  }\n\n  #createScene() {\n    this.scene = new Scene();\n  }\n\n  #createCamera() {\n    this.camera = new PerspectiveCamera(\n      75,\n      this.screen.x / this.screen.y,\n      0.1,\n      100\n    );\n    this.camera.position.set(0, 0.8, 3);\n  }\n\n  #createRenderer() {\n    this.renderer = new WebGLRenderer({\n      alpha: true,\n      antialias: window.devicePixelRatio === 1,\n    });\n\n    this.container.appendChild(this.renderer.domElement);\n\n    this.renderer.setSize(this.screen.x, this.screen.y);\n    this.renderer.setPixelRatio(Math.min(1.5, window.devicePixelRatio));\n    this.renderer.setClearColor(0x000000);\n    this.renderer.physicallyCorrectLights = true;\n  }\n\n  #createPostprocess() {\n    this.renderPass = new RenderPass(this.scene, this.camera);\n\n    this.bloomPass = new UnrealBloomPass(this.screen, 0.95, 0.64, 0.27);\n\n    this.fxaaPass = new ShaderPass(FXAAShader);\n\n    this.composer = new EffectComposer(this.renderer);\n    this.composer.addPass(this.renderPass);\n    this.composer.addPass(this.fxaaPass);\n    this.composer.addPass(this.bloomPass);\n  }\n\n  #createLoaders() {\n    this.loadingManager = new LoadingManager();\n\n    this.loadingManager.onProgress = (url, loaded, total) => {\n      // In case the progress count is not correct, see this:\n      // https://discourse.threejs.org/t/gltf-file-loaded-twice-when-loading-is-initiated-in-loadingmanager-inside-onprogress-callback/27799/2\n      console.log(`Loaded ${loaded} resources out of ${total} -> ${url}`);\n    };\n\n    this.loadingManager.onLoad = () => {\n      console.log('All resources loaded');\n    };\n\n    this.gltfLoader = new GLTFLoader(this.loadingManager);\n\n    this.textureLoader = new TextureLoader(this.loadingManager);\n  }\n\n  async #loadTextures() {\n    this.textures = {};\n\n    const loadTexture = (name, url) => {\n      return new Promise((resolve) => {\n        this.textureLoader.load(url, (texture) => {\n          this.textures[name] = texture;\n          resolve();\n        });\n      });\n    };\n\n    const urls = [\n      { name: 'Base_AO', url: '/Base_AO.png' },\n      { name: 'Holo_Alpha', url: '/Holo_Alpha.png' },\n      { name: 'Floor_AO', url: '/Floor_AO.png' },\n    ];\n\n    const promises = urls.map(async ({ name, url }) => {\n      return loadTexture(name, url);\n    });\n\n    await Promise.all(promises);\n  }\n\n  /**\n   * Load a 3D model and append it to the scene\n   */\n  #loadModel() {\n    const loadHolegram = new Promise((resolve) => {\n      this.gltfLoader.load('./model.glb', (gltf) => {\n        this.mesh = gltf.scene.children[0];\n        this.mesh.translateY(-1.3);\n        this.mesh.material = MetalMaterial;\n\n        this.textures.Base_AO.flipY = false;\n        this.mesh.geometry.setAttribute(\n          'uv2',\n          this.mesh.geometry.getAttribute('uv').clone()\n        );\n        this.mesh.material.aoMap = this.textures.Base_AO;\n\n        this.mesh.getObjectByName('Base_Pipes').material = PipesMaterial;\n        this.mesh.getObjectByName('Base_PointLights').material = LightsMaterial;\n        this.mesh.getObjectByName('Base_RoundLight').material = NeonMaterial;\n\n        this.holo = this.mesh.getObjectByName('Holo');\n        this.holo.material = HoloMaterial;\n        this.holo.material.uniforms.t_AlphaMap.value = this.textures.Holo_Alpha;\n\n        this.sign = this.mesh.getObjectByName('Sign');\n        this.sign.material = NeonMaterial.clone();\n        this.sign.material.opacity = 0;\n        this.sign.material.side = DoubleSide;\n        this.sign.material.transparent = true;\n        this.sign.material.color.setHex(0x146caf);\n        this.sign.material.emissiveIntensity = 0.91;\n        this.sign.userData.defaultPosY = this.sign.position.y;\n\n        this.signScreen = this.mesh.getObjectByName('Sign_Screen');\n        this.signScreen.material = ScreenMaterial;\n        this.signScreen.material.uniforms.t_AlphaMap.value =\n          this.textures.Holo_Alpha;\n\n        this.floor = gltf.scene.getObjectByName('Floor');\n        this.floor.position.y = -1.31;\n        this.floor.material = FloorMaterial;\n        this.floor.material.uniforms.t_aoMap.value = this.textures.Floor_AO;\n\n        this.scene.add(this.mesh, this.floor);\n\n        resolve();\n      });\n    });\n\n    const loadFish = new Promise((resolve) => {\n      this.fishMaterials = [];\n      this.gltfLoader.load('./fish2.glb', (gltf) => {\n        console.log(gltf);\n        const fish = gltf.scene;\n        fish.traverse((child) => {\n          if (child.isMesh) {\n            child.material.opacity = 0.0;\n            // child.material.wireframe = true;\n            this.fishMaterials = [...this.fishMaterials, child.material];\n            // console.log(child.name);\n            console.log(child.material);\n            if (child.material.name === 'Material.001') {\n              // primaryColor\n              child.material = HoloMaterial;\n              child.material.wireframe = false;\n            } else if (child.material.name === 'Material.013') {\n              //secondaryColor\n              child.material = HoloMaterial;\n            } else if (child.material.name === 'Material.003') {\n              // Mouth\n              // child.material = NeonMaterial;\n            } else if (child.material.name === 'Material') {\n              // White Eyes\n              // child.material = NeonMaterial;\n            } else if (child.material.name === 'Black') {\n              //  Black Eye\n              // child.material = NeonMaterial;\n              child.material.wireframe = false;\n            }\n          }\n        });\n\n        fish.name = 'fish';\n        fish.scale.x = 0.05;\n        fish.scale.y = 0.05;\n        fish.scale.z = 0.05;\n        fish.position.y = 0.95;\n\n        // this.sign = this.mesh.getObjectByName('Sign');\n        // this.sign.material = NeonMaterial.clone();\n        // this.sign.material.opacity = 0;\n        // this.sign.material.side = DoubleSide;\n        // this.sign.material.transparent = true;\n        // this.sign.material.color.setHex(0x146caf);\n        // this.sign.material.emissiveIntensity = 0.91;\n        // this.sign.userData.defaultPosY = this.sign.position.y;\n\n        // this.signScreen = this.mesh.getObjectByName('Sign_Screen');\n        // this.signScreen.material = ScreenMaterial;\n        // this.signScreen.material.uniforms.t_AlphaMap.value =\n        //   this.textures.Holo_Alpha;\n        this.fish = fish;\n        console.log(this.fish);\n        this.scene.add(this.fish);\n        const light = new AmbientLight(0xffffff, 10);\n        const light2 = new DirectionalLight(0xffffff, 1);\n        light2.target = this.fish;\n        // const helper = new THREE.DirectionalLightHelper(light2, 5);\n        this.scene.add(light2);\n\n        this.scene.add(light);\n        resolve();\n      });\n    });\n\n    return Promise.all([loadHolegram, loadFish]);\n  }\n\n  #createHoloAnimation() {\n    this.holoAnimation = new gsap.timeline({\n      paused: true,\n      onUpdate: () => {\n        this.debugger.pane.refresh();\n      },\n    });\n\n    this.holoAnimation\n      .addLabel('start')\n\n      .fromTo(\n        this.holo.material.uniforms.u_Progress1,\n        { value: 0 },\n        { value: 1, duration: 1.25, overwrite: true },\n        'start'\n      )\n      .fromTo(\n        this.holo.material.uniforms.u_Progress2,\n        { value: 0 },\n        { value: 1, duration: 1.25, overwrite: true },\n        'start+=0.13'\n      )\n      .fromTo(\n        this.holo.material.uniforms.u_Progress3,\n        { value: 0 },\n        { value: 1, duration: 1.25, overwrite: true },\n        'start+=0.28'\n      )\n      .addLabel('animateInSign', 'start+=1')\n      .fromTo(\n        this.fishMaterials[0],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      )\n      .fromTo(\n        this.fishMaterials[1],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      )\n      .fromTo(\n        this.fishMaterials[2],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      )\n      .fromTo(\n        this.fishMaterials[3],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      )\n      .fromTo(\n        this.fishMaterials[4],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      )\n      .fromTo(\n        this.fishMaterials[5],\n        { visible: false },\n        { visible: true, duration: 1.8 },\n        'animateInSign'\n      );\n    // .fromTo(\n    //   this.fishMaterials[1],\n    //   { opacity: 0 },\n    //   { opacity: 1, duration: 1.8 },\n    //   'animateInSign'\n    // )\n    // .fromTo(\n    //   this.fishMaterials[2],\n    //   { opacity: 0 },\n    //   { opacity: 1, duration: 1.8 },\n    //   'animateInSign'\n    // )\n    // .fromTo(\n    //   this.fishMaterials[3],\n    //   { opacity: 0 },\n    //   { opacity: 1, duration: 1.8 },\n    //   'animateInSign'\n    // );\n\n    // .fromTo(\n    //   this.signScreen.material.uniforms.u_Opacity,\n    //   { value: 0 },\n    //   { value: 1, duration: 1.8 },\n    //   'animateInSign'\n    // );\n  }\n\n  #createControls() {\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.enabled = false;\n    this.controls.enableDamping = true;\n    this.controls.autoRotate = true;\n    this.controls.maxPolarAngle = Math.PI / 1.6;\n    this.controls.target = new Vector3(0, 0.4, 0);\n  }\n\n  #createClock() {\n    this.clock = new Clock();\n  }\n\n  #addListeners() {\n    window.addEventListener('resize', this.#resizeCallback, { passive: true });\n  }\n\n  #removeListeners() {\n    window.removeEventListener('resize', this.#resizeCallback, {\n      passive: true,\n    });\n  }\n\n  #onResize() {\n    this.screen.set(this.container.clientWidth, this.container.clientHeight);\n\n    this.camera.aspect = this.screen.x / this.screen.y;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(this.screen.x, this.screen.y);\n    this.composer.setSize(this.screen.x, this.screen.y);\n  }\n}\n\nconst app = new App('#app');\napp.init();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}